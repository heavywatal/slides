<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>3. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†1: æŠ½å‡ºã€é›†ç´„ãªã©ã€‚ â€” é€²åŒ–å­¦å®Ÿç¿’ 2023 ç‰§é‡ç ” æ±åŒ—å¤§å­¦</title>
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="3. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†1: æŠ½å‡ºã€é›†ç´„ãªã©ã€‚ â€” é€²åŒ–å­¦å®Ÿç¿’ 2023 ç‰§é‡ç ” æ±åŒ—å¤§å­¦">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/slides/tohoku2023r/3-structure1.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Slide decks â€” Heavy Watal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">
<link rel="stylesheet" href="/lib/katex/katex.min.css">
<script defer src="/lib/katex/katex.min.js"></script>
<script defer src="/lib/katex/contrib/auto-render.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false}
    ]
  });
});
</script>
<style>
.katex {
  font-size: 1.12em;
}

.katex-display > .katex {
  text-align: left;
  padding-left: 2rem;
}
</style>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V60H2JH0G6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-V60H2JH0G6');
</script>
<link rel="stylesheet" href="/slides/lib/reveal.js/reveal.css">
<script defer src="/slides/lib/reveal.js/reveal.js"></script>
<script defer src="/slides/lib/reveal.js/plugin/notes/notes.js"></script>
<script defer src="/slides/lib/reveal.js/plugin/search/search.js"></script>
<script defer src="/slides/lib/reveal-initialize.js"></script>
<script>
window.addEventListener('DOMContentLoaded', function() {
  Reveal.configure({width: 1440, height: 1080});
  document.querySelector('html').style.fontSize = '240%';
})
</script>
<script defer src="/slides/lib/reload-img-onclick.js"></script>
<link rel="stylesheet" href="/slides/css/style-reveal.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<h1 id="é€²åŒ–å­¦å®Ÿç¿’-2023-ç‰§é‡ç ”-æ±åŒ—å¤§å­¦"><a href=".">é€²åŒ–å­¦å®Ÿç¿’ 2023 ç‰§é‡ç ” æ±åŒ—å¤§å­¦</a></h1>
<div class="author">
å²©åµœ èˆª
</div>
<div class="affiliation">
æ±åŒ—å¤§å­¦ ç”Ÿå‘½ç§‘å­¦ç ”ç©¶ç§‘ é€²åŒ–ã‚²ãƒãƒŸã‚¯ã‚¹åˆ†é‡ ç‰§é‡ç ” ç‰¹ä»»åŠ©æ•™
</div>
<ol>
<li><a href="1-introduction.html">å°å…¥: ãƒ‡ãƒ¼ã‚¿è§£æã®å…¨ä½“åƒã€‚Rã®åŸºæœ¬ã€‚</a>
<li><a href="2-visualization.html">ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã€ãƒ¬ãƒãƒ¼ãƒˆä½œæˆã€‚</a>
<li class="current-deck"><a href="3-structure1.html">ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†1: æŠ½å‡ºã€é›†ç´„ãªã©ã€‚</a>
<li><a href="4-structure2.html">ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†2: çµåˆã€å¤‰å½¢ãªã©ã€‚</a>
<li><a href="5-content.html">ãƒ‡ãƒ¼ã‚¿å†…å®¹ã®å‡¦ç†: æ•°å€¤ã€æ–‡å­—åˆ—ãªã©ã€‚</a>
<li><a href="6-input.html">ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã€ãƒ‡ãƒ¼ã‚¿è§£é‡ˆ</a>
<li><a href="7-distribution.html">çµ±è¨ˆãƒ¢ãƒ‡ãƒªãƒ³ã‚°1: ç¢ºç‡åˆ†å¸ƒã€å°¤åº¦</a>
<li><a href="8-glm.html">çµ±è¨ˆãƒ¢ãƒ‡ãƒªãƒ³ã‚°2: ä¸€èˆ¬åŒ–ç·šå½¢ãƒ¢ãƒ‡ãƒ«</a>
<li><a href="9-report.html">ç™ºè¡¨ä¼š</a>
</ol>
<div class="footnote">
2023-04-11 æ±åŒ—å¤§å­¦ ç†å­¦éƒ¨ç”Ÿç‰©å­¦ç§‘ é€²åŒ–å­¦å®Ÿç¿’<br>
<a href="https://heavywatal.github.io/slides/tohoku2023r/">https://heavywatal.github.io/slides/tohoku2023r/</a>
</div>

</section>
<section>
<h2 id="ã“ã®å®Ÿç¿’ã®ç›®æ¨™">ã“ã®å®Ÿç¿’ã®ç›®æ¨™</h2>
<h3 id="-delç”Ÿç‰©å­¦ç ”ç©¶ã«ã¯ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«ãŒå¿…é ˆã ã¨èªè­˜del">âœ… <del>ç”Ÿç‰©å­¦ç ”ç©¶ã«ã¯ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«ãŒå¿…é ˆã ã¨èªè­˜</del></h3>
<h3 id="-delå†ç¾å¯èƒ½ãªè§£æã‚’æ¥½ã«ã‚„ã‚ŠãŸã„æ°—æŒã¡ã«ãªã‚‹del">âœ… <del>å†ç¾å¯èƒ½ãªè§£æã‚’æ¥½ã«ã‚„ã‚ŠãŸã„æ°—æŒã¡ã«ãªã‚‹</del></h3>
<h3 id="-å¿…è¦ãªæ–¹æ³•ã‚’èª¿ã¹å®Ÿè·µã™ã‚‹åŠ›ã‚’ã¤ã‘ã‚‹">â¬œ å¿…è¦ãªæ–¹æ³•ã‚’èª¿ã¹ã€å®Ÿè·µã™ã‚‹åŠ›ã‚’ã¤ã‘ã‚‹</h3>
<ul>
<li>Rã§ã§ããã†ãªã“ã¨ã‚’æŠŠæ¡ã™ã‚‹</li>
<li>å›°ã£ãŸã¨ãã®å¯¾å‡¦æ³•ãƒ»ç›¸è«‡å…ˆã‚’çŸ¥ã‚‹</li>
</ul>
<h3 id="-ãƒ‡ãƒ¼ã‚¿è§£æã®åŸºæœ¬ã«è§¦ã‚Œã‚‹">â¬œ ãƒ‡ãƒ¼ã‚¿è§£æã®åŸºæœ¬ã«è§¦ã‚Œã‚‹</h3>
<br>
å€‹ã€…ã®æ–¹æ³•ã¯è¦šãˆãªãã¦ã‚‚å¤§ä¸ˆå¤«ï¼<br>
å¿˜ã‚Œã¦ã¯èª¿ã¹ã€ã‚’ä½•åº¦ã‚‚ç¹°ã‚Šè¿”ã—ãªãŒã‚‰æŸ“ã¿è¾¼ã¾ã›ã¦ã„ã“ã†ã€‚

</section>
<section>
<h2 id="ãƒ‡ãƒ¼ã‚¿è§£æã®ãŠãŠã¾ã‹ãªæµã‚Œ">ãƒ‡ãƒ¼ã‚¿è§£æã®ãŠãŠã¾ã‹ãªæµã‚Œ</h2>
<ol>
<li>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ç’°å¢ƒã®æ•´å‚™ âœ…</li>
<li>ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€èª­ã¿è¾¼ã¿</li>
<li>æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿è§£æ
<ul>
<li><strong>å‰å‡¦ç†ã€åŠ å·¥</strong> (åœ°å‘³ã€‚æ„å¤–ã¨é‡ã„) ğŸ‘ˆ ä»Šå›ã®ä¸»é¡Œ</li>
<li>å¯è¦–åŒ–ã€ä»®èª¬ç”Ÿæˆ (æ´¾æ‰‹ï¼ã ã„ã˜ï¼) âœ… å®Œå…¨ã«ç†è§£ã—ãŸ</li>
<li>çµ±è¨ˆè§£æã€ä»®èª¬æ¤œè¨¼ (ã¿ã‚“ãªå‹‰å¼·ã—ãŸãŒã‚‹)</li>
</ul>
</li>
<li>å ±å‘Šã€ç™ºè¡¨ âœ… Quartoæ¥½ã—ã„</li>
</ol>
<figure>
<a href="https://r4ds.had.co.nz/introduction.html">
<img src="/slides/image/r4ds/data-science.png" width="720">
<figcaption class="url">https://r4ds.had.co.nz/introduction.html</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="å¯è¦–åŒ–ã ã„ã˜ã‚ã‹ã£ãŸ">å¯è¦–åŒ–ã ã„ã˜ã€‚ã‚ã‹ã£ãŸã€‚</h2>
<p>æƒ…å ±ã®æ•´ç† â†’ <strong>æ­£ã—ã„è§£æãƒ»æ–°ã—ã„ç™ºè¦‹ãƒ»ä»®èª¬ç”Ÿæˆ</strong></p>
<figure>
<a href="https://r4ds.had.co.nz/explore-intro.html">
<img src="/slides/image/r4ds/data-science-explore.png" width="720">
<figcaption class="url">https://r4ds.had.co.nz/explore-intro.html</figcaption>
</a>
</figure>
<p>ã§ã‚‚<strong>ãƒ‡ãƒ¼ã‚¿åˆ†æã«è²»ã‚„ã™åŠ´åŠ›ã®8å‰²ã¯å‰å‡¦ç†</strong>ã‚‰ã—ã„ã‚ˆã€‚ã€‚ã€‚</p>

</section>
<section>
<h2 id="æ©Ÿæ¢°å‡¦ç†ã—ã‚„ã™ã„å½¢-vs-äººãŒèª­ã¿æ›¸ãã—ã‚„ã™ã„å½¢">æ©Ÿæ¢°å‡¦ç†ã—ã‚„ã™ã„å½¢ vs äººãŒèª­ã¿æ›¸ãã—ã‚„ã™ã„å½¢</h2>
<dl>
<dt>ä½œå›³ã‚„è§£æã«ä½¿ãˆã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã¯ã»ã¼æ±ºã¾ã£ã¦ã‚‹</dt>
<dd><code>ggplot(data, ...)</code>, <code>glm(..., data, ...)</code>, &hellip;</dd>
<dt>å‡ºç™ºç‚¹ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã•ã¾ã–ã¾</dt>
<dd>å®Ÿé¨“ãƒãƒ¼ãƒˆã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒ¼ãƒˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€&hellip;</dd>
</dl>
<blockquote>
<p>Happy families are all alike;<br>
every unhappy family is unhappy in its own way<br>
&mdash; Leo Tolstoy &ldquo;Anna Karenina&rdquo;</p>
</blockquote>
<blockquote>
<p>tidy datasets are all alike,<br>
but every messy dataset is messy in its own way<br>
&mdash; Hadley Wickham, creator of tidyverse</p>
</blockquote>

</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/image/fnshr/tidy-data-ex1.png" height="820" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/image/fnshr/messy-data-ex1.png" width="450" style="transform: translate(-0.6em, 0);">
    <div style="position: absolute; top: 18em;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<cite style="position: absolute; bottom: 1em; left: 2em;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</cite>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/image/fnshr/tidy-data-ex1-var.png" height="880" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/image/fnshr/messy-data-ex1-var.png" width="640" style="transform: translate(-1.6em, -0.5em);">
    <div style="position: absolute; top: 18em;">
    <strong>ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°</strong><br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<cite style="position: absolute; bottom: 1em; left: 2em;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</cite>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/image/fnshr/tidy-data-ex1-obs.png" height="800" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/image/fnshr/messy-data-ex1-obs.png" width="450" style="transform: translate(-1em, 0);">
    <div style="position: absolute; top: 18em;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    <strong>æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬</strong><br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<cite style="position: absolute; bottom: 1em; left: 2em;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</cite>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/image/fnshr/tidy-data-ex1-obs.png" height="800" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/image/fnshr/messy-data-ex1-val.png" width="420" style="transform: translate(-0.6em, 0.1em);">
    <div style="position: absolute; top: 18em;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    <strong>1ã‚»ãƒ«ã¯1ã¤ã®å€¤</strong><br>
    </div>
  </div>
</div>
<cite style="position: absolute; bottom: 1em; left: 2em;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</cite>

</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp--nbsp-ggplot-ã—ãŸããªã‚‹å½¢">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  â‰ˆ Â  ggplot ã—ãŸããªã‚‹å½¢</h2>
<ul>
<li><strong>ç¸¦1åˆ—</strong>ã¯1ã¤ã®<strong>å¤‰æ•°</strong></li>
<li><strong>æ¨ª1è¡Œ</strong>ã¯1ã¤ã®<strong>è¦³æ¸¬</strong></li>
<li><strong>1ã‚»ãƒ«</strong>ã¯1ã¤ã®<strong>å€¤</strong></li>
</ul>
<cite style="display: block; text-align: right;">
<a class="url" href="https://r4ds.had.co.nz/tidy-data.html">https://r4ds.had.co.nz/tidy-data.html</a>
</cite>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">ggplot2</span><span class="o">::</span><span class="n">diamonds</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
   --                                                               
53937  0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
53939  0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp--nbsp-ggplot-ã—ãŸããªã‚‹å½¢">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  â‰ˆ Â  ggplot ã—ãŸããªã‚‹å½¢</h2>
<p>xè»¸ã€yè»¸ã€è‰²åˆ†ã‘ã€ãƒ‘ãƒãƒ«åˆ†ã‘ãªã©ã‚’åˆ—ã®åå‰ã§æŒ‡å®šã—ã¦ç°¡å˜ä½œå›³:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">ggplot</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span> <span class="o">+</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">carat</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">price</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">clarity</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">facet_wrap</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">cut</span><span class="p">))</span>
</span></span></code></pre></div><p><img src="./figure/tidy-data-benefit-1.png" alt="plot of chunk tidy-data-benefit"></p>

</section>
<section>
<h2 id="ç›®æ¨™-ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’ä¸‹ã”ã—ã‚‰ãˆã—ã¦é£Ÿã¹ã‚„ã™ã„å½¢ã«">ç›®æ¨™: ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’ä¸‹ã”ã—ã‚‰ãˆã—ã¦é£Ÿã¹ã‚„ã™ã„å½¢ã«</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>      Rural Male Rural Female Urban Male Urban Female
50-54       11.7          8.7       15.4          8.4
55-59       18.1         11.7       24.3         13.6
60-64       26.9         20.3       37.0         19.3
65-69       41.0         30.9       54.6         35.1
70-74       66.0         54.3       71.1         50.0
</code></pre><p>â†“ ä¸‹ã”ã—ã‚‰ãˆ: ä½œå›³ãƒ»è§£æã§ä½¿ã„ã‚„ã™ã„æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã«</p>
<pre tabindex="0"><code>   lbound ubound region    sex death
 1     50     54  Rural   Male  11.7
 2     50     54  Rural Female   8.7
 3     50     54  Urban   Male  15.4
 4     50     54  Urban Female   8.4
--                                  
17     70     74  Rural   Male  66.0
18     70     74  Rural Female  54.3
19     70     74  Urban   Male  71.1
20     70     74  Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹">å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹</h2>
<ul>
<li><strong>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†</strong> ğŸ‘ˆ ç¬¬3, 4å› æœ¬æ—¥ã®è©±é¡Œ
<ul>
<li>ä½¿ã„ãŸã„éƒ¨åˆ†ã ã‘æŠ½å‡º</li>
<li>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ç‰¹å¾´ã‚’è¦ç´„</li>
<li>ä½•ã‹ã®é †ã«ä¸¦ã¹æ›¿ãˆ</li>
<li>ç•°ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆ</li>
<li>å¤‰å½¢: ç¸¦é•· â†” æ¨ªåºƒ</li>
</ul>
</li>
<li>ãƒ‡ãƒ¼ã‚¿å†…å®¹ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç† <span style="color: #888888;">â€” ç¬¬5å› æ˜æ—¥</span>
<ul>
<li>æ•°å€¤ã®å¤‰æ›: å¯¾æ•°ã€æ­£è¦åŒ–</li>
<li>å¤–ã‚Œå€¤ãƒ»æ¬ æå€¤ã¸ã®å¯¾å‡¦</li>
<li>å‹å¤‰æ›: é€£ç¶šå¤‰æ•°ã€ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•°ã€æŒ‡ç¤ºå¤‰æ•°ã€å› å­ã€æ—¥æ™‚</li>
<li>æ–‡å­—åˆ—å‡¦ç†: æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ</li>
</ul>
</li>
</ul>
<p><cite style="display: block; text-align: right;"><a href="https://www.amazon.co.jp/dp/4774196479/ref=as_li_ss_tl?ie=UTF8&linkCode=ll1&tag=heavywatal-22&linkId=8a3fd4e9a0c944b1b41242bbab8d147b">
æœ¬æ©‹æ™ºå…‰ã€Œå‰å‡¦ç†å¤§å…¨ã€
</a></cite></p>
</section>
<section>
<h2 id="tidyverse-ãƒ‡ãƒ¼ã‚¿ç§‘å­¦ã®ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤">tidyverse: ãƒ‡ãƒ¼ã‚¿ç§‘å­¦ã®ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤</h2>
<a href="https://www.tidyverse.org/">
<img src="/slides/image/rstats/hex-badges8.png" width="33%" align="right">
</a>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;tidyverse&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">conflicted</span><span class="p">)</span> <span class="c1"># å®‰å…¨ã®ãŠã¾ã˜ãªã„</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>  <span class="c1"># ä¸€æŒ™ã«èª­ã¿è¾¼ã¿</span>
</span></span></code></pre></div><pre tabindex="0"><code>â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
âœ” dplyr     1.1.1     âœ” readr     2.1.4
âœ” forcats   1.0.0     âœ” stringr   1.5.0
âœ” ggplot2   3.4.2     âœ” tibble    3.2.1
âœ” lubridate 1.9.2     âœ” tidyr     1.3.0
âœ” purrr     1.0.1     
</code></pre><p>ä¸€è²«ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã§ãƒ‡ãƒ¼ã‚¿è§£æã®æ§˜ã€…ãªå·¥ç¨‹ã‚’ã‚«ãƒãƒ¼</p>
<figure style="margin-block: 0;">
<a href="https://r4ds.had.co.nz/introduction.html">
<img src="/slides/image/r4ds/data-science.png" width="720">
<figcaption class="url">https://r4ds.had.co.nz/introduction.html</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="dplyr-----dataframeã®é«˜é€Ÿå‡¦ç†æ‹…å½“">dplyr &mdash; data.frameã®é«˜é€Ÿå‡¦ç†æ‹…å½“</h2>
<a href="https://dplyr.tidyverse.org/">
<img src="/_img/hex-stickers/dplyr.webp" width="180" align="right">
</a>
<p>ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°ãŒãŸãã•ã‚“ã€‚ç¹‹ã’ã¦ä½¿ã† (piping)</p>
<dl>
<dt>æŠ½å‡º</dt>
<dd>åˆ—: <code>select()</code>,</dd>
<dd>è¡Œ: <code>filter()</code>, <code>distinct()</code>, <code>slice()</code></dd>
<dt>è¦ç´„ãƒ»é›†è¨ˆ</dt>
<dd><code>group_by()</code>, <code>summarize()</code>, <code>count()</code></dd>
<dt>ä¸¦ã¹æ›¿ãˆ</dt>
<dd><code>arrange()</code>, <code>relocate()</code></dd>
<dt>åˆ—ã®è¿½åŠ ãƒ»å¤‰æ›´</dt>
<dd><code>mutate()</code>, <code>rename()</code></dd>
<dt>çµåˆ</dt>
<dd>è¡Œæ–¹å‘: <code>bind_rows()</code></dd>
<dd>åˆ—æ–¹å‘: <code>left_join()</code>, <code>inner_join()</code>, <code>full_join()</code></dd>
</dl>
</section>
<section>
<h2 id="dplyrã‚’ä½¿ã£ã¦ã¿ã‚‹æº–å‚™">dplyrã‚’ä½¿ã£ã¦ã¿ã‚‹æº–å‚™</h2>
<p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚“ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã‚‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1"># install.packages(&#34;tidyverse&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">conflicted</span><span class="p">)</span> <span class="c1"># å®‰å…¨ã®ãŠã¾ã˜ãªã„</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">View</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span>  <span class="c1"># RStudio</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
   --                                                               
53937  0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
53939  0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>ğŸ”° <code>starwars</code> ãƒ‡ãƒ¼ã‚¿ã‚‚çœºã‚ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="dplyr-ã®é–¢æ•°ã‚’ä½¿ã†ã¨ãã®ãŠä½œæ³•">dplyr ã®é–¢æ•°ã‚’ä½¿ã†ã¨ãã®ãŠä½œæ³•</h2>
<p>åå‰ç©ºé–“ã‚’æ˜ç¤ºã™ã‚‹æ¼”ç®—å­ <code>::</code> ã‚’ä½¿ã†:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>   carat     cut color clarity depth table price    x    y    z
 1  3.01 Premium     I      I1  62.7    58  8040 9.10 8.97 5.67
 2  3.11    Fair     J      I1  65.9    57  9823 9.15 9.02 5.98
 3  3.01 Premium     F      I1  62.2    56  9925 9.24 9.13 5.73
 4  3.05 Premium     E      I1  60.9    58 10453 9.26 9.25 5.66
--                                                             
29  3.01    Good     H     SI2  57.6    64 18593 9.44 9.38 5.42
30  3.51 Premium     J     VS2  62.5    59 18701 9.66 9.63 6.03
31  3.01 Premium     J     SI2  60.7    59 18710 9.35 9.22 5.64
32  3.01 Premium     J     SI2  59.7    58 18710 9.41 9.32 5.59
</code></pre><p><strong>åŒåã®é–¢æ•°ã¨è¡çª</strong>ã™ã‚‹å ´åˆ(ã“ã“ã§ã¯Ræ¨™æº–ã® <code>stats::filters()</code>)ã€<br>
ã€Œç§ãŒä½¿ã„ãŸã„ã®ã¯ <strong>dplyrã®ã»ã†ã® <code>filter()</code></strong> ã§ã™ã€ã¨æ˜ç¤ºã—ãŸã„ã€‚</p>
<p>ãã†ã˜ã‚ƒãªãã¦ã‚‚ã€Œã“ã®é–¢æ•°ã¯ã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”±æ¥ã€ãŒåˆ†ã‹ã£ã¦ä¾¿åˆ©ã€‚</p>

</section>
<section>
<h2 id="dplyr-ã¯ã“ã†ã„ã†ãµã†ã«ä½¿ã„ã‚„ã™ã„">dplyr ã¯ã“ã†ã„ã†ãµã†ã«ä½¿ã„ã‚„ã™ã„</h2>
<p>å°ã•ãªé–¢æ•°ã‚’ç¹‹ã’ã¦ä½¿ã†æµã‚Œä½œæ¥­:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>                   <span class="c1"># ç”Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‡ºç™ºã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">|&gt;</span>  <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">|&gt;</span>          <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>              <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">|&gt;</span>     <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>                              <span class="c1"># è¡¨ç¤ºã—ã¦ã¿ã‚‹</span>
</span></span></code></pre></div><pre tabindex="0"><code>        cut mean(price)
1      Fair    7177.856
2      Good    7753.601
3 Very Good    8340.549
4   Premium    8487.249
5     Ideal    8674.227
</code></pre><p>ã“ã®è¦‹æ…£ã‚Œã¬è¨˜å· <code>|&gt;</code> ã¯ä½•ï¼Ÿ<br>
(<code>select()</code> ãªã©å€‹ã€…ã®é–¢æ•°ã¯å¾Œã§è§¦ã‚Œã‚‹ã¨ã—ã¦)</p>

</section>
<section>
<h2 id="pipe-operator-ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­-">Pipe operator (ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­) <code>|&gt;</code></h2>
<p>ãƒ‘ã‚¤ãƒ—ã®å·¦å´ã®å¤‰æ•°ã‚’ã€å³å´ã®é–¢æ•°ã®ç¬¬ä¸€å¼•æ•°ã«ã­ã˜è¾¼ã‚€:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">diamonds</span> <span class="o">|&gt;</span> <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">filter</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span>     <span class="c1"># ã“ã‚Œã¨åŒã˜</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å‰å‡¦ç†ã®æµã‚Œä½œæ¥­ã«ä¾¿åˆ©:</span>
</span></span><span class="line"><span class="cl"><span class="n">diamonds</span> <span class="o">|&gt;</span> <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="kc">...</span>
</span></span><span class="line"><span class="cl"><span class="n">potatoes</span> <span class="o">|&gt;</span> <span class="nf">cut</span><span class="p">()</span> <span class="o">|&gt;</span> <span class="nf">fry</span><span class="p">()</span> <span class="o">|&gt;</span> <span class="nf">season</span><span class="p">(</span><span class="s">&#34;salt&#34;</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="nf">eat</span><span class="p">()</span>
</span></span></code></pre></div><p>ğŸ”° ãƒ‘ã‚¤ãƒ—ã‚’ä½¿ã‚ãªã„å½¢ã«æ›¸ãæ›ãˆã€å‡ºåŠ›ã‚’ç¢ºèªã—ã‚ˆã†:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="nf">sum</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 21
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="kc">letters</span> <span class="o">|&gt;</span> <span class="nf">toupper</span><span class="p">()</span> <span class="o">|&gt;</span> <span class="nf">head</span><span class="p">(</span><span class="m">3</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;A&#34; &#34;B&#34; &#34;C&#34;
</code></pre><p>[è§£ç­”ä¾‹]</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">sum</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">6</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nf">head</span><span class="p">(</span><span class="nf">toupper</span><span class="p">(</span><span class="kc">letters</span><span class="p">),</span> <span class="m">3</span><span class="p">)</span>
</span></span></code></pre></div>
</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ã‚ãªã„æ–¹æ³•">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>|&gt;</code> ã‚’ä½¿ã‚ãªã„æ–¹æ³•</h2>
<p>ğŸ˜ ä¸€æ™‚å¤‰æ•°ã‚’ã‚¤ãƒã‚¤ãƒä½œã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">tmp1</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">tmp2</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">tmp1</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span>             <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">tmp3</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">tmp2</span><span class="p">,</span> <span class="n">cut</span><span class="p">)</span>                 <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="n">tmp3</span><span class="p">,</span> <span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span>      <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span></code></pre></div><p>ğŸ˜ åŒã˜åå‰ã‚’ä½¿ã„å›ã™:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span>           <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">cut</span><span class="p">)</span>               <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span>      <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span></code></pre></div><p>ã©ã¡ã‚‰ã‚‚æ‚ªããªã„ã€‚
ä½•åº¦ã‚‚å¤‰æ•°åã‚’å…¥åŠ›ã™ã‚‹ã®ãŒã‚„ã‚„å†—é•·ã€‚</p>

</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ã‚ãªã„æ–¹æ³•">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>|&gt;</code> ã‚’ä½¿ã‚ãªã„æ–¹æ³•</h2>
<p>ğŸ˜« ä¸€æ™‚å¤‰æ•°ã‚’ä½¿ã‚ãšã«:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span>              <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span><span class="line"><span class="cl">    <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span>                        <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl">      <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span>                            <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">        <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">),</span> <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">        <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">),</span>                             <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">      <span class="n">cut</span><span class="p">),</span>                                 <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span>                        <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span></code></pre></div><p>ğŸ¤ª æ”¹è¡Œã•ãˆã›ãšã«:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">),</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">),</span> <span class="n">cut</span><span class="p">),</span> <span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span>
</span></span></code></pre></div><p>è«–ç†ã®æµã‚Œã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æµã‚ŒãŒåˆã‚ãšã€ç›®ãŒè¡Œã£ãŸã‚Šæ¥ãŸã‚Šã€‚<br>
ã•ã£ãã®ã»ã†ãŒãœã‚“ãœã‚“ãƒã‚·ã€‚</p>

</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ãŠã†">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>|&gt;</code> ã‚’ä½¿ãŠã†</h2>
<p>ğŸ˜ æ…£ã‚Œã‚Œã°ã€è«–ç†ã®æµã‚Œã‚’è¿½ã„ã‚„ã™ã„:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">|&gt;</span>   <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">|&gt;</span>           <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>               <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">|&gt;</span>      <span class="c1"># å¹³å‡ã‚’è¨ˆç®—</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>                               <span class="c1"># è¡¨ç¤ºã—ã¦ã¿ã‚‹</span>
</span></span></code></pre></div><pre tabindex="0"><code>        cut mean(price)
1      Fair    7177.856
2      Good    7753.601
3 Very Good    8340.549
4   Premium    8487.249
5     Ideal    8674.227
</code></pre><p>tidyverseãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤ã¯ã“ã†ã„ã†ä½¿ã„æ–¹ã‚’ã—ã‚„ã™ã„è¨­è¨ˆã€‚<br>
ä½¿ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‚ã‘ã§ã¯ãªã„ãŒã€èª­ã‚ãŸã»ã†ãŒã„ã„ã€‚</p>
<div style="font-size: 0.8em; color: #888888;">
<p>R &lt; 4.2 ã¾ã§ã‚ˆãä½¿ã‚ã‚Œã¦ã„ãŸ <code>%&gt;%</code> ã‚‚ã»ã¼åŒã˜ã€‚</p>
</div>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>åˆ—ã®ç•ªå·</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut price
    1  0.23     Ideal   326
    2  0.21   Premium   326
    3  0.23      Good   327
    4  0.29   Premium   334
   --                      
53937  0.72      Good  2757
53938  0.70 Very Good  2757
53939  0.86   Premium  2757
53940  0.75     Ideal  2757
</code></pre><p>åˆ¥è§£: <code>|&gt; dplyr::select(c(1, 2, 7))</code>, <code>diamonds[, c(1, 2, 7)]</code></p>
<p>ğŸ”° <code>starwars</code> ã® 1, 10, 11 åˆ—ç›®ã‚’3é€šã‚Šã®æ–¹æ³•ã§æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>åˆ—ã®åå‰</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut price
    1  0.23     Ideal   326
    2  0.21   Premium   326
    3  0.23      Good   327
    4  0.29   Premium   334
   --                      
53937  0.72      Good  2757
53938  0.70 Very Good  2757
53939  0.86   Premium  2757
53940  0.75     Ideal  2757
</code></pre><p>åˆ¥è§£: <code>|&gt; dplyr::select(c(&quot;carat&quot;, &quot;cut&quot;, &quot;price&quot;))</code></p>
<p>ğŸ”° <code>starwars</code> ã® 1, 10, 11 åˆ—ç›®ã‚’<strong>åˆ—åã§</strong>æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>æ¨ã¦ã‚‹åˆ—</strong>ã‚’åè»¢æŒ‡å®š:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="o">!</span><span class="nf">c</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      color clarity depth table    x    y    z
    1     E     SI2  61.5    55 3.95 3.98 2.43
    2     E     SI1  59.8    61 3.89 3.84 2.31
    3     E     VS1  56.9    65 4.05 4.07 2.31
    4     I     VS2  62.4    58 4.20 4.23 2.63
   --                                         
53937     D     SI1  63.1    55 5.69 5.75 3.61
53938     D     SI1  62.8    60 5.66 5.68 3.56
53939     H     SI2  61.0    58 6.15 6.12 3.74
53940     D     SI2  62.2    55 5.83 5.87 3.64
</code></pre><p>åˆ¥è§£: <code>|&gt; dplyr::select(!c(&quot;carat&quot;, &quot;cut&quot;, &quot;price&quot;))</code></p>
<p>ğŸ”° <code>starwars</code> ã® <strong>1, 10, 11 åˆ—ç›®ã‚’é™¤å¤–</strong>ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p>åå‰ã®<strong>éƒ¨åˆ†ä¸€è‡´</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity
    1  0.23     Ideal     E     SI2
    2  0.21   Premium     E     SI1
    3  0.23      Good     E     VS1
    4  0.29   Premium     I     VS2
   --                              
53937  0.72      Good     D     SI1
53938  0.70 Very Good     D     SI1
53939  0.86   Premium     H     SI2
53940  0.75     Ideal     D     SI2
</code></pre><p>See <code>?dplyr_tidy_select</code> or <a href="https://tidyselect.r-lib.org/reference/language.html">selection helpers</a> for more details.</p>
<p>ğŸ”° <code>starwars</code> ã® <strong>&ldquo;s&rdquo; ã§çµ‚ã‚ã‚‹åˆ—</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>åˆ—ã®å‹</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat depth table price    x    y    z
    1  0.23  61.5    55   326 3.95 3.98 2.43
    2  0.21  59.8    61   326 3.89 3.84 2.31
    3  0.23  56.9    65   327 4.05 4.07 2.31
    4  0.29  62.4    58   334 4.20 4.23 2.63
   --                                       
53937  0.72  63.1    55  2757 5.69 5.75 3.61
53938  0.70  62.8    60  2757 5.66 5.68 3.56
53939  0.86  61.0    58  2757 6.15 6.12 3.74
53940  0.75  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>See <code>?dplyr_tidy_select</code> or <a href="https://tidyselect.r-lib.org/reference/where.html"><code>tidyselect::where</code></a> for more details.</p>
<p>ğŸ”° <code>starwars</code> ã®<strong>æ–‡å­—åˆ—å‹ã®åˆ—</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>ç­‰å· <code>==</code> ã§<strong>å®Œå…¨ä¸€è‡´ã™ã‚‹è¡Œ</strong>ã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">cut</span> <span class="o">==</span> <span class="s">&#34;Ideal&#34;</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat   cut color clarity depth table price    x    y    z
    1  0.23 Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.23 Ideal     J     VS1  62.8    56   340 3.93 3.90 2.46
    3  0.31 Ideal     J     SI2  62.2    54   344 4.35 4.37 2.71
    4  0.30 Ideal     I     SI2  62.0    54   348 4.31 4.34 2.68
   --                                                           
21548  0.71 Ideal     E     SI1  61.9    56  2756 5.71 5.73 3.54
21549  0.71 Ideal     G     VS1  61.4    56  2756 5.76 5.73 3.53
21550  0.72 Ideal     D     SI1  60.8    57  2757 5.75 5.76 3.50
21551  0.75 Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>åˆ¥è§£: <code>diamonds[diamonds[[&quot;cut&quot;]] == &quot;Ideal&quot;, ]</code></p>
<p>ğŸ”° <code>starwars</code> ã®<strong>äººé–“</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>ä¸ç­‰å· <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> ã‚’æº€ãŸã™è¡Œã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">cut</span> <span class="o">!=</span> <span class="s">&#34;Ideal&#34;</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    2  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    3  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
    4  0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75
   --                                                               
32386  0.72   Premium     D     SI1  62.7    59  2757 5.69 5.73 3.58
32387  0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
32388  0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
32389  0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>èº«é•·ãŒ150ä»¥ä¸‹ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>è¤‡æ•°ã®å€¤ã®ã†ã¡<strong>ã©ã‚Œã‹ã«ä¸€è‡´ã™ã‚‹è¡Œ</strong>ã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">cut</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Ideal&#34;</span><span class="p">,</span> <span class="s">&#34;Good&#34;</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat   cut color clarity depth table price    x    y    z
    1  0.23 Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.23  Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    3  0.31  Good     J     SI2  63.3    58   335 4.34 4.35 2.75
    4  0.30  Good     J     SI1  64.0    55   339 4.25 4.28 2.73
   --                                                           
26454  0.71 Ideal     G     VS1  61.4    56  2756 5.76 5.73 3.53
26455  0.72 Ideal     D     SI1  60.8    57  2757 5.75 5.76 3.50
26456  0.72  Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
26457  0.75 Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>ç›®ã®è‰²ãŒé’ã‹èµ¤ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>2ã¤ã®æ¡ä»¶ã‚’<strong>ä¸¡æ–¹æº€ãŸã™è¡Œ</strong>ã®ã¿æ®‹ã™ (AND):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="o">&amp;</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="m">14000</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>    carat       cut color clarity depth table price    x    y    z
  1  2.06   Premium     J      I1  61.2    58  5203 8.10 8.07 4.95
  2  2.14      Fair     J      I1  69.4    57  5405 7.74 7.70 5.36
  3  2.15      Fair     J      I1  65.5    57  5430 8.01 7.95 5.23
  4  2.22      Fair     J      I1  66.7    56  5607 8.04 8.02 5.36
 --                                                               
641  2.07   Premium     H     SI1  62.7    58 13993 8.14 8.09 5.09
642  2.07      Good     I     SI1  63.6    58 13993 8.09 7.99 5.11
643  2.13 Very Good     J     SI1  62.8    58 13996 8.13 8.17 5.12
644  2.11   Premium     J     SI1  62.4    58 13996 8.27 8.17 5.13
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>ã‚¿ãƒˆã‚¥ãƒ¼ã‚¤ãƒ³ç”Ÿã¾ã‚Œã®äººé–“</strong>ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>2ã¤ã®æ¡ä»¶ã®<strong>ã„ãšã‚Œã‹ã‚’æº€ãŸã™è¡Œ</strong>ã®ã¿æ®‹ã™ (OR):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="o">|</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="m">14000</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
   --                                                               
53023  0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
53024  0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
53025  0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
53026  0.75     Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>èº«é•·200ä»¥ä¸Šã¾ãŸã¯ä½“é‡100ä»¥ä¸Šã®ã‚­ãƒ£ãƒ©</strong>ã‚’æŠ½å‡ºã—ã‚ˆã†</p>

</section>
<section>
<h2 id="ä¸Šä½ä¸‹ä½ã®è¡Œã®æŠ½å‡º-slice_max-slice_min">ä¸Šä½/ä¸‹ä½ã®è¡Œã®æŠ½å‡º: <code>slice_max()</code>, <code>slice_min()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®å€¤ãŒ<strong>å¤§ãã„é †</strong>ã« <code>n</code> è¡Œã¾ãŸã¯å‰²åˆ <code>prop</code> ã§æŠ½å‡º:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">slice_max</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">5L</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>  carat       cut color clarity depth table price    x    y    z
1  2.29   Premium     I     VS2  60.8    60 18823 8.50 8.47 5.16
2  2.00 Very Good     G     SI1  63.5    56 18818 7.90 7.97 5.04
3  1.51     Ideal     G      IF  61.7    55 18806 7.37 7.41 4.56
4  2.07     Ideal     G     SI2  62.5    55 18804 8.20 8.13 5.11
5  2.00 Very Good     H     SI1  62.8    57 18803 7.95 8.00 5.01
</code></pre><p><strong>å‰²åˆã‚’æŒ‡å®š</strong>ã™ã‚‹ãªã‚‰ <code>n</code> ã®ä»£ã‚ã‚Šã« <code>prop = 0.05</code></p>
<p>ğŸ”° <code>starwars</code> ã®<strong>èº«é•·ãŒä½ã„é †ã«5åã ã‘</strong>æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="ä¸Šä½ä¸‹ä½ã®è¡Œã®æŠ½å‡º-slice_max-slice_min">ä¸Šä½/ä¸‹ä½ã®è¡Œã®æŠ½å‡º: <code>slice_max()</code>, <code>slice_min()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®å€¤ãŒ<strong>å¤§ãã„é †</strong>ã«<strong>å„ã‚°ãƒ«ãƒ¼ãƒ—ã‹ã‚‰</strong>æŠ½å‡º:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">slice_max</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">2L</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>   carat     cut color clarity depth table price    x    y    z
 1  2.01    Fair     G     SI1  70.6    64 18574 7.43 6.64 4.69
 2  2.02    Fair     H     VS2  64.5    57 18565 8.00 7.95 5.14
 3  2.80    Good     G     SI2  63.8    58 18788 8.90 8.85 0.00
 4  2.07    Good     I     VS2  61.8    61 18707 8.12 8.16 5.03
--                                                             
 7  2.29 Premium     I     VS2  60.8    60 18823 8.50 8.47 5.16
 8  2.29 Premium     I     SI1  61.8    59 18797 8.52 8.45 5.24
 9  1.51   Ideal     G      IF  61.7    55 18806 7.37 7.41 4.56
10  2.07   Ideal     G     SI2  62.5    55 18804 8.20 8.13 5.11
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã”ã¨ã«èº«é•·ãŒä½ã„3åãšã¤</strong>æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="å…ˆé ­æœ«å°¾ã®è¡Œã®æŠ½å‡º-slice_head-slice_tail">å…ˆé ­/æœ«å°¾ã®è¡Œã®æŠ½å‡º: <code>slice_head()</code>, <code>slice_tail()</code></h2>
<p><strong>å„ã‚°ãƒ«ãƒ¼ãƒ—ã®å…ˆé ­</strong>ã‚’ <code>n</code> è¡Œã¾ãŸã¯å‰²åˆ <code>prop</code> ã§æŠ½å‡º:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">slice_head</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">3L</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>   carat     cut color clarity depth table price    x    y    z
 1  0.22    Fair     E     VS2  65.1    61   337 3.87 3.78 2.49
 2  0.86    Fair     E     SI2  55.1    69  2757 6.45 6.33 3.52
 3  0.96    Fair     F     SI2  66.3    62  2759 6.27 5.95 4.07
 4  0.23    Good     E     VS1  56.9    65   327 4.05 4.07 2.31
--                                                             
12  0.22 Premium     F     SI1  60.4    61   342 3.88 3.84 2.33
13  0.23   Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
14  0.23   Ideal     J     VS1  62.8    56   340 3.93 3.90 2.46
15  0.31   Ideal     J     SI2  62.2    54   344 4.35 4.37 2.71
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã”ã¨ã«å…ˆé ­3åãšã¤</strong>æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="ãƒ©ãƒ³ãƒ€ãƒ ã«è¡Œã®æŠ½å‡º-slice_sample">ãƒ©ãƒ³ãƒ€ãƒ ã«è¡Œã®æŠ½å‡º: <code>slice_sample()</code></h2>
<p><strong>ãƒ©ãƒ³ãƒ€ãƒ ã«</strong> <code>n</code> è¡Œã¾ãŸã¯å‰²åˆ <code>prop</code> ã§ã‚µãƒ³ãƒ—ãƒ«:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">slice_sample</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">3L</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>   carat     cut color clarity depth table price    x    y    z
 1  0.45    Fair     F     SI1  66.8    59   794 4.79 4.63 3.16
 2  0.90    Fair     E     SI2  65.8    58  3084 6.02 5.98 3.95
 3  2.00    Fair     J     VS2  65.4    58 11966 7.96 7.75 5.14
 4  2.18    Good     H     SI2  60.4    64 16690 8.38 8.47 5.09
--                                                             
12  0.80 Premium     G     SI2  61.4    56  2451 5.99 5.96 3.67
13  1.58   Ideal     E     VS2  62.7    56 15579 7.45 7.55 4.70
14  0.53   Ideal     F    VVS2  62.7    56  2030 5.16 6.20 3.25
15  1.10   Ideal     G    VVS2  60.5    56  9215 6.76 6.70 4.07
</code></pre><p>ğŸ”° <code>starwars</code> ã‹ã‚‰<strong>ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã”ã¨ã«ãƒ©ãƒ³ãƒ€ãƒ ã«3å</strong>æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="xç•ªç›®ã®è¡Œã®æŠ½å‡º-slice">Xç•ªç›®ã®è¡Œã®æŠ½å‡º: <code>slice()</code></h2>
<p><strong>å„ã‚°ãƒ«ãƒ¼ãƒ—ã®Xç•ªç›®ã®è¡Œ</strong>ã‚’æŠ½å‡º:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">slice</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">9</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>   carat     cut color clarity depth table price    x    y    z
 1  0.22    Fair     E     VS2  65.1    61   337 3.87 3.78 2.49
 2  0.86    Fair     E     SI2  55.1    69  2757 6.45 6.33 3.52
 3  0.84    Fair     G     SI1  55.1    67  2782 6.39 6.20 3.47
 4  0.23    Good     E     VS1  56.9    65   327 4.05 4.07 2.31
--                                                             
12  0.22 Premium     D     VS2  59.3    62   404 3.91 3.88 2.31
13  0.23   Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
14  0.23   Ideal     J     VS1  62.8    56   340 3.93 3.90 2.46
15  0.32   Ideal     I     SI1  60.9    55   404 4.45 4.48 2.72
</code></pre>
</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-summarize">è¦ç´„ãƒ»é›†è¨ˆ: <code>summarize()</code></h2>
<p>åˆ—ã®<strong>åˆè¨ˆã€å¹³å‡ã€æœ€å¤§</strong>ãªã©ã‚’æ±‚ã‚ã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span> <span class="nf">mean</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>  sum(carat) mean(carat) max(price)
1   43040.87   0.7979397      18823
</code></pre><p>vectorã‚’å—ã‘å–ã£ã¦1ã¤ã®å€¤ã‚’è¿”ã™é›†ç´„é–¢æ•°:<br>
<code>min()</code>, <code>max()</code>, <code>mean()</code>, <code>median()</code>, <code>var()</code>, <code>sd()</code>, etc.</p>
<p>ğŸ”° <code>mpg</code> ã®<strong>å¸‚è¡—åœ°(cty)ã¨é«˜é€Ÿé“è·¯(hwy)ã®ç‡ƒè²»å¹³å‡å€¤</strong>ã‚’è¨ˆç®—ã—ã‚ˆã†</p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-summarize">è¦ç´„ãƒ»é›†è¨ˆ: <code>summarize()</code></h2>
<p>åˆ—ã®å€¤ã‚’<strong>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«</strong>é›†è¨ˆã™ã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="n">avg_carat</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                   <span class="n">max_price</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>        cut avg_carat max_price
1      Fair 1.0461366     18574
2      Good 0.8491847     18788
3 Very Good 0.8063814     18818
4   Premium 0.8919549     18823
5     Ideal 0.7028370     18806
</code></pre><p>ğŸ”° <code>mpg</code> ã®<strong>ç‡ƒè²»å¹³å‡å€¤ã‚’é§†å‹•æ–¹å¼(drv)ã”ã¨ã«</strong>è¨ˆç®—ã—ã‚ˆã†</p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-summarizeacross">è¦ç´„ãƒ»é›†è¨ˆ: <code>summarize(across())</code></h2>
<p>è¤‡æ•°ã®åˆ—ã®å€¤ã‚’ã¾ã¨ã‚ã¦é›†è¨ˆã™ã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span><span class="nf">across</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span> <span class="n">mean</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>        cut     carat    depth    table    price        x        y        z
1      Fair 1.0461366 64.04168 59.05379 4358.758 6.246894 6.182652 3.982770
2      Good 0.8491847 62.36588 58.69464 3928.864 5.838785 5.850744 3.639507
3 Very Good 0.8063814 61.81828 57.95615 3981.760 5.740696 5.770026 3.559801
4   Premium 0.8919549 61.26467 58.74610 4584.258 5.973887 5.944879 3.647124
5     Ideal 0.7028370 61.70940 55.95167 3457.542 5.507451 5.520080 3.401448
</code></pre><p>ğŸ”° <code>mpg</code> ã®<strong>å„æ•°å€¤åˆ—ã®æœ€å¤§å€¤ã‚’é§†å‹•æ–¹å¼ã”ã¨ã«</strong>è¨ˆç®—ã—ã‚ˆã†</p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-reframe">è¦ç´„ãƒ»é›†è¨ˆ: <code>reframe()</code></h2>
<p>è¤‡æ•°ã®å€¤ã‚’è¿”ã™é–¢æ•°ã§é›†ç´„ã™ã‚‹ã¨ã€çµæœã¯è¤‡æ•°è¡Œã«ã¾ãŸãŒã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">quantile</span><span class="p">(</span><span class="n">diamonds</span><span class="o">$</span><span class="n">price</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>      0%      25%      50%      75%     100% 
  326.00   950.00  2401.00  5324.25 18823.00 
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">reframe</span><span class="p">(</span><span class="nf">across</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">),</span> <span class="n">quantile</span><span class="p">))</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>  carat depth table    price     x     y     z
1  0.20  43.0    43   326.00  0.00  0.00  0.00
2  0.40  61.0    56   950.00  4.71  4.72  2.91
3  0.70  61.8    57  2401.00  5.70  5.71  3.53
4  1.04  62.5    59  5324.25  6.54  6.54  4.04
5  5.01  79.0    95 18823.00 10.74 58.90 31.80
</code></pre><p>ğŸ”° <code>mpg</code> ã®<strong>å„æ•°å€¤åˆ—ã® <code>range()</code> ã‚’é§†å‹•æ–¹å¼ã”ã¨ã«</strong>è¨ˆç®—ã—ã‚ˆã†</p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-count">è¦ç´„ãƒ»é›†è¨ˆ: <code>count()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®çµ„ã¿åˆã‚ã›å‡ºç¾æ•°ã‚’æ•°ãˆã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">count</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>     cut color    n
 1  Fair     D  163
 2  Fair     E  224
 3  Fair     F  312
 4  Fair     G  314
--                 
32 Ideal     G 4884
33 Ideal     H 3115
34 Ideal     I 2093
35 Ideal     J  896
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>æ€§ã¨ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã®çµ„ã¿åˆã‚ã›</strong>ã‚’æ•°ãˆã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="é‡è¤‡è¡Œã®é™¤å»-distinct">é‡è¤‡è¡Œã®é™¤å»: <code>distinct()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã«é–¢ã—ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¡Œã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">distinct</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>       cut color
 1   Ideal     E
 2 Premium     E
 3    Good     E
 4 Premium     I
--              
32    Fair     G
33    Fair     J
34    Fair     I
35    Fair     D
</code></pre><p><code>.keep_all = TRUE</code>
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨æŒ‡å®šã—ãªã‹ã£ãŸåˆ—ã‚‚æ®‹ã›ã‚‹ã€‚</p>
<p>ğŸ”° <code>starwars</code> ã®<strong>æ€§ã¨ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã®çµ„ã¿åˆã‚ã›</strong>ã ã‘æ®‹ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="è¡Œã®ä¸¦ã¹æ›¿ãˆ-arrange">è¡Œã®ä¸¦ã¹æ›¿ãˆ: <code>arrange()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®<strong>æ˜‡é †(ã¾ãŸã¯é™é † <code>desc()</code>)ã§</strong>è¡Œã‚’ä¸¦ã¹æ›¿ãˆã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">arrange</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nf">desc</span><span class="p">(</span><span class="n">carat</span><span class="p">))</span> <span class="o">|&gt;</span>  <span class="c1"># è‰²ã®æ˜‡é †ã€‚è‰²ãŒåŒã˜ãªã‚‰å¤§ãã•é™é †</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  3.40      Fair     D      I1  66.8    52 15964 9.42 9.34 6.27
    2  2.75     Ideal     D      I1  60.9    57 13156 9.04 8.98 5.49
    3  2.58 Very Good     D     SI2  58.9    63 14749 9.08 9.01 5.33
    4  2.57   Premium     D     SI2  58.9    58 17924 8.99 8.94 5.28
   --                                                               
53937  0.27 Very Good     J    VVS2  60.8    57   443 4.16 4.20 2.54
53938  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48
53939  0.24     Ideal     J    VVS2  62.8    57   432 3.96 3.94 2.48
53940  0.23     Ideal     J     VS1  62.8    56   340 3.93 3.90 2.46
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>ç¨®æ—ã¨èº«é•·ã§ä¸¦ã¹æ›¿ãˆ</strong>ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®ä¸¦ã¹æ›¿ãˆ-relocate">åˆ—ã®ä¸¦ã¹æ›¿ãˆ: <code>relocate()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã‚’å·¦ç«¯ã«ç§»å‹•:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">relocate</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">clarity</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat price clarity       cut color depth table    x    y    z
    1  0.23   326     SI2     Ideal     E  61.5    55 3.95 3.98 2.43
    2  0.21   326     SI1   Premium     E  59.8    61 3.89 3.84 2.31
    3  0.23   327     VS1      Good     E  56.9    65 4.05 4.07 2.31
    4  0.29   334     VS2   Premium     I  62.4    58 4.20 4.23 2.63
   --                                                               
53937  0.72  2757     SI1      Good     D  63.1    55 5.69 5.75 3.61
53938  0.70  2757     SI1 Very Good     D  62.8    60 5.66 5.68 3.56
53939  0.86  2757     SI2   Premium     H  61.0    58 6.15 6.12 3.74
53940  0.75  2757     SI2     Ideal     D  62.2    55 5.83 5.87 3.64
</code></pre><p><code>.before</code>, <code>.after</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¾®èª¿æ•´ã‚‚å¯èƒ½ã€‚</p>
<p>ğŸ”° <code>starwars</code> ã®<strong>ç¨®æ—ã¨å‡ºèº«åœ°ã‚’åå‰ã®å³ã«ç§»å‹•</strong>ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—ã®è¿½åŠ å¤‰æ›´-mutate">åˆ—ã®è¿½åŠ ãƒ»å¤‰æ›´: <code>mutate()</code></h2>
<p>æ—¢å­˜ã®åˆ—åã‚’æŒ‡å®šã™ã‚‹ã¨ä¸Šæ›¸ã:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="n">ratio</span> <span class="o">=</span> <span class="n">price</span> <span class="o">/</span> <span class="n">carat</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">price</span> <span class="o">=</span> <span class="m">105.59</span> <span class="o">*</span> <span class="n">price</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table     price    x    y    z    ratio
    1  0.23     Ideal     E     SI2  61.5    55  34422.34 3.95 3.98 2.43 1417.391
    2  0.21   Premium     E     SI1  59.8    61  34422.34 3.89 3.84 2.31 1552.381
    3  0.23      Good     E     VS1  56.9    65  34527.93 4.05 4.07 2.31 1421.739
    4  0.29   Premium     I     VS2  62.4    58  35267.06 4.20 4.23 2.63 1151.724
   --                                                                            
53937  0.72      Good     D     SI1  63.1    55 291111.63 5.69 5.75 3.61 3829.167
53938  0.70 Very Good     D     SI1  62.8    60 291111.63 5.66 5.68 3.56 3938.571
53939  0.86   Premium     H     SI2  61.0    58 291111.63 6.15 6.12 3.74 3205.814
53940  0.75     Ideal     D     SI2  62.2    55 291111.63 5.83 5.87 3.64 3676.000
</code></pre><p>ğŸ”° <code>starwars</code> ã®<strong>èº«é•·ã‚’ãƒ¡ãƒ¼ãƒˆãƒ«ã§è¡¨ã—ã¦BMIã‚’è¨ˆç®—</strong>ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="åˆ—åã®å¤‰æ›´-rename">åˆ—åã®å¤‰æ›´: <code>rename()</code></h2>
<p><code>new = old</code> ã®å½¢ã§æŒ‡å®šã™ã‚‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="n">dplyr</span><span class="o">::</span><span class="nf">rename</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="n">carat</span><span class="p">)</span> <span class="o">|&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">print</span><span class="p">()</span>
</span></span></code></pre></div><pre tabindex="0"><code>      size       cut color clarity depth table price    x    y    z
    1 0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2 0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    3 0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    4 0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
   --                                                              
53937 0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
53938 0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
53939 0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
53940 0.75     Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p><code>rename_with(diamonds, toupper)</code> ã®ã‚ˆã†ã«é–¢æ•°ã‚’æ¸¡ã™ã¨ä¸€æ‹¬å¤‰æ›´ã€‚</p>
<p>ğŸ”° <code>starwars</code> ã®<strong>heightã‚’cmã«ã€massã‚’kgã«æ”¹å</strong>ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹">å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹</h2>
<ul>
<li><strong>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†</strong> ç¬¬3, 4å› æœ¬æ—¥ã®è©±é¡Œ
<ul>
<li><strong>ä½¿ã„ãŸã„éƒ¨åˆ†ã ã‘æŠ½å‡º</strong></li>
<li><strong>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ç‰¹å¾´ã‚’è¦ç´„</strong></li>
<li><strong>ä½•ã‹ã®é †ã«ä¸¦ã¹æ›¿ãˆ</strong> ğŸ‘ˆ ç¬¬3å› ã“ã“ã¾ã§ç´¹ä»‹</li>
<li>ç•°ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆ</li>
<li>å¤‰å½¢: ç¸¦é•· â†” æ¨ªåºƒ</li>
</ul>
</li>
<li>ãƒ‡ãƒ¼ã‚¿å†…å®¹ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç† <span style="color: #888888;">â€” ç¬¬5å› æ˜æ—¥</span>
<ul>
<li>æ•°å€¤ã®å¤‰æ›: å¯¾æ•°ã€æ­£è¦åŒ–</li>
<li>å¤–ã‚Œå€¤ãƒ»æ¬ æå€¤ã¸ã®å¯¾å‡¦</li>
<li>å‹å¤‰æ›: é€£ç¶šå¤‰æ•°ã€ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•°ã€æŒ‡ç¤ºå¤‰æ•°ã€å› å­ã€æ—¥æ™‚</li>
<li>æ–‡å­—åˆ—å‡¦ç†: æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ</li>
</ul>
</li>
</ul>
<p><cite style="display: block; text-align: right;"><a href="https://www.amazon.co.jp/dp/4774196479/ref=as_li_ss_tl?ie=UTF8&linkCode=ll1&tag=heavywatal-22&linkId=8a3fd4e9a0c944b1b41242bbab8d147b">
æœ¬æ©‹æ™ºå…‰ã€Œå‰å‡¦ç†å¤§å…¨ã€
</a></cite></p>
</section>
<section>
<h2 id="æ†¶ãˆãªãã¦ã„ã„å…¬å¼ã‚µã‚¤ãƒˆãªã©ã‚’è¦‹ãªãŒã‚‰ä½œæ¥­">æ†¶ãˆãªãã¦ã„ã„ã€‚å…¬å¼ã‚µã‚¤ãƒˆãªã©ã‚’è¦‹ãªãŒã‚‰ä½œæ¥­</h2>
<figure>
<a href="https://dplyr.tidyverse.org/">
<img src="/slides/image/rstats/dplyr-website.png" width="80%">
<figcaption class="url">https://dplyr.tidyverse.org/</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="reference">Reference</h2>
<dl>
<dt>R for Data Science &mdash; Hadley Wickham and Garrett Grolemund</dt>
<dd><a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>,
<a href="https://amzn.to/2tbRmVc">Paperback</a>,
<a href="https://amzn.to/2yyFRKt">æ—¥æœ¬èªç‰ˆæ›¸ç±</a></dd>
</dl>
<p><a href="https://www.amazon.co.jp/dp/4774196479/ref=as_li_ss_tl?ie=UTF8&amp;linkCode=ll1&amp;tag=heavywatal-22&amp;linkId=8a3fd4e9a0c944b1b41242bbab8d147b">å‰å‡¦ç†å¤§å…¨ &mdash; æœ¬æ©‹æ™ºå…‰</a><br>
<a href="https://amzn.to/2Yy5LND">Rãƒ¦ãƒ¼ã‚¶ã®ãŸã‚ã®RStudio[å®Ÿè·µ]å…¥é–€ (å®‡å®™èˆ¹æœ¬) &mdash; æ¾æ‘ã‚‰</a></p>
<dl>
<dt>æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ &mdash; <a href="https://twitter.com/f_nisihara">@f_nisihara</a></dt>
<dd><a href="https://speakerdeck.com/fnshr/zheng-ran-detatutenani">Speaker Deck</a>,
<a href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">Colorless Green Ideas</a></dd>
<dt>Older versions</dt>
<dd>ã€Œ<a href="https://heavywatal.github.io/slides/nagoya2018/">Rã«ã‚„ã‚‰ã›ã¦æ¥½ã—ã‚ˆã† â€” ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã¨ä¸‹ã”ã—ã‚‰ãˆ</a>ã€
å²©åµœèˆª 2018</dd>
<dd>ã€ŒRã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿è§£æã®åŸºç¤ã¨å¿œç”¨ã€çŸ³å·ç”±å¸Œ 2019 åå¤å±‹å¤§å­¦</dd>
<dd>ã€Œ<a href="https://heavywatal.github.io/slides/tmd2022/">Rã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†å®Ÿç¿’</a>ã€
å²©åµœèˆª 2022 æ±äº¬åŒ»ç§‘æ­¯ç§‘å¤§</dd>
<dd>ã€Œ<a href="https://comicalcommet.github.io/r-training-2022/">Rã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿è§£æã®åŸºç¤ã¨å¿œç”¨</a>ã€
çŸ³å·ç”±å¸Œ 2022 åå¤å±‹å¤§å­¦</dd>
</dl>
<a href="4-structure2.html" class="readmore">
4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†2: çµåˆã€å¤‰å½¢ãªã©ã€‚
</a>
</section>
</div>
</div>
</body>
</html>
