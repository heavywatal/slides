<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>1. Introduction: what is data analysis and R basics — Hands-on Introduction to R 2023</title>
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="1. Introduction: what is data analysis and R basics — Hands-on Introduction to R 2023">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/slides/english2023r/1-introduction.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Slide decks — Heavy Watal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">
<link rel="stylesheet" href="/lib/katex/katex.min.css">
<script defer src="/lib/katex/katex.min.js"></script>
<script defer src="/lib/katex/contrib/auto-render.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false}
    ]
  });
});
</script>
<style>
.katex {
  font-size: 1.12em;
}

.katex-display > .katex {
  text-align: left;
  padding-left: 2rem;
}
</style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V60H2JH0G6"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V60H2JH0G6', { 'anonymize_ip': false });
}
</script>
<link rel="stylesheet" href="/slides/lib/reveal.js/reveal.css">
<script defer src="/slides/lib/reveal.js/reveal.js"></script>
<script defer src="/slides/lib/reveal.js/plugin/notes/notes.js"></script>
<script defer src="/slides/lib/reveal.js/plugin/search/search.js"></script>
<script defer src="/slides/lib/reveal-initialize.js"></script>
<script>
window.addEventListener('DOMContentLoaded', function() {
  Reveal.configure({width: 1440, height: 1080});
  document.querySelector('html').style.fontSize = '240%';
})
</script>
<script defer src="/slides/lib/reload-img-onclick.js"></script>
<link rel="stylesheet" href="/slides/css/style-reveal.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<h1 id="hands-on-introduction-to-r-2023"><a href=".">Hands-on Introduction to R 2023</a></h1>
<div class="author">
岩嵜 航 (Watal M. Iwasaki, PhD)
</div>
<div class="affiliation">
Graduate School of Life Sciences, Tohoku University
</div>
<ol>
<li class="current-deck"><a href="1-introduction.html">Introduction: what is data analysis and R basics</a>
<li><a href="2-visualization.html">Data visualization and reporting</a>
<li><a href="3-structure1.html">Data transformation 1: extract, summarize</a>
<li><a href="4-structure2.html">Data transformation 2: join, pivot</a>
<li><a href="5-content.html">Data cleansing and conversion: numbers, text</a>
<li><a href="6-input.html">Data input and interpretation</a>
<li><a href="7-distribution.html">Statistical modeling 1: probability distribution, likelihood</a>
<li><a href="8-glm.html">Statistical modeling 2: linear regression</a>
</ol>
<div class="footnote">
2023-11-27 Tohoku University<br>
<a href="https://heavywatal.github.io/slides/english2023r/">https://heavywatal.github.io/slides/english2023r/</a>
</div>

</section>
<section>
<h2 id="menu-basics-of-data-handling">Menu: basics of data handling</h2>
<ul>
<li>Recognize the importance of data analysis in biological research
<ul>
<li>What is &ldquo;to understand&rdquo;</li>
</ul>
</li>
<li>Learn R programming to be lazy in the long term
<ul>
<li>data visualization</li>
<li>data preparation</li>
<li>reporting</li>
</ul>
</li>
<li>Introduction to data analysis
<ul>
<li>Statistical modelling</li>
<li>Data interpretation and pitfalls</li>
</ul>
</li>
</ul>

</section>
<section>
<h2 id="basic-steps-in-biological-research">Basic steps in biological research</h2>
<ol>
<li>Find problems and make hypotheses.</li>
<li>Collect data from experimentation🧫, observation🔬, literature📚.</li>
<li><strong>Analyze the data and test the hypotheses</strong></li>
<li><strong>Report results</strong>. Go back to 1.</li>
</ol>
<br>
<ul>
<li>Experimentation and observation are onlly the first half.</li>
<li>The other half involves data preparation, analyses, reporting.<br>
→ but tend to be understated. We want to do it <strong>properly and easily</strong>.</li>
</ul>

</section>
<section>
<h2 id="is-data-analysis-necessary-why-not-just-raw-data">Is data analysis necessary? Why not just raw data?</h2>
<p>Raw data are often too complex and have too much information to make sense.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">ggplot2</span><span class="o">::</span><span class="n">diamonds</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>      carat       cut color clarity depth table price    x    y    z
    1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
    2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
    3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
    4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
   --                                                               
53937  0.72      Good     D     SI1  63.1    55  2757 5.69 5.75 3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757 5.66 5.68 3.56
53939  0.86   Premium     H     SI2  61.0    58  2757 6.15 6.12 3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757 5.83 5.87 3.64
</code></pre><p>A data set of diamonds (53,940 observations, 10 variables).</p>

</section>
<section>
<h2 id="take-a-look-at-summary-statistics">Take a look at summary statistics</h2>
<p><strong>average</strong>, <strong>standard deviation</strong>, etc. of each column:</p>
<pre tabindex="0"><code>  stat carat depth table    price
1 mean  0.80 61.75 57.46  3932.80
2   sd  0.47  1.43  2.23  3989.44
3  max  5.01 79.00 95.00 18823.00
4  min  0.20 43.00 43.00   326.00
</code></pre><p><code>carat</code> and <code>price</code> looks positively correlated:</p>
<pre tabindex="0"><code>      carat depth table price
carat  1.00                  
depth  0.03  1.00            
table  0.18 -0.30  1.00      
price  0.92 -0.01  0.13  1.00
</code></pre><hr>
<p>OK, summary stats may help better understanding than raw data do.</p>
<p>But be aware&hellip;&hellip;</p>

</section>
<section>
<h2 id="never-trust-summary-statics-alone">Never trust summary statics alone</h2>
<p>Interesting relationships may be overlooked without visualization.</p>
<figure style="position: relative;">
<a href="https://www.autodesk.com/research/publications/same-stats-different-graphs">
<img src="/slides/image/rstats/datasaurus.png" width="86%">
<figcaption class="url">https://www.autodesk.com/research/publications/same-stats-different-graphs</figcaption>
</a>
<img src="/slides/image/rstats/DataDino-600x455.gif" width="20%"
     style="position: absolute; left: 0; top: 0; z-index: 255;">
</figure>

</section>
<section>
<h2 id="data-visualization-is-the-first-step-of-understanding">Data visualization is the first step of understanding</h2>
<p>Reduction and reorganization of information → <strong>intuitive understanding</strong></p>
<p><img src="./figure/simplify-diamonds-1.png" alt="plot of chunk simplify-diamonds"></p>
<p>The larger <code>carat</code>, the higher <code>price</code>.<br>
The slope seems to differ by <code>clarity</code>.</p>

</section>
<section>
<h2 id="statistical-analysis">Statistical analysis</h2>
<p>is the process of summarizing data and making inferances based on it.</p>
<ul>
<li><strong>Descriptive statistics</strong>: summrizes data themselves
<ul>
<li>summary stats (e.g., average, standard deviation, etc.)</li>
<li>making figures and tables</li>
</ul>
</li>
<li><strong>Inferential statistics</strong>: considers processes behind data
<ul>
<li>mathematical models</li>
<li>probability distributions</li>
<li>parameters</li>
</ul>
</li>
</ul>
<p><strong>Modelling</strong> is necessary if you want more than &ldquo;intuitive understanding&rdquo;</p>

</section>
<section>
<h2 id="model">Model</h2>
<p>対象システムを単純化・理想化して扱いやすくしたもの</p>
<dl>
<dt>Mathematical Model 数理モデル<img src="../tokiomarine2021/image/hill-equation.png" width="210" align="right" style="margin: 0 -5px;"></dt>
<dd>数学的な方程式として記述されるもの。</dd>
<dd>e.g., Lotka-Volterra eq., <span style="color: #888;">Hill eq.</span></dd>
<dd><br>
</dd>
<dt>Computational Model 数値計算モデル<img src="/slides/image/tumopp/Chex_Lconst.gif" width="210" align="right"></dt>
<dd>数値計算の手続きとして記述されるもの。</dd>
<dd>e.g., Schelling’s Segregation Model, <span style="color: #888;"><em>tumopp</em></span></dd>
<dd><br>
</dd>
<dt>Concrete Model 具象モデル<img src="../tokiomarine2021/image/weisberg-sfbay.jpg" width="330" align="right"></dt>
<dd>具体的な事物で作られるもの。</dd>
<dd>e.g., San Francisco Bay-Delta Model</dd>
</dl>
<cite>
Weisberg 2012 "Simulation and Similarity" (科学とモデル)
</cite>

</section>
<section>
<h2 id="mathematical-models-in-data-science">Mathematical models in data science</h2>
<p>Mathematical expression of assumptions to simulate data generation<br>
 </p>
<figure>
<img src="../tokiomarine2021/math-model.drawio.svg" width="1100"><br>
<figcaption><cite>「データ分析のための数理モデル入門」江崎貴裕 2020 より改変</cite></figcaption>
</figure>

</section>
<section>
<h2 id="mathematical-models-in-data-science">Mathematical models in data science</h2>
<p>Mathematical expression of assumptions to simulate data generation<br>
e.g., the larger the more expensive: $\text{price} = A \times \text{carat} + B + \epsilon$</p>
<p><img src="./figure/lm-diamonds-1.png" alt="plot of chunk lm-diamonds"></p>
<p>ダイヤモンドの価格はこういう数式でおよそ表せる、という理解<br>
→ モデルをさらに改良していき、理解の精度を上げられるかも</p>

</section>
<section>
<h2 id="wet-experimentation-is-a-kind-of-modelling">Wet experimentation is a kind of modelling</h2>
<p>対象システムを単純化・理想化して扱いやすくしたもの<br>
→ 自然ではありえない状況にしてでも、見たい関係を見る<br>
→ 「Xを変えればYが変わる」という<strong>還元的な理解の1ステップ</strong></p>
<ul>
<li>Reduce noises
<ul>
<li>栄養や温度など、<strong>環境を揃える</strong></li>
<li>近親交配を繰り返して純系を作り、<strong>遺伝的背景を揃える</strong></li>
</ul>
</li>
<li>興味のある要因のみ変えて、表現型の違いを評価
<ul>
<li><strong>遺伝子</strong>1つ2つだけ改変</li>
<li>投与する<strong>薬剤</strong>の種類・量を変えてみる</li>
<li><strong>栄養塩</strong>の濃度と<strong>光</strong>の強さを変えてみる</li>
</ul>
</li>
</ul>
<p>ドライの理論研究者を指して「モデル屋」と呼びがちだが、<br>
広い意味では生物学者みんな「モデル屋」。</p>

</section>
<section>
<h2 id="making-an-advance-in-science--stanting-on-the-shoulders-of-giants">Making an advance in science = stanting on the shoulders of giants</h2>
<figure style="position: absolute; top: 2em; right: 1.5em;">
<a href="https://en.wikipedia.org/wiki/Standing_on_the_shoulders_of_giants">
<img src="/slides/image/free/Orion_aveugle_cherchant_le_soleil.jpg" width="320">
<figcaption class="url">
https://en.wikipedia.org/wiki/<br>Standing_on_the_shoulders_of_giants
</figcaption>
</a>
</figure>
<p>A new discovery is always based on the previous studies.</p>
<dl>
<dt>記録を残すことは何より重要</dt>
<dd>実験や野外観察では些細なことも漏らさず記録。</dd>
<dd>生データは何重にもバックアップ。</dd>
<dt>データ整理・解析・作図も不可欠、だけど&hellip;</dt>
<dd>再現不能の職人技で切り抜けちゃう人も多い。</dd>
<dd>コピペ、メニュー選択、配色と配置を微調整&hellip;</dd>
<dt>疑義が生じたら&hellip;？ 別の人がその研究を発展させたいとき&hellip;？</dt>
<dd>💩「ありまぁす！」</dd>
<dd>✅「誰でも確実に再現できるプロトコルがこちらです」</dd>
</dl>
<p><strong>Reproducible research</strong> makes the giants bigger.</p>

</section>
<section>
<h2 id="an-example-of-unreproducible-research">An example of unreproducible research</h2>
<p>動物園の混合展示で、各種動物はどのように分布・行動しているか、<br>
それらを決める要因は何か。膨大な観察データに基づく超大作卒論。</p>
<figure>
<img src="/slides/image/messy/thesis.png" width="1200">
</figure>
</section>
<section>
<h2 id="raw-data-not-so-bad-so-far">Raw data: not so bad, so far</h2>
<p>The location and behavior of every individual were recorded once per week.<br>
タブは個体、A列B列はXY座標でそれ以降の列は行動、各行はある時刻。</p>
<figure style="position: relative; margin: 20px 0;">
<img src="/slides/image/messy/dir-0826.png" class="screenshot" height="750">
<img src="/slides/image/messy/file-0826-zebra.png" class="screenshot" height="660"
     style="position: absolute; left: 270px; top: 50px;">
</figure>
</section>
<section>
<h2 id="aggregating-by-copy-and-paste-for-each-condition">Aggregating by copy-and-paste for each condition</h2>
<p>ちゃんと合ってるのかな&hellip; ファイルもタブもたくさん&hellip;</p>
<figure style="position: relative;">
<img src="/slides/image/messy/dir-z.png" class="screenshot" height="800"
     style="position: absolute; z-index: 100;">
<img src="/slides/image/messy/file-z-book1.png" class="screenshot" height="720"
     style="position: absolute; left: 250px; top: 50px;">
</figure>
</section>
<section>
<h2 id="aggregating-by-copy-and-paste-for-each-condition">Aggregating by copy-and-paste for each condition</h2>
<p>ちゃんと合ってるのかな&hellip; ファイルもタブもたくさん&hellip;</p>
<figure style="position: relative;">
<img src="/slides/image/messy/dir-z.png" class="screenshot" height="800"
     style="position: absolute; z-index: 100;">
<img src="/slides/image/messy/file-z-book1.png" class="screenshot" height="720"
     style="position: absolute; left: 250px; top: 50px;">
<img src="/slides/image/messy/file-z-z-behavior-z1e.png" class="screenshot" height="720"
     style="position: absolute; left: 30px; top: 20px; z-index: 200;">
<img src="/slides/image/messy/file-z-z-behavior-z1p.png" class="screenshot" height="720"
     style="position: absolute; left: 260px; top: 40px; z-index: 300;">
</figure>
</section>
<section>
<h2 id="manually-counting-and-painting-in-a-grayscale">Manually counting and painting in a grayscale</h2>
<p>泣きながら何十枚も&hellip;。無料期間が終わって今は使えない&hellip;。</p>
<figure style="position: relative; margin: 1em 0;">
<img src="/slides/image/messy/file-z-z2-habitat.png" class="screenshot" width="105%">
<img src="/slides/image/messy/photoshop.jpg" width="780"
     style="position: absolute; left: 200px; top: -10px;">
</figure>
<img src="/slides/image/messy/zebra_AM.jpg" width="450">
<img src="/slides/image/messy/zebra_PM.jpg" width="450">
</section>
<section>
<h2 id="it-is-like-sisyphuss-endless-task">It is like Sisyphus&rsquo;s endless task</h2>
<figure style="float: right; margin: 0.7rem 0 0;">
<a href="https://en.wikipedia.org/wiki/Sisyphus">
<img src="/slides/image/free/Punishment_sisyph.jpg" alt="Punishment sisyph.jpg" height="420">
<figcaption class="url">https://en.wikipedia.org/wiki/Sisyphus</figcaption>
</a>
</figure>
<ul>
<li><strong>膨大な単純作業</strong>がそもそもツラい</li>
<li>人間だもの、<strong>ミスは防ぎきれない</strong></li>
<li>ミスを減らすためのチェックもツラい</li>
<li>ミスを発見 → <strong>初めからやり直し</strong></li>
<li>新データ追加 → <strong>初めからやり直し</strong></li>
<li>熟練してもツラいまま</li>
<li>そのときの自分しかできない、記録に残らない<br>
→ <strong>検証のしようがない</strong></li>
<li>卒論なら努力賞でいいかもしれないけど、科学の手続きとしては問題。</li>
</ul>

</section>
<section>
<h2 id="プログラミングで大量のファイルを捌く">プログラミングで大量のファイルを捌く</h2>
<p>The dataset is larger than the previous example.
でも頑張るのは機械。</p>
<figure>
<img src="/slides/image/tek/finder.png" height="630">
<img src="/slides/image/tek/fig5.png" height="630">
<figcaption class="url">Iwasaki, Kijima, Innan (2019)</figcaption>
</figure>
</section>
<section>
<h2 id="こんな感じの図もrでラクラク描けるよ">こんな感じの図もRでラクラク描けるよ</h2>
<figure>
<img src="/slides/image/tumopp/paper/Fig1.png" height="360">
<img src="/slides/image/tumopp/param-p.png" height="360">
<img src="/slides/image/tumopp/param-k.png" height="360"><br>
<img src="/slides/image/tumopp/paper/Fig3.png" height="180">
<img src="/slides/image/tumopp/Cmoore_Lconst.gif" height="180">
<img src="/slides/image/tumopp/Cmoore_Llinear.gif" height="180">
<img src="/slides/image/tumopp/Chex_Lconst.gif" height="180">
<img src="/slides/image/tumopp/Chex_Llinear.gif" height="180">
<figcaption class="url">Iwasaki and Innan (2017)</figcaption>
</figure>
</section>
<section>
<h2 id="be-lazy-and-let-r-do-your-job">Be lazy and let R do your job</h2>
<ul>
<li>規則性のある退屈な仕事は人間よりも機械のほうが得意。</li>
<li>一度書いたプログラムは、データが変わっても<strong>使いまわせる</strong>。</li>
<li><strong>自分以外の人でも再現・検証</strong>できる</li>
<li><strong>きれいな図を簡単に</strong>描ける</li>
<li>部分的に改変しながらいろんな解析を試せる。<br>
→ <strong>仮説検証</strong> だけでなく、 <strong>仮説生成(探索的データ解析)</strong> もやりやすい</li>
<li>やれば上達する。どんどん楽になる！</li>
</ul>
<figure>
<a href="https://r4ds.hadley.nz/intro">
<img src="/slides/image/r4ds/data-science.png" width="720">
<figcaption class="url">https://r4ds.hadley.nz/intro</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="r-is-a-programming-languageenvironment">R is a programming language/environment</h2>
<p>for statistical computing and graphics</p>
<figure style="float: right;">
<a href="https://cran.r-project.org/">
<img src="/slides/image/rstats/Rlogo.svg" height="300">
<figcaption class="url">https://cran.r-project.org/</figcaption>
</a>
</figure>
<dl>
<dt>Cross-platform</dt>
<dd>Linux, Mac, Windows</dd>
<dt>Open source</dt>
<dd>Free of charge.</dd>
<dd>Improved by collective intelligence.</dd>
<dt>Community</dt>
<dd>Easy to find many websites and people to consult.</dd>
</dl>
<p>There are some alternatives.<br>
<a href="https://www.python.org/">Python</a> is comparable.
<a href="https://julialang.org/">Julia</a> is rising.</p>

</section>
<section>
<h2 id="purposes-of-this-hands-on-lectures">Purposes of this hands-on lectures</h2>
<h3 id="-del生物学研究にはデータとモデルが必須だと認識del">✅ <del>生物学研究にはデータとモデルが必須だと認識</del></h3>
<h3 id="-del再現可能な解析を楽にやりたい気持ちになるdel">✅ <del>再現可能な解析を楽にやりたい気持ちになる</del></h3>
<h3 id="-必要な方法を調べ実践する力をつける">⬜ 必要な方法を調べ、実践する力をつける</h3>
<ul>
<li>Rでできそうなことを把握する</li>
<li>困ったときの対処法・相談先を知る</li>
</ul>
<h3 id="-データ解析の基本に触れる">⬜ データ解析の基本に触れる</h3>
<br>
個々の方法は覚えなくても大丈夫！<br>
忘れては調べ、を何度も繰り返しながら染み込ませていこう。

</section>
<section>
<h2 id="1時限目後半-rの基礎">1時限目後半: Rの基礎</h2>
<p>✅ <del>Rはデータ解析に便利なプログラミング言語・環境</del></p>
<p>⬜ R環境のセットアップ</p>
<p>⬜ Rとの対話</p>
<p>⬜ 「プロジェクト」と「スクリプト」を作る</p>
<p>⬜ 基本的な型と演算</p>
<p>⬜ Rパッケージ</p>
<p>⬜ 疑問・エラーの解決方法</p>

</section>
<section>
<h2 id="keyboard-shortcuts">Keyboard shortcuts</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th><img height=22 width=22 src="https://cdn.simpleicons.org/apple"> Mac</th>
<th><img height=22 width=22 src="https://cdn.simpleicons.org/windows"> Windows</th>
</tr>
</thead>
<tbody>
<tr>
<td>Switch apps</td>
<td><kbd>command</kbd><kbd>tab</kbd></td>
<td><kbd>alt</kbd><kbd>tab</kbd></td>
</tr>
<tr>
<td>Quit apps</td>
<td><kbd>command</kbd><kbd>q</kbd></td>
<td><kbd>alt</kbd><kbd>F4</kbd></td>
</tr>
<tr>
<td>Spotlight</td>
<td><kbd>command</kbd><kbd>space</kbd></td>
<td></td>
</tr>
<tr>
<td>Cut, Copy, Paste</td>
<td><kbd>command</kbd><kbd>x</kbd>, -<kbd>c</kbd>, -<kbd>v</kbd></td>
<td><kbd>ctrl</kbd><kbd>x</kbd>, -<kbd>c</kbd>, -<kbd>v</kbd></td>
</tr>
<tr>
<td>Select all</td>
<td><kbd>command</kbd><kbd>a</kbd></td>
<td><kbd>ctrl</kbd><kbd>a</kbd></td>
</tr>
<tr>
<td>Undo</td>
<td><kbd>command</kbd><kbd>z</kbd></td>
<td><kbd>ctrl</kbd><kbd>z</kbd></td>
</tr>
<tr>
<td>Find</td>
<td><kbd>command</kbd><kbd>f</kbd></td>
<td><kbd>ctrl</kbd><kbd>f</kbd></td>
</tr>
<tr>
<td>Save</td>
<td><kbd>command</kbd><kbd>s</kbd></td>
<td><kbd>ctrl</kbd><kbd>s</kbd></td>
</tr>
</tbody>
</table>
<p>See <a href="https://support.apple.com/HT201236">https://support.apple.com/HT201236</a>
</section>
<section>
<h2 id="setup-r-environment">Setup R environment</h2>
<dl>
<dt><a href="https://cran.rstudio.com/">R</a></dt>
<dd>Core software to interpret and execute commands.</dd>
<dd>Standard packages and functions are included.</dd>
<dt><a href="https://www.rstudio.com/">RStudio Desktop</a></dt>
<dd>Integrated environment to help users interact with R.</dd>
<dd>Not necessary, but many people like it.</dd>
</dl>
<img src="/slides/image/rstudio/rstudio-300x260.png">

</section>
<section>
<h2 id="launch-rstudio-and-check-your-environment">Launch RStudio and check your environment</h2>
<p>Copy the following code, and paste it to Console on the left bottom <kbd>return</kbd>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">student_id</span> <span class="o">=</span> <span class="s">&#34;C1SB0000&#34;</span>   <span class="c1"># 自分のIDに書き換えてください</span>
</span></span><span class="line"><span class="cl"><span class="nf">source</span><span class="p">(</span><span class="s">&#34;https://example.com/sice/report.R&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>You will get a response like <code>Hello, C1SB0000.</code><br>
Let me know if any error has occurred.</p>
<p>Run <code>update.packages()</code> when you have spare time.</p>
<aside style="font-size: 50%; opacity: 50%;">
<a href="https://github.com/heavywatal/sysinfocollector">
         https://github.com/heavywatal/sysinfocollector</a>
</aside>
</section>
<section>
<h2 id="launch-rstudio-and-play-with-console">Launch RStudio and play with Console</h2>
<p><strong>Workspace (Environment)</strong> = a collection of temporary objects on memory</p>
<img src="/slides/image/rstudio/console.png" class="screenshot" width="90%">
</section>
<section>
<h2 id="configure-rstudio-to-always-start-with-a-clean-workspace">Configure RStudio to always start with a clean workspace</h2>
<p><img height=22 width=22 src="https://cdn.simpleicons.org/apple"> RStudio → Preferences   <kbd>command</kbd><kbd>,</kbd><br>
<img height=22 width=22 src="https://cdn.simpleicons.org/windows"> Tools → Global options</p>
<p>Uncheck &ldquo;Restore &hellip;&rdquo;. Set &ldquo;Save workspace &hellip;&rdquo; to <strong>Never</strong>.</p>
<figure style="margin: 0;">
<a href="https://r4ds.hadley.nz/workflow-scripts.html#fig-blank-slate">
<img src="/slides/image/rstudio/preferences-workspace.png"
  style="object-fit: cover; object-position: top; width: 32em; height: 16em;">
<figcaption class="url">https://r4ds.hadley.nz/workflow-scripts.html#fig-blank-slate</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="create-a-new-project">Create a new &ldquo;Project&rdquo;</h2>
<p>File → New Project&hellip; → New Directory → New Project →<br>
→ Directory name: <code>r-training-2023</code><br>
→ as subdirectory of: <code>~/project</code> or <code>C:/Users/yourname/project</code></p>
<p><img src="/slides/image/rstudio/create-new-project.png" class="screenshot"
width="90%" style="object-fit: cover; object-position: top; height: 16em;"></p>
<p>📁 directory = folder. <code>~/</code> = home directory.</p>

</section>
<section>
<h2 id="write-r-script-and-send-it-to-console">Write R script, and send it to Console</h2>
<p>File → New File → R script</p>
<img src="/slides/image/rstudio/newfile.png" width="100%">
</section>
<section>
<h2 id="write-r-script-and-send-it-to-console">Write R script, and send it to Console</h2>
<p>File → New File → R script</p>
<img src="/slides/image/rstudio/script-console.png" width="100%">
</section>
<section>
<h2 id="write-r-script-and-send-it-to-console">Write R script, and send it to Console</h2>
<p>Select text with <kbd>shift</kbd><kbd>←</kbd><kbd>↓</kbd><kbd>↑</kbd><kbd>→</kbd><br>
Execute them with <kbd>ctrl</kbd><kbd>return</kbd></p>
<img src="/slides/image/rstudio/101.png" width="100%">
</section>
<section>
<h2 id="save-r-script">Save R script</h2>
<ul>
<li>Steps
<ul>
<li><kbd>command</kbd><kbd>s</kbd> or File → Save</li>
<li>Name: <code>hello.R</code></li>
<li>Place: in the project (by default)</li>
</ul>
</li>
<li><strong>Save all the code you write!</strong>
<ul>
<li>You can reuse them in other projects.</li>
<li>The code you can reuse is your skill already.</li>
</ul>
</li>
</ul>
<p>🔰 Try basic arithmetic operations and save them to <code>hello.R</code>.<br>
e.g., <code>1 + 2 + 3</code>, <code>3 * 7 * 2</code>, <code>4 / 2</code>, <code>4 / 3</code>, etc.
</section>
<section>
<h2 id="structure-of-project-directory-">Structure of project directory 📁</h2>
<ul>
<li>Gathering all the relevant files makes programming easier.</li>
<li>Separating with subdirectories helps you keep files organized.</li>
</ul>
<pre tabindex="0"><code>r-training-2023/           # the root of the project
├── r-training-2023.Rproj  # double-click this to launch RStudio
├── hello.R
├── transform.R            # script for data preparation
├── visualize.R            # script for data visualization
├── data/                  # input
│   ├── iris.tsv
│   └── diamonds.xlsx
└── results/               # output
    ├── iris-petal.png
    └── iris-summary.tsv
</code></pre><p>The project root becomes the <strong>working directory</strong>.</p>

</section>
<section>
<h2 id="get-working-directory-getwd">Get working directory <code>getwd()</code></h2>
<ul>
<li>The starting point of relative paths to input/output files.</li>
<li>Double-clicking <code>*.Rproj</code> will launch RStudio with an appropriate working directory.</li>
</ul>
<img src="/slides/image/rstudio/getwd.png" style="width: 100%;">

</section>
<section>
<h2 id="attitude-toward-programming-in-r">Attitude toward programming in R</h2>
<figure>
<img src="/slides/image/free/akusyu_uchuujin.png" height="200">
</figure>
<dl>
<dt>Don&rsquo;t fear errors</dt>
<dd>Even experts cause errors very often.</dd>
<dd>An error is a message from R. Try to understand it.</dd>
<dd>Experience point of programming ≈ exp. of error handling.</dd>
<dt>Search on the web</dt>
<dd>Some R users in the world have already solved your problems.</dd>
<dd>Queries can be 日本語, Engligh, or whole error message.</dd>
</dl>

</section>
<section>
<h2 id="how-to-use-this-hands-on-lecture">How to use this hands-on lecture</h2>
<ol>
<li>Find commands in slides, and copy-n-paste them <strong>to your R script</strong>:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">head</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
</span></span></code></pre></div></li>
<li><strong>Execute it</strong> in the Console.</li>
<li><strong>Check the output</strong>.<br>
Read <code>error</code> and <code>warning</code> if any.</li>
<li>Try practice exercises (marked with 🔰)</li>
</ol>
<hr>
<p>Feel free to interupt me any time.</p>

</section>
<section>
<h2 id="create-variablesobjects">Create variables/objects</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="m">2</span>        <span class="c1"># Create x</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span>            <span class="c1"># What&#39;s in x?</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 2
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="m">5</span>        <span class="c1"># Create y</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span>            <span class="c1"># What&#39;s in y?</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 5
</code></pre><p>R accepts <code>&lt;-</code> as an assignment operator, but I recommend <code>=</code>.<br>
Texts following <code>#</code> are ignored. Useful for comments.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 7
</code></pre><p>🔰 Try subtraction, multiplication, and division with <code>x</code> and <code>y</code>.</p>

</section>
<section>
<h2 id="basic-operations">Basic operations</h2>
<p>Symbols like <code>+</code> and <code>*</code> are called <strong>operators</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="m">10</span> <span class="o">+</span> <span class="m">3</span>    <span class="c1"># addition</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">-</span> <span class="m">3</span>    <span class="c1"># subtraction</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">*</span> <span class="m">3</span>    <span class="c1"># multiplication</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">/</span> <span class="m">3</span>    <span class="c1"># division</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">%/%</span> <span class="m">3</span>  <span class="c1"># integer division</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">%%</span> <span class="m">3</span>   <span class="c1"># modulus 剰余</span>
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="o">**</span> <span class="m">3</span>   <span class="c1"># exponent 10^3</span>
</span></span></code></pre></div><p>🔰 Check the results of the commands above.</p>

</section>
<section>
<h2 id="functions">Functions</h2>
<p>Receive some variables, do some job, and return something.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>  <span class="c1"># receives 1 and 3, and returns a vector.</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 1 2 3
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>         <span class="c1"># receives a vector, and returns a sum</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 6
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">square</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">something</span><span class="p">)</span> <span class="p">{</span>  <span class="c1"># define a new function</span>
</span></span><span class="line"><span class="cl">  <span class="n">something</span> <span class="o">**</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                       <span class="c1"># use it</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 1 4 9
</code></pre><p>🔰 Create your own function.
e.g., a function named <code>twice</code> to return doubled numbers.</p>

</section>
<section>
<h2 id="create-variableobjects-part-2">Create variable/objects, part 2</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="m">42</span>       <span class="c1"># Create x</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span>            <span class="c1"># What&#39;s in x?</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 42
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="s">&#34;24601&#34;</span>  <span class="c1"># Create y</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span>            <span class="c1"># What&#39;s in y?</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;24601&#34;
</code></pre><p>R cannot calculate the sum of them:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>        <span class="c1"># Error! Why?</span>
</span></span></code></pre></div><pre tabindex="0"><code>Error in x + y: non-numeric argument to binary operator
</code></pre>
</section>
<section>
<h2 id="data-types">Data types</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;numeric&#34;
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">is.numeric</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] TRUE
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">is.character</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] FALSE
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">as.character</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;42&#34;
</code></pre><p>🔰 Apply the same functions to <code>y</code>.</p>

</section>
<section>
<h2 id="data-types">Data types</h2>
<ul>
<li>atomic vector: one-dimensional array. very basic.
<ul>
<li><code>logical</code>: (<code>TRUE</code> or <code>FALSE</code>)</li>
<li><code>numeric</code>: (integer <code>42L</code> or real number <code>3.1416</code>)</li>
<li><code>character</code>: (<code>&quot;a string&quot;</code>)</li>
<li><code>factor</code>: (hybrid of character and integer)</li>
</ul>
</li>
<li><code>array</code>: multi-dimensional array.
<ul>
<li><code>matrix</code>: two-dimensional array.</li>
</ul>
</li>
<li><code>list</code>: subspecies of vector that can be heterogenous.</li>
<li><strong><code>data.frame</code>: Rectangular table of the vectors. important</strong> <br>
There are alternatives called <strong><code>tibble</code></strong> and <strong><code>tbl_df</code></strong>.</li>
</ul>

</section>
<section>
<h2 id="vector-one-dimensional-array">vector: one-dimensional array</h2>
<p>R is good at <strong>element-wise operation</strong> on vectors.<br>
There is no scalar type; it is treated as a vector of length 1.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span>  <span class="c1"># length of 3</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span> <span class="o">+</span> <span class="n">x</span>           <span class="c1"># the same length</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1]  2  4 18
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="m">10</span>          <span class="c1"># length of 1</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>           <span class="c1"># the shorter vector is recycled</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 11 12 19
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">&lt;</span> <span class="m">5</span>           <span class="c1"># is it smaller than 5?</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1]  TRUE  TRUE FALSE
</code></pre><p>🔰 Try other operations on these <code>x</code> and <code>y</code>.</p>

</section>
<section>
<h2 id="subsettingsubscripting-vectors">Subsetting/subscripting vectors</h2>
<p>Use <code>[]</code> to extract a subset. Indices starts from 1.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="kc">letters</span>
</span></span></code></pre></div><pre tabindex="0"><code> [1] &#34;a&#34; &#34;b&#34; &#34;c&#34; &#34;d&#34; &#34;e&#34; &#34;f&#34; &#34;g&#34; &#34;h&#34; &#34;i&#34; &#34;j&#34; &#34;k&#34; &#34;l&#34; &#34;m&#34; &#34;n&#34; &#34;o&#34; &#34;p&#34; &#34;q&#34; &#34;r&#34; &#34;s&#34; &#34;t&#34; &#34;u&#34; &#34;v&#34; &#34;w&#34; &#34;x&#34; &#34;y&#34; &#34;z&#34;
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="kc">letters</span><span class="n">[3]</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;c&#34;
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="kc">letters</span><span class="nf">[seq</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span><span class="n">]</span>       <span class="c1"># 4 5 6</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;d&#34; &#34;e&#34; &#34;f&#34;
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="kc">letters</span><span class="nf">[seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">26</span><span class="p">)</span> <span class="o">&lt;</span> <span class="m">4</span><span class="n">]</span>  <span class="c1"># TRUE TRUE TRUE FALSE FALSE ...</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] &#34;a&#34; &#34;b&#34; &#34;c&#34;
</code></pre>
</section>
<section>
<h2 id="two-major-groups-of-numeric-functions">Two major groups of numeric functions</h2>
<p>element-wise:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>     <span class="c1"># square root</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 1.000000 1.414214 3.000000
</code></pre><p>aggragete (use all values to generate one output):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">z</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">z</span>
</span></span></code></pre></div><pre tabindex="0"><code>[1] 12
</code></pre><p>🔰 Try <code>log()</code>, <code>exp()</code>, <code>length()</code>, <code>max()</code>, <code>mean()</code> and classify them.</p>

</section>
<section>
<h2 id="matrix-two-dimensional-array">matrix: two-dimensional array</h2>
<p>1本のvectorを折り曲げて長方形にしたもの。<br>
中身は全て同じ型。機械学習とか画像処理とかで使う。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">v</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">8</span><span class="p">)</span>              <span class="c1"># c(1, 2, 3, 4, 5, 6, 7, 8)</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span>    <span class="c1"># 2行に畳む。列ごとに詰める</span>
</span></span><span class="line"><span class="cl"><span class="n">x</span>
</span></span></code></pre></div><pre tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">byrow</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>  <span class="c1"># 行ごとに詰める</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span>
</span></span></code></pre></div><pre tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8
</code></pre><p>🔰 Try <code>x + y</code>, <code>dim(x)</code>, <code>nrow(x)</code>, <code>ncol(x)</code>.</p>

</section>
<section>
<h2 id="how-to-remember-the-directions-of-row-and-column">How to remember the directions of row and column</h2>
<div class="column-container">
  <div class="column">
    <figure>
    <a href="https://commons.wikimedia.org/wiki/File:2012_Super_GT_Sugo_starting_grid.jpg">
    <img src="/slides/image/free/front-row.jpg" height="720">
    <figcaption class="url">https://commons.wikimedia.org/wiki/File:2012_Super_GT_Sugo_starting_grid.jpg</figcaption>
    </a>
    </figure>
  </div>
  <div class="column">
    <figure>
    <a href="https://en.wikipedia.org/wiki/Rhodes">
    <img src="/slides/image/free/apollon-columns.jpg" height="720">
    <figcaption class="url">https://en.wikipedia.org/wiki/Rhodes</figcaption>
    </a>
    </figure>
  </div>
</div>

</section>
<section>
<h2 id="dataframe-rectangular-table-important">data.frame: rectangular table (important!)</h2>
<p>A set of vertical vectors with the same length.<br>
e.g., 4 numeric and 1 factor vectors with the length of 150:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
  1          5.1         3.5          1.4         0.2    setosa
  2          4.9         3.0          1.4         0.2    setosa
  3          4.7         3.2          1.3         0.2    setosa
  4          4.6         3.1          1.5         0.2    setosa
 --                                                            
147          6.3         2.5          5.0         1.9 virginica
148          6.5         3.0          5.2         2.0 virginica
149          6.2         3.4          5.4         2.3 virginica
150          5.9         3.0          5.1         1.8 virginica
</code></pre>
</section>
<section>
<h2 id="various-ways-to-view-a-dataframe">Various ways to view a data.frame</h2>
<p>Overview:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">head</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>   <span class="c1"># First N rows. tail() for last rows.</span>
</span></span><span class="line"><span class="cl"><span class="nf">nrow</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>      <span class="c1"># Number of ROWs</span>
</span></span><span class="line"><span class="cl"><span class="nf">ncol</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>      <span class="c1"># Number of COLumns</span>
</span></span><span class="line"><span class="cl"><span class="nf">names</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>     <span class="c1"># of columns</span>
</span></span><span class="line"><span class="cl"><span class="nf">summary</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>   <span class="c1"># mean, quantiles, etc.</span>
</span></span><span class="line"><span class="cl"><span class="nf">View</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>      <span class="c1"># in RStudio/VSCode</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">str</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>       <span class="c1"># structure</span>
</span></span></code></pre></div><pre tabindex="0"><code>tibble [150 × 5] (S3: tbl_df/tbl/data.frame)
 $ Sepal.Length: num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num [1:150] 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num [1:150] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num [1:150] 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels &#34;setosa&#34;,&#34;versicolor&#34;,..: 1 1 1 1 1 1 1 1 1 1 ...
</code></pre><p>🔰 Try some other data.frames
e.g., <code>mtcars</code>, <code>quakes</code>, <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html"><code>data()</code></a></p>

</section>
<section>
<h2 id="various-ways-to-view-a-dataframe">Various ways to view a data.frame</h2>
<p>Subset:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">iris[2</span><span class="p">,</span> <span class="n">]</span>                  <span class="c1"># 2nd row</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[2</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="n">]</span>                <span class="c1"># 2nd to 5th rows</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">4</span><span class="n">]</span>                <span class="c1"># 3rd to 4th columns</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[2</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">4</span><span class="n">]</span>             <span class="c1"># 2nd to 5th rows, 3rd to 4th columns</span>
</span></span></code></pre></div><p>Extract a column <strong>as vector</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">iris[[3]]</span>                  <span class="c1"># 3rd column</span>
</span></span><span class="line"><span class="cl"><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Length</span>          <span class="c1"># a column named Petal.Length</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[[</span><span class="s">&#34;Petal.Length&#34;</span><span class="n">]]</span>     <span class="c1"># a column named Petal.Length</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[[</span><span class="s">&#34;Petal.Length&#34;</span><span class="n">]][2]</span>  <span class="c1"># 2nd element of Petal.Length</span>
</span></span></code></pre></div><p>Unrecommended. Hard to know if the result is data.frame or vector:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">iris[</span><span class="p">,</span> <span class="m">3</span><span class="n">]</span>                  <span class="c1"># data.frame with a single column?</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[</span><span class="p">,</span> <span class="s">&#34;Petal.Length&#34;</span><span class="n">]</span>     <span class="c1"># data.frame with a single column?</span>
</span></span><span class="line"><span class="cl"><span class="n">iris[2</span><span class="p">,</span> <span class="s">&#34;Petal.Length&#34;</span><span class="n">]</span>    <span class="c1"># data.frame with a single cell?</span>
</span></span></code></pre></div>
</section>
<section>
<h2 id="create-a-new-dataframe">Create a new data.frame</h2>
<p>Combine <strong>column vectors</strong> with the same length:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">,</span> <span class="s">&#34;B&#34;</span><span class="p">,</span> <span class="s">&#34;C&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">mydata</span> <span class="o">=</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">print</span><span class="p">(</span><span class="n">mydata</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>  x y
1 1 A
2 2 B
3 3 C
</code></pre><p>🔰 Create a data.frame named <code>theDF</code> as follows:</p>
<pre tabindex="0"><code> i s
24 x
25 y
26 z
</code></pre><p>Hint: you can do it with and without <code>c()</code>.</p>

</section>
<section>
<h2 id="dataframeの読み書き">data.frameの読み書き</h2>
<p>Rには <code>read.csv()</code> とか <code>write.csv()</code> とかが標準装備されてるけど、、、</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">write.csv</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="s">&#34;iris.csv&#34;</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>&#34;&#34;,&#34;Sepal.Length&#34;,&#34;Sepal.Width&#34;,&#34;Petal.Length&#34;,&#34;Petal.Width&#34;,&#34;Species&#34;
&#34;1&#34;,5.1,3.5,1.4,0.2,&#34;setosa&#34;
&#34;2&#34;,4.9,3,1.4,0.2,&#34;setosa&#34;
&#34;3&#34;,4.7,3.2,1.3,0.2,&#34;setosa&#34;
</code></pre><a href="https://readr.tidyverse.org/">
<img src="/_img/hex-stickers/readr.webp" width="180" align="right">
</a>
<p>なんか<strong>左端の列</strong>とか <strong>&ldquo;引用符&rdquo;</strong> が勝手に作られたりいろいろ不便。</p>
<p><code>readr</code> というパッケージを使えばそういう悩みから解放される。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">readr</span><span class="o">::</span><span class="nf">write_csv</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="s">&#34;iris.csv&#34;</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>Sepal.Length,Sepal.Width,Petal.Length,Petal.Width,Species
5.1,3.5,1.4,0.2,setosa
4.9,3,1.4,0.2,setosa
4.7,3.2,1.3,0.2,setosa
</code></pre>
</section>
<section>
<h2 id="r-package">R package</h2>
<p>便利な関数やデータセットなどをひとまとめにしたもの。</p>
<dl>
<dt>Standard Packages</dt>
<dd>Rの標準機能。何もしなくても使用可能</dd>
<dt>Contributed Packages</dt>
<dd>有志により開発され、
<a href="https://cran.rstudio.com/web/packages/index.html">CRAN</a>
にまとめて公開されている。</dd>
<dd>要インストール。使う前に読み込むおまじないが必要。</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;readr&#34;</span><span class="p">)</span>  <span class="c1"># 一度やればOK</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span>             <span class="c1"># 読み込みはRを起動するたびに必要</span>
</span></span><span class="line"><span class="cl"><span class="nf">update.packages</span><span class="p">()</span>          <span class="c1"># たまには更新しよう</span>
</span></span></code></pre></div><dl>
<dt>素のRも覚えきってないのにいきなりパッケージ？</dt>
<dd>大丈夫。誰も覚えきってない。</dd>
<dd>パッケージを使わないR作業 = 火もナイフも使わない料理</dd>
</dl>

</section>
<section>
<h2 id="tidyverse-データ科学のためのパッケージ群">tidyverse: データ科学のためのパッケージ群</h2>
<a href="https://www.tidyverse.org/">
<img src="/slides/image/rstats/hex-badges8.png" width="33%" align="right">
</a>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;tidyverse&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">conflicted</span><span class="p">)</span> <span class="c1"># 安全のおまじない</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>  <span class="c1"># 一挙に読み込み</span>
</span></span></code></pre></div><pre tabindex="0"><code>── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──
✔ dplyr     1.1.3     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.3     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
</code></pre><p>一貫したデザインでデータ解析の様々な工程をカバー</p>
<figure style="margin-block: 0;">
<a href="https://r4ds.hadley.nz/intro">
<img src="/slides/image/r4ds/data-science.png" width="800">
<figcaption class="url">https://r4ds.hadley.nz/intro</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="疑問やエラーの解決方法">疑問やエラーの解決方法</h2>
<ul>
<li>エラーのほとんどは凡ミス由来。よく確認しよう。
<ul>
<li>エラー文をちゃんと読む: <code>No such file or directory</code></li>
<li>変数の中身を確かめる: <code>str(iris)</code>, <code>attributes(iris)</code></li>
<li><a href="https://comicalcommet.github.io/r-training-2023/R_training_2023_7.html">よくあるエラー集 (石川由希さん@名古屋大)</a>
をチェックする</li>
</ul>
</li>
<li>エラー文やパッケージ名をコピペしてウェブ検索<br>
→ <a href="https://stackoverflow.com/questions/tagged/r">StackOverflow</a>
や個人サイトに解決策</li>
<li>Slack <img height=22 width=22 src="https://cdn.simpleicons.org/slack">
<a href="https://github.com/tokyor/r-wakalang">r-wakalang</a>
で質問を投稿する。<br>
(質問に飢えた優しいワニが多数生息 👀   👀   👀   👀)</li>
<li>状況再現できる小さな例
<a href="https://reprex.tidyverse.org/">(reprex)</a>
を添えると回答を得やすい。<br>
(これを準備してるうちに問題が切り分けられて自己解決したり)</li>
<li>パッケージの公式ドキュメントをちゃんと読む</li>
<li>R(Studio)内のヘルプを読む: <code>?sum</code>, <code>help.start()</code></li>
</ul>

</section>
<section>
<h2 id="1時限目後半-rの基礎">1時限目後半: Rの基礎</h2>
<p>✅ Rはデータ解析に便利なプログラミング言語・環境</p>
<p>✅ <strong>プロジェクト</strong>を使ってファイルを管理</p>
<p>✅ <strong>スクリプト</strong>を書いてから<strong>コンソール</strong>で実行</p>
<p>✅ 変数には型がある: 数値、文字列、<strong>データフレーム</strong>など</p>
<p>✅ 便利な<strong>パッケージ</strong>を使っていく</p>
<p>✅ 疑問・エラーの解決方法</p>
<hr>
<p>個々の方法は覚えなくても大丈夫！<br>
忘れては調べ、を何度も繰り返しながら染み込ませていこう。</p>

</section>
<section>
<h2 id="データ解析のおおまかな流れ">データ解析のおおまかな流れ</h2>
<ol>
<li>コンピュータ環境の整備</li>
<li>データの取得、読み込み</li>
<li>探索的データ解析
<ul>
<li><strong>前処理、加工</strong> (地味。意外と重い) 👈 明日以降の主題</li>
<li><strong>可視化</strong>、仮説生成 (派手！楽しい！) 👈 本日後半の主題</li>
<li><strong>統計解析</strong>、仮説検証 (みんな勉強したがる)</li>
</ul>
</li>
<li>報告、発表</li>
</ol>
<figure>
<a href="https://r4ds.hadley.nz/intro">
<img src="/slides/image/r4ds/data-science.png" width="720">
<figcaption class="url">https://r4ds.hadley.nz/intro</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="reference">Reference</h2>
<dl>
<dt>R for Data Science &mdash; Hadley Wickham et al.</dt>
<dd><a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a></dd>
<dd><a href="https://amzn.to/2tbRmVc">Book</a></dd>
<dd><a href="https://amzn.to/2yyFRKt">日本語版書籍(Rではじめるデータサイエンス)</a></dd>
</dl>
<ul>
<li><a href="https://amzn.to/3uCxTKo">データ分析のための数理モデル入門</a> 江崎貴裕 2020</li>
<li><a href="https://amzn.to/3ty80Kv">統計学を哲学する</a> 大塚淳 2020</li>
<li><a href="https://amzn.to/2Q0f6JQ">科学とモデル&mdash;シミュレーションの哲学 入門</a> Michael Weisberg 2017<br>
(原著: <a href="https://amzn.to/3bdvhuI">Simulation and Similarity</a> 2013)</li>
</ul>
<dl>
<dt>Other versions</dt>
<dd>「<a href="https://heavywatal.github.io/slides/tmd2022/">Rによるデータ前処理実習</a>」
岩嵜航 2022 東京医科歯科大</dd>
<dd>「<a href="https://comicalcommet.github.io/r-training-2023/">Rを用いたデータ解析の基礎と応用</a>」
石川由希 2023 名古屋大学</dd>
</dl>
<a href="2-visualization.html" class="readmore">
2. Data visualization and reporting
</a>

</section>
</div>
</div>
</body>
</html>
