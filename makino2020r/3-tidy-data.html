<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>Tidying and transforming data with R â€” Hands-on R Lecture for Makino Lab</title>
<link rel="stylesheet" href="/slides/reveal.js/css/reveal.css">
<link rel="stylesheet" href="/slides/css/theme-reveal.css">
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="Tidying and transforming data with R â€” Hands-on R Lecture for Makino Lab">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/slides/makino2020r/3-tidy-data.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Slide decks â€” Heavy Watal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">
<meta name="generator" content="Hugo 0.70.0" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false}
    ]
  });
});
</script>
<style>
.katex {
  font-size: 1.12em;
}

.katex-display > .katex {
  text-align: left;
  padding-left: 2rem;
}
</style>

<script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-41178626-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<link rel="stylesheet" href="style.css">
<h1 id="hands-on-introduction-to-r-2020"><a href=".">Hands-on Introduction to R 2020</a></h1>
<div class="author">
å²©åµœ èˆª (Watal M. Iwasaki)
</div>
<div class="affiliation">
æ±åŒ—å¤§å­¦ ç”Ÿå‘½ç§‘å­¦ç ”ç©¶ç§‘ é€²åŒ–ã‚²ãƒãƒŸã‚¯ã‚¹åˆ†é‡
</div>
<ol start="0">
<li><a href="0-why-r.html">Why do we use R?</a>
<li><a href="1-basic-r.html">R basics</a>
<li><a href="2-ggplot.html">Visualization with R</a>
<li class="current-deck"><a href="3-tidy-data.html">Tidying and transforming data with R</a>
<li><a href="4-statistics.html">Statistical analysis with R</a>
</ol>
<div class="footnote">
è³‡æ–™ä½œæˆå”åŠ›: çŸ³å·ç”±å¸Œ (åå¤å±‹å¤§å­¦ ç†å­¦ç ”ç©¶ç§‘ è„³å›è·¯æ§‹é€ å­¦ è¬›å¸«)<br>
2020-06-03
</div>

</section>
<section>
<h2 id="ãƒ‡ãƒ¼ã‚¿è§£æã®ãŠãŠã¾ã‹ãªæµã‚Œ">ãƒ‡ãƒ¼ã‚¿è§£æã®ãŠãŠã¾ã‹ãªæµã‚Œ</h2>
<ol>
<li>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ç’°å¢ƒã®æ•´å‚™</li>
<li>ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€èª­ã¿è¾¼ã¿</li>
<li>æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿è§£æ
<ul>
<li><strong>å‰å‡¦ç†ã€åŠ å·¥</strong> (åœ°å‘³ã€‚æ„å¤–ã¨é‡ã„ã€‚ä»Šå›ã®ä¸»é¡Œ)</li>
<li>å¯è¦–åŒ–ã€ä»®èª¬ç”Ÿæˆ (æ´¾æ‰‹ï¼æ¥½ã—ã„ï¼<a href="2-ggplot.html">å‰å›ã®ä¸»é¡Œ</a>)</li>
<li>çµ±è¨ˆè§£æã€ä»®èª¬æ¤œè¨¼ (ã¿ã‚“ãªå‹‰å¼·ã—ãŸãŒã‚‹)</li>
</ul>
</li>
<li>å ±å‘Šã€ç™ºè¡¨</li>
</ol>
<figure>
<a href="https://r4ds.had.co.nz/introduction.html">
<img src="/slides/figure/r4ds/data-science.png">
<figcaption class="url">https://r4ds.had.co.nz/introduction.html</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="å¯è¦–åŒ–ã ã„ã˜ã‚ã‹ã£ãŸ">å¯è¦–åŒ–ã ã„ã˜ã€‚ã‚ã‹ã£ãŸã€‚</h2>
<p>æƒ…å ±ã®æ•´ç† â†’ <strong>æ­£ã—ã„è§£æãƒ»æ–°ã—ã„ç™ºè¦‹ãƒ»ä»®èª¬ç”Ÿæˆ</strong></p>
<figure>
<a href="https://r4ds.had.co.nz/explore-intro.html">
<img src="/slides/figure/r4ds/data-science-explore.png">
<figcaption class="url">https://r4ds.had.co.nz/explore-intro.html</figcaption>
</a>
</figure>
<p>ã§ã‚‚<strong>ãƒ‡ãƒ¼ã‚¿åˆ†æã«è²»ã‚„ã™åŠ´åŠ›ã®8å‰²ã¯å‰å‡¦ç†</strong>ã‚‰ã—ã„ã‚ˆã€‚ã€‚ã€‚</p>

</section>
<section>
<h2 id="æ©Ÿæ¢°å‡¦ç†ã—ã‚„ã™ã„å½¢-vs-äººãŒèª­ã¿æ›¸ãã—ã‚„ã™ã„å½¢">æ©Ÿæ¢°å‡¦ç†ã—ã‚„ã™ã„å½¢ vs äººãŒèª­ã¿æ›¸ãã—ã‚„ã™ã„å½¢</h2>
<dl>
<dt>ä½œå›³ã‚„è§£æã«ä½¿ãˆã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã¯ã»ã¼æ±ºã¾ã£ã¦ã‚‹</dt>
<dd><code>ggplot(data, ...)</code>, <code>glm(..., data, ...)</code>, &hellip;</dd>
<dt>å‡ºç™ºç‚¹ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã•ã¾ã–ã¾</dt>
<dd>å®Ÿé¨“ãƒãƒ¼ãƒˆã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒ¼ãƒˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€&hellip;</dd>
</dl>
<blockquote>
<p>Happy families are all alike;<br>
every unhappy family is unhappy in its own way<br>
&mdash; Leo Tolstoy &ldquo;Anna Karenina&rdquo;</p>
</blockquote>
<blockquote>
<p>tidy datasets are all alike,<br>
but every messy dataset is messy in its own way<br>
&mdash; Hadley Wickham, creator of tidyverse</p>
</blockquote>

</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data</h2>
<ul>
<li><strong>ç¸¦1åˆ—</strong>ã¯1ã¤ã®<strong>å¤‰æ•°</strong></li>
<li><strong>æ¨ª1è¡Œ</strong>ã¯1ã¤ã®<strong>è¦³æ¸¬</strong></li>
<li><strong>1ã‚»ãƒ«</strong>ã¯1ã¤ã®<strong>å€¤</strong></li>
</ul>
<div class="cite">
<a class="url" href="https://r4ds.had.co.nz/tidy-data.html">https://r4ds.had.co.nz/tidy-data.html</a>
</div>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">print</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
   --                                                                  
53937  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
53939  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/figure/fnshr/tidy-data-ex1.png" height="550" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/figure/fnshr/messy-data-ex1.png" width="300" style="transform: translate(-14px, 0);">
    <div style="position: absolute; top: 440px;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<div class="cite" style="position: absolute; bottom: 18px; right: 24px;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</div>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/figure/fnshr/tidy-data-ex1-var.png" height="580" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/figure/fnshr/messy-data-ex1-var.png" width="420" style="transform: translate(-36px, -10px);">
    <div style="position: absolute; top: 440px;">
    <strong>ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°</strong><br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<div class="cite" style="position: absolute; bottom: 18px; right: 24px;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</div>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/figure/fnshr/tidy-data-ex1-obs.png" height="530" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/figure/fnshr/messy-data-ex1-obs.png" width="300" style="transform: translate(-24px, 0);">
    <div style="position: absolute; top: 440px;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    <strong>æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬</strong><br>
    1ã‚»ãƒ«ã¯1ã¤ã®å€¤<br>
    </div>
  </div>
</div>
<div class="cite" style="position: absolute; bottom: 18px; right: 24px;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</div>
</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿-tidy-data-nbsp-vs-nbsp-é›‘ç„¶ãƒ‡ãƒ¼ã‚¿-messy-data">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ tidy data Â  vs Â  é›‘ç„¶ãƒ‡ãƒ¼ã‚¿ messy data</h2>
<div class="column-container">
  <div class="column" style="flex-shrink: 1.1;">
    <img src="/slides/figure/fnshr/tidy-data-ex1-obs.png" height="530" style="vertical-align: top;">
  </div>
  <div class="column">
    <img src="/slides/figure/fnshr/messy-data-ex1-val.png" width="300" style="transform: translate(-14px, 4px);">
    <div style="position: absolute; top: 440px;">
    ç¸¦1åˆ—ã¯1ã¤ã®å¤‰æ•°<br>
    æ¨ª1è¡Œã¯1ã¤ã®è¦³æ¸¬<br>
    <strong>1ã‚»ãƒ«ã¯1ã¤ã®å€¤</strong><br>
    </div>
  </div>
</div>
<div class="cite" style="position: absolute; bottom: 18px; right: 24px;">
<a class="url" href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">
è¥¿åŸå²æšã€Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ã€https://id.fnshr.info/2017/01/09/tidy-data-intro/
</a>
</div>

</section>
<section>
<h2 id="æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã®ã”åˆ©ç›Šã®ä¸€ä¾‹">æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã®ã”åˆ©ç›Šã®ä¸€ä¾‹</h2>
<p>xè»¸ã€yè»¸ã€è‰²åˆ†ã‘ã€ãƒ‘ãƒãƒ«åˆ†ã‘ãªã©ã‚’åˆ—ã®åå‰ã§æŒ‡å®šã—ã¦ç°¡å˜ä½œå›³:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggplot</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">carat</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">price</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">clarity</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">cut</span><span class="p">)</span>
</code></pre></div><p><img src="figure/aes-map-1.png" alt="plot of chunk aes-map"></p>

</section>
<section>
<h2 id="today-we-learn-data-preparation">Today we learn data preparation</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">VADeaths</span>
</code></pre></div><pre><code>      Rural Male Rural Female Urban Male Urban Female
50-54       11.7          8.7       15.4          8.4
55-59       18.1         11.7       24.3         13.6
60-64       26.9         20.3       37.0         19.3
65-69       41.0         30.9       54.6         35.1
70-74       66.0         54.3       71.1         50.0
</code></pre><p>â†“ ä¸‹ã”ã—ã‚‰ãˆ: ä½œå›³ãƒ»è§£æã§ä½¿ã„ã‚„ã™ã„æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã«</p>
<pre><code>   lbound ubound region    sex death
    &lt;int&gt;  &lt;int&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1     50     54  Rural   Male  11.7
 2     50     54  Rural Female   8.7
 3     50     54  Urban   Male  15.4
 4     50     54  Urban Female   8.4
--                                  
17     70     74  Rural   Male  66.0
18     70     74  Rural Female  54.3
19     70     74  Urban   Male  71.1
20     70     74  Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹">å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹</h2>
<ul>
<li><strong>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†</strong> ğŸ‘ˆ
<ul>
<li>ä½¿ã„ãŸã„éƒ¨åˆ†ã ã‘æŠ½å‡º</li>
<li>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ç‰¹å¾´ã‚’è¦ç´„</li>
<li>å¤§ãã„é †ã«ä¸¦ã¹æ›¿ãˆ</li>
<li>ç•°ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆ</li>
<li>å¤‰å½¢: ç¸¦é•· â†” æ¨ªåºƒ</li>
</ul>
</li>
<li>ãƒ‡ãƒ¼ã‚¿å†…å®¹ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†
<ul>
<li>æ•°å€¤ã‚’å¤‰æ›ã™ã‚‹ (e.g., å¯¾æ•°ã€åº§æ¨™ç³»)</li>
<li>å¤‰æ›: é€£ç¶šå¤‰æ•° â†” ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•° â†” ãƒ€ãƒŸãƒ¼å¤‰æ•°</li>
<li>æ¬ æå€¤ <code>NA</code> ã«å¯¾å‡¦</li>
<li>æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã‚„æ—¥æ™‚ã‚’æŠœãå‡ºã™</li>
</ul>
</li>
</ul>

</section>
<section>
<h2 id="tidyverseã«ä¾¿åˆ©ãªé“å…·ãŒæƒã£ã¦ã‚‹">tidyverseã«ä¾¿åˆ©ãªé“å…·ãŒæƒã£ã¦ã‚‹</h2>
<a href="https://www.tidyverse.org/">
<img src="/slides/figure/rstats/hex-badges.png" width="260" align="right">
</a>
<p>Rã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ‰‹ã«æ‰±ã†ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;tidyverse&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="c1"># core packages are loaded</span>
</code></pre></div><ul>
<li>çµ±ä¸€çš„ãªä½¿ã„å‹æ‰‹</li>
<li>ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°ã‚’ç¹‹ã’ã¦ä½¿ã†ãƒ‡ã‚¶ã‚¤ãƒ³</li>
</ul>
<figure>
<a href="https://r4ds.had.co.nz/introduction.html">
<img src="/slides/figure/r4ds/data-science.png">
<figcaption class="url">https://r4ds.had.co.nz/introduction.html</figcaption>
</a>
</figure>
<p>data.frameå‡¦ç†ã«ä½¿ã†ã®ã¯ä¸»ã« <a href="/rstats/dplyr.html">dplyr</a> ã¨ <a href="/rstats/tidyr.html">tidyr</a></p>

</section>
<section>
<h2 id="dplyr-----dataframeã®é«˜é€Ÿå‡¦ç†æ‹…å½“">dplyr &mdash; data.frameã®é«˜é€Ÿå‡¦ç†æ‹…å½“</h2>
<a href="https://dplyr.tidyverse.org/">
<img src="/slides/figure/rstats/hex-dplyr.png" width="120" align="right">
</a>
<p>ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°ãŒãŸãã•ã‚“ã€‚ç¹‹ã’ã¦ä½¿ã† (piping)</p>
<dl>
<dt>æŠ½å‡º</dt>
<dd>åˆ—: <code>select()</code>,</dd>
<dd>è¡Œ: <code>filter()</code>, <code>distinct()</code>, <code>sample_n()</code></dd>
<dt>è¦ç´„ãƒ»é›†è¨ˆ</dt>
<dd><code>group_by()</code>, <code>summarize()</code>, <code>count()</code></dd>
<dt>ã‚½ãƒ¼ãƒˆ</dt>
<dd><code>arrange()</code></dd>
<dt>çµåˆ</dt>
<dd>è¡Œæ–¹å‘: <code>bind_rows()</code></dd>
<dd>åˆ—æ–¹å‘: <code>left_join()</code>, <code>inner_join()</code>, <code>full_join()</code></dd>
<dt>åˆ—ã®è¿½åŠ ãƒ»å¤‰æ›´</dt>
<dd><code>mutate()</code>, <code>rename()</code></dd>
</dl>

</section>
<section>
<h2 id="dplyr-ä½¿ç”¨ä¾‹">dplyr ä½¿ç”¨ä¾‹</h2>
<p>å°ã•ãªé–¢æ•°ã‚’ç¹‹ã’ã¦ä½¿ã†æµã‚Œä½œæ¥­:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>              <span class="c1"># ç”Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‡ºç™ºã—ã¦</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">%&gt;%</span>    <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span> <span class="o">%&gt;%</span>            <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">%&gt;%</span>                <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
  <span class="nf">summarize_all</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
  <span class="nf">print</span><span class="p">()</span>                          <span class="c1"># è¡¨ç¤ºã—ã¦ã¿ã‚‹</span>
</code></pre></div><pre><code>        cut    carat    price
      &lt;ord&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1      Fair 2.297692 11972.12
2      Good 2.139226 14628.99
3 Very Good 2.120232 15133.04
4   Premium 2.155707 14992.23
5     Ideal 2.147463 15589.13
</code></pre><p>ã“ã®è¦‹æ…£ã‚Œã¬è¨˜å· <code>%&gt;%</code> ã¯ä½•ï¼Ÿ</p>

</section>
<section>
<h2 id="pipe-operator-ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­-">Pipe operator (ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­) <code>%&gt;%</code></h2>
<p>ãƒ‘ã‚¤ãƒ—ã®å·¦å´ã®å¤‰æ•°ã‚’ã€å³å´ã®é–¢æ•°ã®ç¬¬ä¸€å¼•æ•°ã«ã­ã˜è¾¼ã‚€:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">diamonds</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span>     <span class="c1"># ã“ã‚Œã¨åŒã˜</span>

<span class="c1"># å‰å‡¦ç†ã®æµã‚Œä½œæ¥­ã«ä¾¿åˆ©:</span>
<span class="n">diamonds</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="kc">...</span>
<span class="c1">#   data %&gt;%  do_A()  %&gt;%  do_B()  %&gt;%  do_C()  %&gt;% ...</span>
</code></pre></div><p>[å•] ãƒ‘ã‚¤ãƒ—ã‚’ä½¿ã‚ãªã„å½¢ã«æ›¸ãæ›ãˆã‚ˆã†:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">seq_len</span><span class="p">(</span><span class="m">6</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">sum</span><span class="p">()</span>
</code></pre></div><pre><code>[1] 21
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="kc">letters</span> <span class="o">%&gt;%</span> <span class="nf">toupper</span><span class="p">()</span> <span class="o">%&gt;%</span> <span class="nf">head</span><span class="p">(</span><span class="m">3</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;A&quot; &quot;B&quot; &quot;C&quot;
</code></pre><p>[è§£ç­”ä¾‹]</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">sum</span><span class="p">(</span><span class="nf">seq_len</span><span class="p">(</span><span class="m">6</span><span class="p">))</span>
<span class="nf">head</span><span class="p">(</span><span class="nf">toupper</span><span class="p">(</span><span class="kc">letters</span><span class="p">),</span> <span class="m">3</span><span class="p">)</span>
</code></pre></div>
</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ã‚ãªã„æ–¹æ³•">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>%&gt;%</code> ã‚’ä½¿ã‚ãªã„æ–¹æ³•</h2>
<p>ğŸ˜ ä¸€æ™‚å¤‰æ•°ã‚’ä½¿ã£ã¦:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">tmp1</span> <span class="o">=</span> <span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>   <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
<span class="n">tmp2</span> <span class="o">=</span> <span class="nf">filter</span><span class="p">(</span><span class="n">tmp1</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span>               <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
<span class="n">tmp3</span> <span class="o">=</span> <span class="nf">group_by</span><span class="p">(</span><span class="n">tmp2</span><span class="p">,</span> <span class="n">cut</span><span class="p">)</span>                   <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
<span class="n">result</span> <span class="o">=</span> <span class="nf">summarize_all</span><span class="p">(</span><span class="n">tmp3</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>           <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
</code></pre></div><p>ğŸ˜ ã‚‚ã—ãã¯å…¨éƒ¨åŒã˜åå‰ã§:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
<span class="n">result</span> <span class="o">=</span> <span class="nf">filter</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span>           <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
<span class="n">result</span> <span class="o">=</span> <span class="nf">group_by</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">cut</span><span class="p">)</span>               <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
<span class="n">result</span> <span class="o">=</span> <span class="nf">summarize_all</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>         <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
</code></pre></div><p>ã©ã¡ã‚‰ã‚‚æ‚ªããªã„ã€‚
ä½•åº¦ã‚‚å¤‰æ•°åã‚’å…¥åŠ›ã™ã‚‹ã®ãŒã‚„ã‚„å†—é•·ã€‚</p>

</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ã‚ãªã„æ–¹æ³•">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>%&gt;%</code> ã‚’ä½¿ã‚ãªã„æ–¹æ³•</h2>
<p>ğŸ˜« ä¸€æ™‚å¤‰æ•°ã‚’ä½¿ã‚ãšã«:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="nf">summarize_all</span><span class="p">(</span>                <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
    <span class="nf">group_by</span><span class="p">(</span>                            <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
      <span class="nf">filter</span><span class="p">(</span>                              <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
        <span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">),</span> <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
        <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">),</span>                        <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
      <span class="n">cut</span><span class="p">),</span>                              <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
    <span class="n">mean</span><span class="p">)</span>                              <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
</code></pre></div><p>ğŸ¤ª æ”¹è¡Œã•ãˆã›ãšã«:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="nf">summarize_all</span><span class="p">(</span><span class="nf">group_by</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">),</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">),</span> <span class="n">cut</span><span class="p">),</span> <span class="n">mean</span><span class="p">)</span>
</code></pre></div><p>è«–ç†ã®æµã‚Œã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æµã‚ŒãŒåˆã‚ãšã€ç›®ãŒè¡Œã£ãŸã‚Šæ¥ãŸã‚Šã€‚<br>
ã•ã£ãã®ã»ã†ãŒãœã‚“ãœã‚“ãƒã‚·ã€‚</p>

</section>
<section>
<h2 id="ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­--ã‚’ä½¿ãŠã†">ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ <code>%&gt;%</code> ã‚’ä½¿ãŠã†</h2>
<p>ğŸ˜ æ…£ã‚Œã‚Œã°ã€è«–ç†ã®æµã‚Œã‚’è¿½ã„ã‚„ã™ã„:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">%&gt;%</span>    <span class="c1"># åˆ—ã‚’æŠ½å‡ºã—ã¦</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">)</span> <span class="o">%&gt;%</span>            <span class="c1"># è¡Œã‚’æŠ½å‡ºã—ã¦</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">%&gt;%</span>                <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
  <span class="nf">summarize_all</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># ãã‚Œãã‚Œå¹³å‡ã‚’è¨ˆç®—</span>
  <span class="nf">print</span><span class="p">()</span>                          <span class="c1"># è¡¨ç¤ºã—ã¦ã¿ã‚‹</span>
</code></pre></div><pre><code>        cut    carat    price
      &lt;ord&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1      Fair 2.297692 11972.12
2      Good 2.139226 14628.99
3 Very Good 2.120232 15133.04
4   Premium 2.155707 14992.23
5     Ideal 2.147463 15589.13
</code></pre><p>æ…£ã‚Œã‚‹ã¾ã§ã¯ã¡ã‚‡ã£ã¨å¤§å¤‰ã‹ã‚‚ã€‚
ç„¡ç†ã—ã¦ä½¿ã‚ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚</p>

</section>
<section>
<h2 id="dplyrã‚’ä½¿ã£ã¦ã¿ã‚‹æº–å‚™">dplyrã‚’ä½¿ã£ã¦ã¿ã‚‹æº–å‚™</h2>
<p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚“ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã‚‹</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># install.packages(&#34;tidyverse&#34;)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span>
<span class="nf">View</span><span class="p">(</span><span class="n">diamonds</span><span class="p">)</span>  <span class="c1"># RStudio</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
   --                                                                  
53937  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
53939  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>åˆ—ã®ç•ªå·</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut price
      &lt;dbl&gt;     &lt;ord&gt; &lt;int&gt;
    1  0.23     Ideal   326
    2  0.21   Premium   326
    3  0.23      Good   327
    4  0.29   Premium   334
   --                      
53937  0.72      Good  2757
53938  0.70 Very Good  2757
53939  0.86   Premium  2757
53940  0.75     Ideal  2757
</code></pre><p>åˆ¥è§£: <code>diamonds[, c(1, 2, 7)]</code></p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>åˆ—ã®åå‰</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">carat</span><span class="p">,</span> <span class="n">cut</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut price
      &lt;dbl&gt;     &lt;ord&gt; &lt;int&gt;
    1  0.23     Ideal   326
    2  0.21   Premium   326
    3  0.23      Good   327
    4  0.29   Premium   334
   --                      
53937  0.72      Good  2757
53938  0.70 Very Good  2757
53939  0.86   Premium  2757
53940  0.75     Ideal  2757
</code></pre><p>åˆ¥è§£: <code>diamonds[, c(&quot;carat&quot;, &quot;cut&quot;, &quot;price&quot;)]</code></p>

</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p><strong>æ¨ã¦ã‚‹åˆ—</strong>ã‚’ãƒã‚¤ãƒŠã‚¹æŒ‡å®š:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">carat</span><span class="p">,</span> <span class="o">-</span><span class="n">cut</span><span class="p">,</span> <span class="o">-</span><span class="n">price</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      color clarity depth table     x     y     z
      &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1     E     SI2  61.5    55  3.95  3.98  2.43
    2     E     SI1  59.8    61  3.89  3.84  2.31
    3     E     VS1  56.9    65  4.05  4.07  2.31
    4     I     VS2  62.4    58  4.20  4.23  2.63
   --                                            
53937     D     SI1  63.1    55  5.69  5.75  3.61
53938     D     SI1  62.8    60  5.66  5.68  3.56
53939     H     SI2  61.0    58  6.15  6.12  3.74
53940     D     SI2  62.2    55  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="åˆ—ã®æŠ½å‡º-select">åˆ—ã®æŠ½å‡º: <code>select()</code></h2>
<p>åå‰ã®<strong>éƒ¨åˆ†ä¸€è‡´</strong>ã§æŒ‡å®š:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt;
    1  0.23     Ideal     E     SI2
    2  0.21   Premium     E     SI1
    3  0.23      Good     E     VS1
    4  0.29   Premium     I     VS2
   --                              
53937  0.72      Good     D     SI1
53938  0.70 Very Good     D     SI1
53939  0.86   Premium     H     SI2
53940  0.75     Ideal     D     SI2
</code></pre><p>See <a href="https://tidyselect.r-lib.org/reference/select_helpers.html">tidyselect helpers</a> for more details.</p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>ç­‰å· <code>==</code> ã§<strong>å®Œå…¨ä¸€è‡´ã™ã‚‹è¡Œ</strong>ã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">cut</span> <span class="o">==</span> <span class="s">&#34;Ideal&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat   cut color clarity depth table price     x     y     z
      &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23 Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.23 Ideal     J     VS1  62.8    56   340  3.93  3.90  2.46
    3  0.31 Ideal     J     SI2  62.2    54   344  4.35  4.37  2.71
    4  0.30 Ideal     I     SI2  62.0    54   348  4.31  4.34  2.68
   --                                                              
21548  0.71 Ideal     E     SI1  61.9    56  2756  5.71  5.73  3.54
21549  0.71 Ideal     G     VS1  61.4    56  2756  5.76  5.73  3.53
21550  0.72 Ideal     D     SI1  60.8    57  2757  5.75  5.76  3.50
21551  0.75 Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre><p>åˆ¥è§£: <code>diamonds[diamonds[[&quot;cut&quot;]] == &quot;Ideal&quot;, ]</code></p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>ä¸ç­‰å·ã§<strong>ä¸€è‡´ã—ãªã„è¡Œ</strong>ã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">price</span> <span class="o">&gt;=</span> <span class="m">1000</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.70     Ideal     E     SI1  62.5    57  2757  5.70  5.72  3.57
    2  0.86      Fair     E     SI2  55.1    69  2757  6.45  6.33  3.52
    3  0.70     Ideal     G     VS2  61.6    56  2757  5.70  5.67  3.50
    4  0.71 Very Good     E     VS2  62.4    57  2759  5.68  5.73  3.56
   --                                                                  
39438  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
39439  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
39440  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
39441  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre><p>ä¸ç­‰å·: <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></p>

</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>è¤‡æ•°ã®å€¤ã®ã†ã¡<strong>ã©ã‚Œã‹ã«ä¸€è‡´ã™ã‚‹è¡Œ</strong>ã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">cut</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Ideal&#34;</span><span class="p">,</span> <span class="s">&#34;Good&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat   cut color clarity depth table price     x     y     z
      &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23 Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.23  Good     E     VS1  56.9    65   327  4.05  4.07  2.31
    3  0.31  Good     J     SI2  63.3    58   335  4.34  4.35  2.75
    4  0.30  Good     J     SI1  64.0    55   339  4.25  4.28  2.73
   --                                                              
26454  0.71 Ideal     G     VS1  61.4    56  2756  5.76  5.73  3.53
26455  0.72 Ideal     D     SI1  60.8    57  2757  5.75  5.76  3.50
26456  0.72  Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
26457  0.75 Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>2ã¤ã®æ¡ä»¶ã‚’<strong>ä¸¡æ–¹æº€ãŸã™è¡Œ</strong>ã®ã¿æ®‹ã™ (AND):</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="o">&amp;</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="m">14000</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>    carat       cut color clarity depth table price     x     y     z
    &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
  1  2.06   Premium     J      I1  61.2    58  5203  8.10  8.07  4.95
  2  2.14      Fair     J      I1  69.4    57  5405  7.74  7.70  5.36
  3  2.15      Fair     J      I1  65.5    57  5430  8.01  7.95  5.23
  4  2.22      Fair     J      I1  66.7    56  5607  8.04  8.02  5.36
 --                                                                  
641  2.07   Premium     H     SI1  62.7    58 13993  8.14  8.09  5.09
642  2.07      Good     I     SI1  63.6    58 13993  8.09  7.99  5.11
643  2.13 Very Good     J     SI1  62.8    58 13996  8.13  8.17  5.12
644  2.11   Premium     J     SI1  62.4    58 13996  8.27  8.17  5.13
</code></pre>
</section>
<section>
<h2 id="è¡Œã®æŠ½å‡º-filter">è¡Œã®æŠ½å‡º: <code>filter()</code></h2>
<p>2ã¤ã®æ¡ä»¶ã®<strong>ã„ãšã‚Œã‹ã‚’æº€ãŸã™è¡Œ</strong>ã®ã¿æ®‹ã™ (OR):</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2</span> <span class="o">|</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="m">14000</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
   --                                                                  
53023  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
53024  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
53025  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
53026  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="é‡è¤‡è¡Œã®é™¤å»-distinct">é‡è¤‡è¡Œã®é™¤å»: <code>distinct()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã«é–¢ã—ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¡Œã®ã¿æ®‹ã™:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">distinct</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>       cut color
     &lt;ord&gt; &lt;ord&gt;
 1   Ideal     E
 2 Premium     E
 3    Good     E
 4 Premium     I
--              
32    Fair     G
33    Fair     J
34    Fair     I
35    Fair     D
</code></pre><p><code>.keep_all = TRUE</code>
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨æŒ‡å®šã—ãªã‹ã£ãŸåˆ—ã‚‚æ®‹ã›ã‚‹ã€‚</p>

</section>
<section>
<h2 id="å€¤ã«ã‚ˆã‚‰ãšè¡Œã®æŠ½å‡º-sample_n">å€¤ã«ã‚ˆã‚‰ãšè¡Œã®æŠ½å‡º: <code>sample_n()</code></h2>
<p><strong>è¡Œæ•°ã‚’æŒ‡å®š</strong>ã—ã¦ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚µãƒ³ãƒ—ãƒ«:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">sample_n</span><span class="p">(</span><span class="m">42L</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>   carat       cut color clarity depth table price     x     y     z
   &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  1.39 Very Good     I      I1  62.6  57.0  3914  7.10  7.15  4.46
 2  0.30     Ideal     G     VS1  63.1  55.0   624  4.25  4.31  2.70
 3  0.87     Ideal     E     SI1  61.5  57.0  5112  6.12  6.15  3.77
 4  0.34 Very Good     G     SI1  60.8  59.0   507  4.46  4.56  2.74
--                                                                  
39  0.70   Premium     F     SI1  62.5  59.0  2354  5.67  5.65  3.54
40  1.03   Premium     G     SI1  58.4  58.0  5249  6.66  6.62  3.88
41  0.59     Ideal     G     VS2  62.6  54.0  1789  5.38  5.32  3.35
42  0.73     Ideal     I     VS1  62.1  55.8  2302  5.77  5.81  3.60
</code></pre><p>è¡Œæ•°ã§ã¯ãªã<strong>å‰²åˆã‚’æŒ‡å®š</strong>ã™ã‚‹ãªã‚‰ <code>sample_frac()</code></p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-summarize">è¦ç´„ãƒ»é›†è¨ˆ: <code>summarize()</code></h2>
<p>åˆ—ã®<strong>åˆè¨ˆã€å¹³å‡ã€æœ€å¤§</strong>ãªã©ã‚’æ±‚ã‚ã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">summarize</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span> <span class="nf">mean</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>  sum(carat) mean(carat) max(price)
       &lt;dbl&gt;       &lt;dbl&gt;      &lt;int&gt;
1   43040.87   0.7979397      18823
</code></pre><p>vectorã‚’å—ã‘å–ã£ã¦1ã¤ã®å€¤ã‚’è¿”ã™é›†ç´„é–¢æ•°:<br>
<code>min()</code>, <code>max()</code>, <code>mean()</code>, <code>median()</code>, <code>var()</code>, <code>sd()</code>, etc.</p>

</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-summarize">è¦ç´„ãƒ»é›†è¨ˆ: <code>summarize()</code></h2>
<p>åˆ—ã®å€¤ã‚’<strong>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«</strong>é›†è¨ˆã™ã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarize</span><span class="p">(</span><span class="n">avg_carat</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">carat</span><span class="p">),</span>
            <span class="n">max_price</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">price</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>        cut avg_carat max_price
      &lt;ord&gt;     &lt;dbl&gt;     &lt;int&gt;
1      Fair 1.0461366     18574
2      Good 0.8491847     18788
3 Very Good 0.8063814     18818
4   Premium 0.8919549     18823
5     Ideal 0.7028370     18806
</code></pre>
</section>
<section>
<h2 id="è¦ç´„é›†è¨ˆ-count">è¦ç´„ãƒ»é›†è¨ˆ: <code>count()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®çµ„ã¿åˆã‚ã›å‡ºç¾æ•°ã‚’æ•°ãˆã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>     cut color     n
   &lt;ord&gt; &lt;ord&gt; &lt;int&gt;
 1  Fair     D   163
 2  Fair     E   224
 3  Fair     F   312
 4  Fair     G   314
--                  
32 Ideal     G  4884
33 Ideal     H  3115
34 Ideal     I  2093
35 Ideal     J   896
</code></pre><p><code>diamonds %&gt;% group_by(cut, color) %&gt;% tally()</code> ã¨åŒã˜ã€‚</p>

</section>
<section>
<h2 id="è¡Œã®ã‚½ãƒ¼ãƒˆ-arrange">è¡Œã®ã‚½ãƒ¼ãƒˆ: <code>arrange()</code></h2>
<p>æŒ‡å®šã—ãŸåˆ—ã®å€¤ãŒ<strong>å°ã•ã„é †ã«ä¸Šã‹ã‚‰</strong>ä¸¦ã¹ã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nf">desc</span><span class="p">(</span><span class="n">carat</span><span class="p">))</span> <span class="o">%&gt;%</span>  <span class="c1"># è‰²ã®æ˜‡é †ã€‚è‰²ãŒåŒã˜ãªã‚‰å¤§ãã•é™é †</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  3.40      Fair     D      I1  66.8    52 15964  9.42  9.34  6.27
    2  2.75     Ideal     D      I1  60.9    57 13156  9.04  8.98  5.49
    3  2.58 Very Good     D     SI2  58.9    63 14749  9.08  9.01  5.33
    4  2.57   Premium     D     SI2  58.9    58 17924  8.99  8.94  5.28
   --                                                                  
53937  0.27 Very Good     J    VVS2  60.8    57   443  4.16  4.20  2.54
53938  0.24 Very Good     J    VVS2  62.8    57   336  3.94  3.96  2.48
53939  0.24     Ideal     J    VVS2  62.8    57   432  3.96  3.94  2.48
53940  0.23     Ideal     J     VS1  62.8    56   340  3.93  3.90  2.46
</code></pre><p>é€†ã«ã™ã‚‹ã«ã¯ <code>desc()</code> ã‚’ä½¿ã†ã€‚</p>

</section>
<section>
<h2 id="è¡Œã®çµåˆ-bind_rows">è¡Œã®çµåˆ: <code>bind_rows()</code></h2>
<p>ä¾‹ã€‚å…ˆé ­ã¨æœ«å°¾ã‚’6è¡Œãšã¤å–ã£ã¦ã²ã¨ã¤ã®è¡¨ã«çµåˆã™ã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">bind_rows</span><span class="p">(</span><span class="nf">head</span><span class="p">(</span><span class="n">diamonds</span><span class="p">),</span> <span class="nf">tail</span><span class="p">(</span><span class="n">diamonds</span><span class="p">))</span>
</code></pre></div><pre><code>   carat       cut color clarity depth table price     x     y     z
   &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
 2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
 3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07  2.31
 4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
--                                                                  
 9  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
10  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
11  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
12  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="å…±é€šã™ã‚‹åˆ—ã§çµåˆ-full_join">å…±é€šã™ã‚‹åˆ—ã§çµåˆ: <code>full_join()</code></h2>
<p>ä»–æ–¹ã«ç„¡ã„éƒ¨åˆ†ã‚’ <code>NA</code> ã§è£œå®Œã—ã¦<strong>å·¦å³ã¨ã‚‚å…¨è¡Œ</strong>ä¿æŒ:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">full_join</span><span class="p">(</span><span class="n">band_members</span><span class="p">,</span> <span class="n">band_instruments</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>   name    band  plays
  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;
1  Mick  Stones   &lt;NA&gt;
2  John Beatles guitar
3  Paul Beatles   bass
4 Keith    &lt;NA&gt; guitar
</code></pre><pre><code>band_members          band_instruments
   name    band          name  plays
  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;
1  Mick  Stones       1  John guitar
2  John Beatles       2  Paul   bass
3  Paul Beatles       3 Keith guitar
</code></pre>
</section>
<section>
<h2 id="å…±é€šã™ã‚‹åˆ—ã§çµåˆ-left_join">å…±é€šã™ã‚‹åˆ—ã§çµåˆ: <code>left_join()</code></h2>
<p>å³å´ã«ç„¡ã„éƒ¨åˆ†ã‚’ <code>NA</code> ã§è£œå®Œã—ã¦<strong>å·¦å´ã ã‘å…¨è¡Œ</strong>ä¿æŒ:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">left_join</span><span class="p">(</span><span class="n">band_members</span><span class="p">,</span> <span class="n">band_instruments</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>   name    band  plays
  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;
1  Mick  Stones   &lt;NA&gt;
2  John Beatles guitar
3  Paul Beatles   bass
</code></pre><pre><code>band_members          band_instruments
   name    band          name  plays
  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;
1  Mick  Stones       1  John guitar
2  John Beatles       2  Paul   bass
3  Paul Beatles       3 Keith guitar
</code></pre><p>ãã®é€†ã¯ <code>right_join()</code></p>

</section>
<section>
<h2 id="å…±é€šã™ã‚‹åˆ—ã§çµåˆ-inner_join">å…±é€šã™ã‚‹åˆ—ã§çµåˆ: <code>inner_join()</code></h2>
<p>å·¦å³ã¨ã‚‚ã«<strong>å…±é€šã™ã‚‹å€¤ã®ã‚ã‚‹è¡Œã ã‘</strong>ä¿æŒ:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">inner_join</span><span class="p">(</span><span class="n">band_members</span><span class="p">,</span> <span class="n">band_instruments</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>   name    band  plays
  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;
1  John Beatles guitar
2  Paul Beatles   bass
</code></pre><pre><code>band_members          band_instruments
   name    band          name  plays
  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;
1  Mick  Stones       1  John guitar
2  John Beatles       2  Paul   bass
3  Paul Beatles       3 Keith guitar
</code></pre>
</section>
<section>
<h2 id="joinã¾ã¨ã‚">joinã¾ã¨ã‚</h2>
<figure>
<a href="https://r4ds.had.co.nz/relational-data.html#mutating-joins">
<img src="/slides/figure/r4ds/join.png" height="550">
<br>
<figcaption class="url">https://r4ds.had.co.nz/relational-data.html#mutating-joins</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="joinä¾‹é¡Œ-nycflights13-ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ">joinä¾‹é¡Œ: <code>nycflights13</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ</h2>
<p>é–¢é€£ã™ã‚‹data.frameã‚’ã„ã‚ã„ã‚ãªæ–¹æ³•ã§çµåˆã—ã¦ã¿ã‚ˆã†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;nycflights13&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">nycflights13</span><span class="p">)</span>
<span class="nf">data</span><span class="p">(</span><span class="n">package</span> <span class="o">=</span> <span class="s">&#34;nycflights13&#34;</span><span class="p">)</span>
<span class="c1"># airlines, airports, flights, planes, weather</span>
</code></pre></div><figure>
<a href="https://r4ds.had.co.nz/relational-data.html#nycflights13-relational">
<img src="/slides/figure/r4ds/relational-nycflights.png" height="320">
<br>
<figcaption class="url">https://r4ds.had.co.nz/relational-data.html#nycflights13-relational</figcaption>
</a>
</figure>

</section>
<section>
<h2 id="æ–°ã—ã„åˆ—ã®è¿½åŠ -mutate">æ–°ã—ã„åˆ—ã®è¿½åŠ : <code>mutate()</code></h2>
<p>æ—¢å­˜ã®åˆ—åã‚’æŒ‡å®šã™ã‚‹ã¨ä¸Šæ›¸ã:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">ratio</span> <span class="o">=</span> <span class="n">price</span> <span class="o">/</span> <span class="n">carat</span><span class="p">,</span>
         <span class="n">price</span> <span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="m">108.36</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table     price     x     y     z    ratio
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55  35325.36  3.95  3.98  2.43 1417.391
    2  0.21   Premium     E     SI1  59.8    61  35325.36  3.89  3.84  2.31 1552.381
    3  0.23      Good     E     VS1  56.9    65  35433.72  4.05  4.07  2.31 1421.739
    4  0.29   Premium     I     VS2  62.4    58  36192.24  4.20  4.23  2.63 1151.724
   --                                                                               
53937  0.72      Good     D     SI1  63.1    55 298748.52  5.69  5.75  3.61 3829.167
53938  0.70 Very Good     D     SI1  62.8    60 298748.52  5.66  5.68  3.56 3938.571
53939  0.86   Premium     H     SI2  61.0    58 298748.52  6.15  6.12  3.74 3205.814
53940  0.75     Ideal     D     SI2  62.2    55 298748.52  5.83  5.87  3.64 3676.000
</code></pre>
</section>
<section>
<h2 id="tidyr-----dataframeã®å¤‰å½¢æ•´å½¢æ‹…å½“">tidyr &mdash; data.frameã®å¤‰å½¢ãƒ»æ•´å½¢æ‹…å½“</h2>
<a href="https://tidyr.tidyverse.org/">
<img src="/slides/figure/rstats/hex-tidyr.png" width="120" align="right">
</a>
<dl>
<dt>æ¨ªé•·ã‹ã‚‰ç¸¦é•·ã«</dt>
<dd><code>pivot_longer()</code></dd>
<dt>ç¸¦é•·ã‹ã‚‰æ¨ªé•·ã«</dt>
<dd><code>pivot_wider()</code></dd>
<dt>å…¥ã‚Œå­æ§‹é€ ã‚’ã¤ãã‚‹ã€è§£æ¶ˆã™ã‚‹</dt>
<dd><code>nest()</code>, <code>unnest()</code></dd>
<dt>1åˆ—ã‚’è¤‡æ•°ã®åˆ—ã«åˆ†é›¢</dt>
<dd><code>separate()</code></dd>
</dl>
<p><em>etc.</em>
</section>
<section>
<h2 id="tidyrpivot_longer-æ¨ªé•·ã‹ã‚‰ç¸¦é•·ã«"><code>tidyr::pivot_longer()</code> æ¨ªé•·ã‹ã‚‰ç¸¦é•·ã«</h2>
<p>è¤‡æ•°åˆ—ã«ã¾ãŸãŒã‚‹å€¤ã‚’1åˆ—ã«ã™ã‚‹ã€‚<br>
ãã®ãƒ©ãƒ™ãƒ«ã‚‚åˆã‚ã›ã¦ç§»å‹•ã€‚</p>
<figure>
<a href="https://r4ds.had.co.nz/tidy-data.html#gathering">
<img src="/slides/figure/r4ds/tidy-gather.png" width="800">
<br>
<figcaption class="url">https://r4ds.had.co.nz/tidy-data.html#gathering</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="tidyrpivot_longer-æ¨ªé•·ã‹ã‚‰ç¸¦é•·ã«"><code>tidyr::pivot_longer()</code> æ¨ªé•·ã‹ã‚‰ç¸¦é•·ã«</h2>
<p>è¤‡æ•°åˆ—ã«ã¾ãŸãŒã‚‹å€¤ã‚’1åˆ—ã«ã™ã‚‹(ã“ã“ã§ã¯<code>value</code>)ã€‚<br>
ãã®ãƒ©ãƒ™ãƒ«ã‚‚åˆã‚ã›ã¦ç§»å‹•(ã“ã“ã§ã¯<code>name</code>)ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris_long</span> <span class="o">=</span> <span class="n">iris</span> <span class="o">%&gt;%</span> <span class="nf">head</span><span class="p">(</span><span class="m">2L</span><span class="p">)</span> <span class="o">%&gt;%</span>     <span class="c1"># æœ€åˆã®2è¡Œã ã‘</span>
  <span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>        <span class="c1"># IDåˆ—ã‚’è¿½åŠ </span>
  <span class="nf">print</span><span class="p">()</span> <span class="o">%&gt;%</span>                         <span class="c1"># é€”ä¸­çµŒéã‚’è¡¨ç¤º</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="o">-</span><span class="n">id</span><span class="p">,</span> <span class="o">-</span><span class="n">Species</span><span class="p">),</span> <span class="n">names_to</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="n">values_to</span> <span class="o">=</span> <span class="s">&#34;value&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>                             <span class="c1"># id, Speciesä»¥å¤–ã®å€¤ã‚’ç§»å‹•</span>
</code></pre></div><pre><code>     id Sepal.Length Sepal.Width Petal.Length Petal.Width Species
  &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;   &lt;fct&gt;
1     1          5.1         3.5          1.4         0.2  setosa
2     2          4.9         3.0          1.4         0.2  setosa
     id Species         name value
  &lt;chr&gt;   &lt;fct&gt;        &lt;chr&gt; &lt;dbl&gt;
1     1  setosa Sepal.Length   5.1
2     1  setosa  Sepal.Width   3.5
3     1  setosa Petal.Length   1.4
4     1  setosa  Petal.Width   0.2
5     2  setosa Sepal.Length   4.9
6     2  setosa  Sepal.Width   3.0
7     2  setosa Petal.Length   1.4
8     2  setosa  Petal.Width   0.2
</code></pre>
</section>
<section>
<h2 id="tidyrpivot_wider-ç¸¦é•·ã‹ã‚‰æ¨ªé•·ã«"><code>tidyr::pivot_wider()</code> ç¸¦é•·ã‹ã‚‰æ¨ªé•·ã«</h2>
<p>1åˆ—ã«åã¾ã£ã¦ã„ãŸå€¤ã‚’è¤‡æ•°åˆ—ã®è¡Œåˆ—ã«å¤‰æ›ã€‚<br>
ãã®ãƒ©ãƒ™ãƒ«ã‚’åˆ—ã®åå‰ã«ã™ã‚‹ã€‚</p>
<figure>
<a href="https://r4ds.had.co.nz/tidy-data.html#spreading">
<img src="/slides/figure/r4ds/tidy-spread.png" height="480">
<br>
<figcaption class="url">https://r4ds.had.co.nz/tidy-data.html#spreading</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="tidyrpivot_wider-ç¸¦é•·ã‹ã‚‰æ¨ªé•·ã«"><code>tidyr::pivot_wider()</code> ç¸¦é•·ã‹ã‚‰æ¨ªé•·ã«</h2>
<p>1åˆ—ã«åã¾ã£ã¦ã„ãŸå€¤(<code>value</code>)ã‚’è¤‡æ•°åˆ—ã®è¡Œåˆ—ã«å¤‰æ›ã€‚<br>
ãã®ãƒ©ãƒ™ãƒ«(<code>name</code>)ã‚’åˆ—ã®åå‰ã«ã™ã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris_long</span> <span class="o">%&gt;%</span> <span class="nf">print</span><span class="p">()</span> <span class="o">%&gt;%</span>              <span class="c1"># ã•ã£ãlong-formatã«ã—ãŸã‚„ã¤</span>
  <span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span> <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="n">values_from</span> <span class="o">=</span> <span class="n">value</span><span class="p">)</span>   <span class="c1"># æ¨ªé•·ã«æˆ»ã™</span>
</code></pre></div><pre><code>     id Species         name value
  &lt;chr&gt;   &lt;fct&gt;        &lt;chr&gt; &lt;dbl&gt;
1     1  setosa Sepal.Length   5.1
2     1  setosa  Sepal.Width   3.5
3     1  setosa Petal.Length   1.4
4     1  setosa  Petal.Width   0.2
5     2  setosa Sepal.Length   4.9
6     2  setosa  Sepal.Width   3.0
7     2  setosa Petal.Length   1.4
8     2  setosa  Petal.Width   0.2
</code></pre><pre><code>     id Species Sepal.Length Sepal.Width Petal.Length Petal.Width
  &lt;chr&gt;   &lt;fct&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1     1  setosa          5.1         3.5          1.4         0.2
2     2  setosa          4.9         3.0          1.4         0.2
</code></pre>
</section>
<section>
<h2 id="tidyrseparate-åˆ—ã‚’åˆ†é›¢"><code>tidyr::separate()</code> åˆ—ã‚’åˆ†é›¢</h2>
<figure>
<a href="https://r4ds.had.co.nz/tidy-data.html#separate">
<img src="/slides/figure/r4ds/tidy-separate.png" width="800">
<br>
<figcaption class="url">https://r4ds.had.co.nz/tidy-data.html#separate</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="tidyrseparate-åˆ—ã‚’åˆ†é›¢"><code>tidyr::separate()</code> åˆ—ã‚’åˆ†é›¢</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris_long</span> <span class="o">%&gt;%</span> <span class="nf">print</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;part&#34;</span><span class="p">,</span> <span class="s">&#34;measure&#34;</span><span class="p">))</span> <span class="c1"># åˆ—ã‚’åˆ†é›¢</span>
</code></pre></div><pre><code>     id Species         name value
  &lt;chr&gt;   &lt;fct&gt;        &lt;chr&gt; &lt;dbl&gt;
1     1  setosa Sepal.Length   5.1
2     1  setosa  Sepal.Width   3.5
3     1  setosa Petal.Length   1.4
4     1  setosa  Petal.Width   0.2
5     2  setosa Sepal.Length   4.9
6     2  setosa  Sepal.Width   3.0
7     2  setosa Petal.Length   1.4
8     2  setosa  Petal.Width   0.2
</code></pre><pre><code>     id Species  part measure value
  &lt;chr&gt;   &lt;fct&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
1     1  setosa Sepal  Length   5.1
2     1  setosa Sepal   Width   3.5
3     1  setosa Petal  Length   1.4
4     1  setosa Petal   Width   0.2
5     2  setosa Sepal  Length   4.9
6     2  setosa Sepal   Width   3.0
7     2  setosa Petal  Length   1.4
8     2  setosa Petal   Width   0.2
</code></pre>
</section>
<section>
<h2 id="tidyrunite-åˆ—ã‚’èåˆ"><code>tidyr::unite()</code> åˆ—ã‚’èåˆ</h2>
<figure>
<a href="https://r4ds.had.co.nz/tidy-data.html#unite">
<img src="/slides/figure/r4ds/tidy-unite.png" width="800">
<br>
<figcaption class="url">https://r4ds.had.co.nz/tidy-data.html#unite</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="tidyrnest-å…¥ã‚Œå­ã«ã™ã‚‹"><code>tidyr::nest()</code> å…¥ã‚Œå­ã«ã™ã‚‹</h2>
<p>ã‚°ãƒ«ãƒ¼ãƒ—æ¯ã«data.frameã‚’åŒºåˆ‡ã£ã¦listå‹ã®åˆ—ã«å…¥ã‚Œã‚‹ã€‚</p>
<figure>
<a href="https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/">
<img src="/slides/figure/rstats/nest-pack-chop.png" height="500">
<br>
<figcaption class="url">https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/</figcaption>
</a>
</figure>
</section>
<section>
<h2 id="tidyrnest-å…¥ã‚Œå­ã«ã™ã‚‹"><code>tidyr::nest()</code> å…¥ã‚Œå­ã«ã™ã‚‹</h2>
<p>ã‚°ãƒ«ãƒ¼ãƒ—æ¯ã«data.frameã‚’åŒºåˆ‡ã£ã¦listå‹ã®åˆ—ã«å…¥ã‚Œã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris_nested</span> <span class="o">=</span> <span class="n">iris</span> <span class="o">%&gt;%</span>
  <span class="nf">as_tibble</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">nest</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="o">-</span><span class="n">Species</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>     Species              data
       &lt;fct&gt;            &lt;list&gt;
1     setosa &lt;tbl_df [50 x 4]&gt;
2 versicolor &lt;tbl_df [50 x 4]&gt;
3  virginica &lt;tbl_df [50 x 4]&gt;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris_nested</span><span class="o">$</span><span class="n">data[[1L]]</span>
</code></pre></div><pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
 1          5.1         3.5          1.4         0.2
 2          4.9         3.0          1.4         0.2
 3          4.7         3.2          1.3         0.2
 4          4.6         3.1          1.5         0.2
--                                                  
47          5.1         3.8          1.6         0.2
48          4.6         3.2          1.4         0.2
49          5.3         3.7          1.5         0.2
50          5.0         3.3          1.4         0.2
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ã‚’ç¸¦é•·ã«ã—ãŸã„">ä¾‹é¡Œ1: <code>VADeaths</code> ã‚’ç¸¦é•·ã«ã—ãŸã„</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span>                  <span class="c1"># data.frameã«å¤‰æ›</span>
                                         <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
                                         <span class="c1"># ç¸¦é•·ã«å¤‰å½¢ã—ãŸã„</span>
</code></pre></div><pre><code>      Rural Male Rural Female Urban Male Urban Female
50-54       11.7          8.7       15.4          8.4
55-59       18.1         11.7       24.3         13.6
60-64       26.9         20.3       37.0         19.3
65-69       41.0         30.9       54.6         35.1
70-74       66.0         54.3       71.1         50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ã‚’ç¸¦é•·ã«ã—ãŸã„">ä¾‹é¡Œ1: <code>VADeaths</code> ã‚’ç¸¦é•·ã«ã—ãŸã„</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span> <span class="o">%&gt;%</span>              <span class="c1"># data.frameã«å¤‰æ›</span>
  <span class="n">tibble</span><span class="o">::</span><span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span>      <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
                                         <span class="c1"># ç¸¦é•·ã«å¤‰å½¢ã—ãŸã„</span>
</code></pre></div><pre><code>    age Rural Male Rural Female Urban Male Urban Female
1 50-54       11.7          8.7       15.4          8.4
2 55-59       18.1         11.7       24.3         13.6
3 60-64       26.9         20.3       37.0         19.3
4 65-69       41.0         30.9       54.6         35.1
5 70-74       66.0         54.3       71.1         50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ã‚’ç¸¦é•·ã«ã—ãŸã„">ä¾‹é¡Œ1: <code>VADeaths</code> ã‚’ç¸¦é•·ã«ã—ãŸã„</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span> <span class="o">%&gt;%</span>              <span class="c1"># data.frameã«å¤‰æ›</span>
  <span class="n">tibble</span><span class="o">::</span><span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="o">-</span><span class="n">age</span><span class="p">)</span>                     <span class="c1"># ageä»¥å¤–ã‚’ç§»å‹•ã—ã¦ç¸¦é•·åŒ–</span>
                                         <span class="c1"># æ–°ã—ã„nameåˆ—ã‚’åˆ†å‰²</span>
</code></pre></div><pre><code>     age         name value
   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt;
 1 50-54   Rural Male  11.7
 2 50-54 Rural Female   8.7
 3 50-54   Urban Male  15.4
 4 50-54 Urban Female   8.4
--                         
17 70-74   Rural Male  66.0
18 70-74 Rural Female  54.3
19 70-74   Urban Male  71.1
20 70-74 Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ã‚’ç¸¦é•·ã«ã—ãŸã„">ä¾‹é¡Œ1: <code>VADeaths</code> ã‚’ç¸¦é•·ã«ã—ãŸã„</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span> <span class="o">%&gt;%</span>              <span class="c1"># data.frameã«å¤‰æ›</span>
  <span class="n">tibble</span><span class="o">::</span><span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="o">-</span><span class="n">age</span><span class="p">)</span> <span class="o">%&gt;%</span>                 <span class="c1"># ageä»¥å¤–ã‚’ç§»å‹•ã—ã¦ç¸¦é•·åŒ–</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;region&#34;</span><span class="p">,</span> <span class="s">&#34;sex&#34;</span><span class="p">))</span>     <span class="c1"># æ–°ã—ã„nameåˆ—ã‚’åˆ†å‰²</span>
</code></pre></div><pre><code>     age region    sex value
   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1 50-54  Rural   Male  11.7
 2 50-54  Rural Female   8.7
 3 50-54  Urban   Male  15.4
 4 50-54  Urban Female   8.4
--                          
17 70-74  Rural   Male  66.0
18 70-74  Rural Female  54.3
19 70-74  Urban   Male  71.1
20 70-74  Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ã‚’ç¸¦é•·ã«ã—ãŸã„">ä¾‹é¡Œ1: <code>VADeaths</code> ã‚’ç¸¦é•·ã«ã—ãŸã„</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">va_deaths</span> <span class="o">=</span> <span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># data.frameã«å¤‰æ›</span>
  <span class="n">tibble</span><span class="o">::</span><span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="o">-</span><span class="n">age</span><span class="p">)</span> <span class="o">%&gt;%</span>                 <span class="c1"># ageä»¥å¤–ã‚’ç§»å‹•ã—ã¦ç¸¦é•·åŒ–</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;region&#34;</span><span class="p">,</span> <span class="s">&#34;sex&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="c1"># æ–°ã—ã„nameåˆ—ã‚’åˆ†å‰²</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;lbound&#34;</span><span class="p">,</span> <span class="s">&#34;ubound&#34;</span><span class="p">),</span> <span class="s">&#34;-&#34;</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>                                <span class="c1"># ä¸‹é™ã¨ä¸Šé™ã‚’åˆ†é›¢</span>
</code></pre></div><pre><code>   lbound ubound region    sex value
    &lt;int&gt;  &lt;int&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1     50     54  Rural   Male  11.7
 2     50     54  Rural Female   8.7
 3     50     54  Urban   Male  15.4
 4     50     54  Urban Female   8.4
--                                  
17     70     74  Rural   Male  66.0
18     70     74  Rural Female  54.3
19     70     74  Urban   Male  71.1
20     70     74  Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-åˆ¥è§£">ä¾‹é¡Œ1: <code>VADeaths</code> åˆ¥è§£</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">va_deaths</span> <span class="o">=</span> <span class="nf">as.data.frame</span><span class="p">(</span><span class="n">VADeaths</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># data.frameã«å¤‰æ›</span>
  <span class="n">tibble</span><span class="o">::</span><span class="nf">rownames_to_column</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># è¡Œåã‚’åˆ—ã«</span>
  <span class="n">tidyr</span><span class="o">::</span><span class="nf">pivot_longer</span><span class="p">(</span>                   <span class="c1"># ç¸¦é•·ã«å¤‰å½¢ã—ãŸã„</span>
    <span class="o">-</span><span class="n">age</span><span class="p">,</span>                                <span class="c1"># ageä»¥å¤–ã®åˆ—ã«å…¥ã£ã¦ã‚‹å€¤ã‚’ç§»å‹•</span>
    <span class="n">names_to</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;region&#34;</span><span class="p">,</span> <span class="s">&#34;sex&#34;</span><span class="p">),</span>       <span class="c1"># å…ƒã®åˆ—åã‚’2ã¤ã«åˆ†é›¢</span>
    <span class="n">names_sep</span> <span class="o">=</span> <span class="s">&#34; &#34;</span><span class="p">,</span>                     <span class="c1"># ã‚¹ãƒšãƒ¼ã‚¹ã§åˆ‡ã‚‹</span>
    <span class="n">values_to</span> <span class="o">=</span> <span class="s">&#34;death&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>             <span class="c1"># å€¤ã®è¡Œãå…ˆã®åˆ—å</span>
  <span class="n">tidyr</span><span class="o">::</span><span class="nf">separate</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;lbound&#34;</span><span class="p">,</span> <span class="s">&#34;ubound&#34;</span><span class="p">),</span> <span class="s">&#34;-&#34;</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>                                <span class="c1"># ä¸‹é™ã¨ä¸Šé™ã‚’åˆ†é›¢</span>
</code></pre></div><pre><code>   lbound ubound region    sex death
    &lt;int&gt;  &lt;int&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1     50     54  Rural   Male  11.7
 2     50     54  Rural Female   8.7
 3     50     54  Urban   Male  15.4
 4     50     54  Urban Female   8.4
--                                  
17     70     74  Rural   Male  66.0
18     70     74  Rural Female  54.3
19     70     74  Urban   Male  71.1
20     70     74  Urban Female  50.0
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ1-vadeaths-ä½œå›³ä¾‹">ä¾‹é¡Œ1: <code>VADeaths</code> ä½œå›³ä¾‹</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">va_deaths</span> <span class="o">%&gt;%</span>
  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">lbound</span><span class="p">,</span> <span class="n">death</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="n">sex</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">region</span><span class="p">),</span> <span class="n">size</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_classic</span><span class="p">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="m">16</span><span class="p">)</span>
</code></pre></div><p><img src="figure/vadeaths_plot-1.png" alt="plot of chunk vadeaths_plot"></p>

</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe">ä¾‹é¡Œ2: <code>anscombe</code></h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">anscombe</span> <span class="o">%&gt;%</span>
  <span class="nf">rowid_to_column</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span>              <span class="c1"># IDã‚’ã¤ã‘ã¦ãŠã</span>
                                     <span class="c1"># x y ã§å§‹ã¾ã‚‹åˆ—ã®å€¤ã‚’ç§»ã—ã¦ç¸¦é•·ã«</span>
</code></pre></div><pre><code>      id    x1    x2    x3    x4    y1    y2    y3    y4
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1    10    10    10     8  8.04  9.14  7.46  6.58
 2     2     8     8     8     8  6.95  8.14  6.77  5.76
 3     3    13    13    13     8  7.58  8.74 12.74  7.71
 4     4     9     9     9     8  8.81  8.77  7.11  8.84
--                                                      
 8     8     4     4     4    19  4.26  3.10  5.39 12.50
 9     9    12    12    12     8 10.84  9.13  8.15  5.56
10    10     7     7     7     8  4.82  7.26  6.42  7.91
11    11     5     5     5     8  5.68  4.74  5.73  6.89
</code></pre><p>ggplot does not accept this format. Let&rsquo;s transformt it.</p>

</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe">ä¾‹é¡Œ2: <code>anscombe</code></h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">anscombe</span> <span class="o">%&gt;%</span>
  <span class="nf">rowid_to_column</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># IDã‚’ã¤ã‘ã¦ãŠã</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#34;^x|y&#34;</span><span class="p">))</span>      <span class="c1"># x y ã§å§‹ã¾ã‚‹åˆ—ã®å€¤ã‚’ç§»ã—ã¦ç¸¦é•·ã«</span>

                                     <span class="c1"># nameåˆ—ã‚’åˆ†å‰²</span>
</code></pre></div><pre><code>      id  name value
   &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;
 1     1    x1 10.00
 2     1    x2 10.00
 3     1    x3 10.00
 4     1    x4  8.00
--                  
85    11    y1  5.68
86    11    y2  4.74
87    11    y3  5.73
88    11    y4  6.89
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe">ä¾‹é¡Œ2: <code>anscombe</code></h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">anscombe</span> <span class="o">%&gt;%</span>
  <span class="nf">rowid_to_column</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># IDã‚’ã¤ã‘ã¦ãŠã</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#34;^x|y&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>  <span class="c1"># x y ã§å§‹ã¾ã‚‹åˆ—ã®å€¤ã‚’ç§»ã—ã¦ç¸¦é•·ã«</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;axis&#34;</span><span class="p">,</span> <span class="s">&#34;group&#34;</span><span class="p">),</span> <span class="m">1L</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
                                     <span class="c1"># nameåˆ—ã‚’åˆ†å‰²</span>
</code></pre></div><pre><code>      id  axis group value
   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;
 1     1     x     1 10.00
 2     1     x     2 10.00
 3     1     x     3 10.00
 4     1     x     4  8.00
--                        
85    11     y     1  5.68
86    11     y     2  4.74
87    11     y     3  5.73
88    11     y     4  6.89
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe">ä¾‹é¡Œ2: <code>anscombe</code></h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">tidy_anscombe</span> <span class="o">=</span> <span class="n">anscombe</span> <span class="o">%&gt;%</span>
  <span class="nf">rowid_to_column</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># IDã‚’ã¤ã‘ã¦ãŠã</span>
  <span class="nf">pivot_longer</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#34;^x|y&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>  <span class="c1"># x y ã§å§‹ã¾ã‚‹åˆ—ã®å€¤ã‚’ç§»ã—ã¦ç¸¦é•·ã«</span>
  <span class="nf">separate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;axis&#34;</span><span class="p">,</span> <span class="s">&#34;group&#34;</span><span class="p">),</span> <span class="m">1L</span><span class="p">,</span> <span class="n">convert</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
                                     <span class="c1"># nameåˆ—ã‚’åˆ†å‰²</span>
  <span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span> <span class="o">=</span> <span class="n">axis</span><span class="p">,</span> <span class="n">values_from</span> <span class="o">=</span> <span class="n">value</span><span class="p">)</span> <span class="o">%&gt;%</span>
                                     <span class="c1"># axisåˆ—å†…ã® x y ã‚’åˆ—ã«ã—ã¦æ¨ªé•·åŒ–</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">arrange</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">%&gt;%</span>          <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ä¸¦ã¹ã‚‹</span>
  <span class="nf">print</span><span class="p">()</span>                            <span class="c1"># ggplotã—ãŸã„å½¢ï¼</span>
</code></pre></div><pre><code>      id group     x     y
   &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     1    10  8.04
 2     2     1     8  6.95
 3     3     1    13  7.58
 4     4     1     9  8.81
--                        
41     8     4    19 12.50
42     9     4     8  5.56
43    10     4     8  7.91
44    11     4     8  6.89
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe-åˆ¥è§£">ä¾‹é¡Œ2: <code>anscombe</code> åˆ¥è§£</h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">tidy_anscombe</span> <span class="o">=</span> <span class="n">anscombe</span> <span class="o">%&gt;%</span>
  <span class="n">tidyr</span><span class="o">::</span><span class="nf">pivot_longer</span><span class="p">(</span>                <span class="c1"># ç¸¦é•·ã«å¤‰å½¢ã—ãŸã„</span>
    <span class="nf">everything</span><span class="p">(),</span>                     <span class="c1"># ã™ã¹ã¦ã®åˆ—ã«ã¤ã„ã¦</span>
    <span class="n">names_to</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;.value&#34;</span><span class="p">,</span> <span class="s">&#34;group&#34;</span><span class="p">),</span>  <span class="c1"># æ–°ã—ã„åˆ—å</span>
    <span class="n">names_sep</span> <span class="o">=</span> <span class="m">1L</span><span class="p">)</span> <span class="o">%&gt;%</span>               <span class="c1"># åˆ‡ã‚‹ä½ç½®</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="n">group</span> <span class="o">=</span> <span class="nf">as.integer</span><span class="p">(</span><span class="n">group</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="c1"># å‹å¤‰æ›</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">arrange</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">%&gt;%</span>           <span class="c1"># ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ä¸¦ã¹ã‚‹</span>
  <span class="nf">print</span><span class="p">()</span>                             <span class="c1"># ggplotã—ãŸã„å½¢ï¼</span>
</code></pre></div><pre><code>   group     x     y
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1    10  8.04
 2     1     8  6.95
 3     1    13  7.58
 4     1     9  8.81
--                  
41     4    19 12.50
42     4     8  5.56
43     4     8  7.91
44     4     8  6.89
</code></pre>
</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe-ä½œå›³ä¾‹">ä¾‹é¡Œ2: <code>anscombe</code> ä½œå›³ä¾‹</h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggplot</span><span class="p">(</span><span class="n">tidy_anscombe</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">stat_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">lm</span><span class="p">,</span> <span class="n">formula</span> <span class="o">=</span> <span class="n">y</span> <span class="o">~</span> <span class="n">x</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="n">fullrange</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">group</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">1L</span><span class="p">)</span>
</code></pre></div><p><img src="figure/plot_anscombe-1.png" title="plot of chunk plot_anscombe" alt="plot of chunk plot_anscombe" width="98%" /></p>

</section>
<section>
<h2 id="ä¾‹é¡Œ2-anscombe-è¦ç´„">ä¾‹é¡Œ2: <code>anscombe</code> è¦ç´„</h2>
<p>4çµ„ã®x-yã¯ã€å¹³å‡ãƒ»åˆ†æ•£ãƒ»ç›¸é–¢ä¿‚æ•°ãŒã»ã¼åŒã˜ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">tidy_anscombe</span> <span class="o">%&gt;%</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">group_by</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">%&gt;%</span>   <span class="c1"># groupåˆ—ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">summarize</span><span class="p">(</span>            <span class="c1"># x, yåˆ—ã‚’ä½¿ã£ã¦summarize</span>
    <span class="n">mean_x</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
    <span class="n">mean_y</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">y</span><span class="p">),</span>
    <span class="n">sd_x</span> <span class="o">=</span> <span class="nf">sd</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
    <span class="n">sd_y</span> <span class="o">=</span> <span class="nf">sd</span><span class="p">(</span><span class="n">y</span><span class="p">),</span>
    <span class="n">cor_xy</span> <span class="o">=</span> <span class="nf">cor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="p">)</span>
</code></pre></div><pre><code>  group mean_x   mean_y     sd_x     sd_y    cor_xy
  &lt;int&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1     1      9 7.500909 3.316625 2.031568 0.8164205
2     2      9 7.500909 3.316625 2.031657 0.8162365
3     3      9 7.500000 3.316625 2.030424 0.8162867
4     4      9 7.500909 3.316625 2.030579 0.8165214
</code></pre><!-- ###################################################################### -->

</section>
<section>
<h2 id="å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹">å‰å‡¦ç†ã¯å¤§ãã2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹</h2>
<ul>
<li>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†
<ul>
<li>ä½¿ã„ãŸã„éƒ¨åˆ†ã ã‘æŠ½å‡º &mdash; <code>select()</code>, <code>filter()</code></li>
<li>ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ç‰¹å¾´ã‚’è¦ç´„ &mdash; <code>group_by()</code>, <code>summarize()</code></li>
<li>å¤§ãã„é †ã«ä¸¦ã¹æ›¿ãˆ &mdash; <code>arrange()</code></li>
<li>ç•°ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆ &mdash; <code>*_join()</code></li>
<li>å¤‰å½¢: ç¸¦é•· â†” æ¨ªåºƒ &mdash; <code>pivot_longer()</code>, <code>pivot_wider()</code></li>
</ul>
</li>
<li><strong>ãƒ‡ãƒ¼ã‚¿å†…å®¹ã‚’å¯¾è±¡ã¨ã™ã‚‹å‡¦ç†</strong> ğŸ‘ˆ
<ul>
<li>æ•°å€¤ã‚’å¤‰æ›ã™ã‚‹ (e.g., å¯¾æ•°ã€åº§æ¨™ç³»)</li>
<li>å¤‰æ›: é€£ç¶šå¤‰æ•° â†” ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•° â†” ãƒ€ãƒŸãƒ¼å¤‰æ•°</li>
<li>æ¬ æå€¤ <code>NA</code> ã«å¯¾å‡¦</li>
<li>æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã‚„æ—¥æ™‚ã‚’æŠœãå‡ºã™</li>
</ul>
</li>
</ul>

</section>
<section>
<h2 id="å¤‰æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹-å…ˆé€±ã®ãŠã•ã‚‰ã„">å¤‰æ•°/ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ (å…ˆé€±ã®ãŠã•ã‚‰ã„)</h2>
<ul>
<li><strong><code>vector</code>: åŸºæœ¬å‹ã€‚ä¸€æ¬¡å…ƒã®é…åˆ—ã€‚</strong> (ğŸ‘ˆä»Šå›ã®ä¸»å½¹)
<ul>
<li><code>logical</code>: è«–ç†å€¤ (<code>TRUE</code> or <code>FALSE</code>)</li>
<li><code>numeric</code>: æ•°å€¤ (æ•´æ•° <code>42L</code> or å®Ÿæ•° <code>3.1416</code>)</li>
<li><code>character</code>: æ–‡å­—åˆ— (<code>&quot;historgram.png&quot;</code>)</li>
<li><code>factor</code>: å› å­ (æ–‡å­—åˆ—ã£ã½ã„ã‘ã©å¾®å¦™ã«é•ã†)</li>
</ul>
</li>
<li><code>array</code>: å¤šæ¬¡å…ƒé…åˆ—ã€‚<code>vector</code>åŒæ§˜ã€å…¨è¦ç´ ãŒåŒã˜å‹ã€‚
<ul>
<li><code>matrix</code>: è¡Œåˆ— = äºŒæ¬¡å…ƒã®é…åˆ—ã€‚</li>
</ul>
</li>
<li><code>list</code>: ç•°ãªã‚‹å‹ã§ã‚‚è©°ã‚è¾¼ã‚ã‚‹å¤ªã£è…¹ãƒ™ã‚¯ãƒˆãƒ«ã€‚</li>
<li><code>data.frame</code>: åŒã˜é•·ã•ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä¸¦ã¹ãŸé•·æ–¹å½¢ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚é‡è¦ã€‚** <br>
<code>tibble</code> ã¨ã‹ <code>tbl_df</code> ã¨å‘¼ã°ã‚Œã‚‹äºœç¨®ã‚‚ã‚ã‚‹ã‘ã©ã»ã¼åŒã˜ã€‚</li>
</ul>

</section>
<section>
<h2 id="vector-ä¸€æ¬¡å…ƒã®é…åˆ—-å…ˆé€±ã®ãŠã•ã‚‰ã„">vector: ä¸€æ¬¡å…ƒã®é…åˆ— (å…ˆé€±ã®ãŠã•ã‚‰ã„)</h2>
<p>1å€‹ã®å€¤ã§ã‚‚ãƒ™ã‚¯ãƒˆãƒ«æ‰±ã„ã€‚<br>
ãƒ™ã‚¯ãƒˆãƒ«ã®å„è¦ç´ ã«ä¸€æ°—ã«è¨ˆç®—ã‚’é©ç”¨ã§ãã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span>  <span class="c1"># é•·ã•3ã®æ•°å€¤ãƒ™ã‚¯ãƒˆãƒ«</span>
<span class="n">x</span> <span class="o">+</span> <span class="n">x</span>           <span class="c1"># åŒã˜é•·ã•åŒå£«ã®è¨ˆç®—</span>
</code></pre></div><pre><code>[1]  2  4 18
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">y</span> <span class="o">=</span> <span class="m">10</span>          <span class="c1"># é•·ã•1ã®æ•°å€¤ãƒ™ã‚¯ãƒˆãƒ«</span>
<span class="n">x</span> <span class="o">+</span> <span class="n">y</span>           <span class="c1"># é•·ã•3 + é•·ã•1 = é•·ã•3 (ãã‚Œãã‚Œè¶³ã—ç®—)</span>
</code></pre></div><pre><code>[1] 11 12 19
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>         <span class="c1"># square root</span>
</code></pre></div><pre><code>[1] 1.000000 1.414214 3.000000
</code></pre>
</section>
<section>
<h2 id="dataframeã¯åˆ—vectorã®é›†ã¾ã‚Š">data.frameã¯åˆ—vectorã®é›†ã¾ã‚Š</h2>
<p>å†…å®¹ã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ã€‚<br>
<code>diamonds[[&quot;price&quot;]]</code> ã‚’ãƒ‰ãƒ«ã‹ã‚‰å††ã«å¤‰æ›ã™ã‚‹ä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">dia</span> <span class="o">=</span> <span class="n">diamonds</span>    <span class="c1"># åˆ¥åã‚³ãƒ”ãƒ¼</span>

<span class="c1"># dollaræ¼”ç®—å­ã§æŒ‡å®š</span>
<span class="n">dia</span><span class="o">$</span><span class="n">price</span> <span class="o">=</span> <span class="m">109.58</span> <span class="o">*</span> <span class="n">dia</span><span class="o">$</span><span class="n">price</span>

<span class="c1"># åå‰ã‚’æ–‡å­—åˆ—ã§æŒ‡å®š</span>
<span class="n">dia[[</span><span class="s">&#34;price&#34;</span><span class="n">]]</span> <span class="o">=</span> <span class="m">109.58</span> <span class="o">*</span> <span class="n">dia[[</span><span class="s">&#34;price&#34;</span><span class="n">]]</span>

<span class="c1"># dplyr::mutate with pipe</span>
<span class="n">dia</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">price</span> <span class="o">=</span> <span class="m">109.58</span> <span class="o">*</span> <span class="n">price</span><span class="p">)</span>
</code></pre></div><p>1ç™ºãªã‚‰ã©ã‚Œã§ã‚‚ã„ã„ã€‚æµã‚Œä½œæ¥­ã«ã¯ <code>mutate()</code> ãŒä¾¿åˆ©ã€‚</p>

</section>
<section>
<h2 id="æ•°å€¤-numericå‹">æ•°å€¤: numericå‹</h2>
<p>æ™®é€šã¯å€ç²¾åº¦æµ®å‹•å°æ•°ç‚¹å‹ <code>double</code> ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">answer</span> <span class="o">=</span> <span class="m">42</span>
<span class="nf">typeof</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;double&quot;
</code></pre><p>æ˜ç¤ºçš„ã«å¤‰æ›ã—ãŸã‚Šæœ«å°¾ã«Lã‚’ä»˜ã‘ã‚‹ã“ã¨ã§æ•´æ•°æ‰±ã„ã‚‚ã§ãã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">typeof</span><span class="p">(</span><span class="nf">as.integer</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</code></pre></div><pre><code>[1] &quot;integer&quot;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">whoami</span> <span class="o">=</span> <span class="m">24601L</span>
<span class="nf">typeof</span><span class="p">(</span><span class="n">whoami</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;integer&quot;
</code></pre>
</section>
<section>
<h2 id="æ§˜ã€…ãªæ•°å­¦é–¢æ•°">æ§˜ã€…ãªæ•°å­¦é–¢æ•°</h2>
<p>ãƒ™ã‚¯ãƒˆãƒ«ã‚’å—ã‘å–ã‚Šã€ãã‚Œãã‚Œã®è¦ç´ ã«é©ç”¨</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 1.000000 1.414214 1.732051
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 0.0000000 0.6931472 1.0986123
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 0.0000000 0.3010300 0.4771213
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div><pre><code>[1]  2.718282  7.389056 20.085537
</code></pre><div class="url">
<a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/00Index.html">
https://stat.ethz.ch/R-manual/R-patched/library/base/html/00Index.html
</a></div>
</section>
<section>
<h2 id="æ­£è¦åŒ–-z-score-normalization">æ­£è¦åŒ– (z-score normalization)</h2>
<p>å¹³å‡=0ã€æ¨™æº–åå·®=1ã€ã«ãªã‚‹ã‚ˆã†ã«:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">depth</span> <span class="o">=</span> <span class="nf">scale</span><span class="p">(</span><span class="n">depth</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity            table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt;   &lt;matrix&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2 -0.1740899    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1 -1.3607259    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1 -3.3849872    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2  0.4541292    58   334  4.20  4.23  2.63
   --                                                                       
53937  0.72      Good     D     SI1  0.9427440    55  2757  5.69  5.75  3.61
53938  0.70 Very Good     D     SI1  0.7333376    60  2757  5.66  5.68  3.56
53939  0.86   Premium     H     SI2 -0.5231005    58  2757  6.15  6.12  3.74
53940  0.75     Ideal     D     SI2  0.3145249    55  2757  5.83  5.87  3.64
</code></pre><p><code>depth = (depth - mean(depth)) / sd(depth)</code> ã¨åŒã˜ã€‚</p>

</section>
<section>
<h2 id="æ­£è¦åŒ–-min-max-normalization">æ­£è¦åŒ– (min-max normalization)</h2>
<p>æœ€å°=0ã€æœ€å¤§=1ã€ã«ãªã‚‹ã‚ˆã†ã«:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">depth</span> <span class="o">=</span> <span class="p">(</span><span class="n">depth</span> <span class="o">-</span> <span class="nf">min</span><span class="p">(</span><span class="n">depth</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span> <span class="o">-</span> <span class="nf">min</span><span class="p">(</span><span class="n">depth</span><span class="p">)))</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity     depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2 0.5138889    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1 0.4666667    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1 0.3861111    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2 0.5388889    58   334  4.20  4.23  2.63
   --                                                                      
53937  0.72      Good     D     SI1 0.5583333    55  2757  5.69  5.75  3.61
53938  0.70 Very Good     D     SI1 0.5500000    60  2757  5.66  5.68  3.56
53939  0.86   Premium     H     SI2 0.5000000    58  2757  6.15  6.12  3.74
53940  0.75     Ideal     D     SI2 0.5333333    55  2757  5.83  5.87  3.64
</code></pre><p>å¤–ã‚Œå€¤ã®å½±éŸ¿ã‚’å¤§ããå—ã‘ã‚‹ã“ã¨ã«æ³¨æ„ã€‚</p>

</section>
<section>
<h2 id="å¤–ã‚Œå€¤ã®é™¤å»">å¤–ã‚Œå€¤ã®é™¤å»</h2>
<p>å¹³å‡å€¤ã‹ã‚‰æ¨™æº–åå·®ã®3å€ä»¥ä¸Šé›¢ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’å–ã‚Šé™¤ãä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">result</span> <span class="o">=</span> <span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">depth</span> <span class="o">-</span> <span class="nf">mean</span><span class="p">(</span><span class="n">depth</span><span class="p">))</span> <span class="o">/</span> <span class="nf">sd</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span> <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
    3  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
    4  0.31      Good     J     SI2  63.3    58   335  4.34  4.35  2.75
   --                                                                  
53252  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
53253  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
53254  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
53255  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre><p>å”¯ä¸€ã®æ–¹æ³•ã§ã¯ãªã„ã—ã€ãã‚‚ãã‚‚ã‚„ã‚‹ã¹ãã‹ã©ã†ã‹ã‚‚è¦æ¤œè¨</p>

</section>
<section>
<h2 id="æ¬ æå€¤ã®é™¤å»-tidyrdrop_na">æ¬ æå€¤ã®é™¤å» <code>tidyr::drop_na()</code></h2>
<p>(æŒ‡å®šã—ãŸåˆ—ã«) <code>NA</code> ãŒå«ã¾ã‚Œã¦ã‚‹è¡Œã‚’å‰Šé™¤ã™ã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">df</span> <span class="o">=</span> <span class="nf">tibble</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">drop_na</span><span class="p">()</span>
</code></pre></div><pre><code>      x     y
  &lt;dbl&gt; &lt;chr&gt;
1     1     a
</code></pre><p>å•: <code>starwars</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§è©¦ã—ã¦ã¿ã‚ˆã†</p>
<pre><code>             name height  mass hair_color  skin_color eye_color birth_year gender homeworld species
            &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;      &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;
 1 Luke Skywalker    172    77      blond        fair      blue       19.0   male  Tatooine   Human
 2          C-3PO    167    75       &lt;NA&gt;        gold    yellow      112.0   &lt;NA&gt;  Tatooine   Droid
 3          R2-D2     96    32       &lt;NA&gt; white, blue       red       33.0   &lt;NA&gt;     Naboo   Droid
 4    Darth Vader    202   136       none       white    yellow       41.9   male  Tatooine   Human
--                                                                                                 
84    Poe Dameron     NA    NA      brown       light     brown         NA   male      &lt;NA&gt;   Human
85            BB8     NA    NA       none        none     black         NA   none      &lt;NA&gt;   Droid
86 Captain Phasma     NA    NA    unknown     unknown   unknown         NA female      &lt;NA&gt;    &lt;NA&gt;
87  PadmÃ© Amidala    165    45      brown       light     brown       46.0 female     Naboo   Human
       films  vehicles starships
      &lt;list&gt;    &lt;list&gt;    &lt;list&gt;
 1 &lt;chr [5]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt;
 2 &lt;chr [6]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 3 &lt;chr [7]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 4 &lt;chr [4]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
--                              
84 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
85 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
86 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
87 &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [3]&gt;
</code></pre>
</section>
<section>
<h2 id="æ¬ æå€¤ã®è£œå®Œ-tidyrreplace_na">æ¬ æå€¤ã®è£œå®Œ <code>tidyr::replace_na()</code></h2>
<p>æ¬ æå€¤ <code>NA</code> ã‚’ä»»æ„ã®å€¤ã§ç½®ãæ›ãˆã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">df</span> <span class="o">=</span> <span class="nf">tibble</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">replace_na</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s">&#34;unknown&#34;</span><span class="p">))</span>
</code></pre></div><pre><code>      x       y
  &lt;dbl&gt;   &lt;chr&gt;
1     1       a
2     2 unknown
3     0       b
</code></pre><p>å•: <code>starwars</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§è©¦ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="æ¬ æå€¤ã®è£œå®Œ-dplyrcoalesce">æ¬ æå€¤ã®è£œå®Œ <code>dplyr::coalesce()</code></h2>
<p>å…ˆã«æŒ‡å®šã—ãŸåˆ—ãŒ <code>NA</code> ãªã‚‰æ¬¡ã®åˆ—ã®å€¤ã‚’æ¡ç”¨:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="nf">coalesce</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 1 2 3 4 5
</code></pre><p>å‹ãŒç•°ãªã‚‹ã¨æ€’ã‚‰ã‚Œã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">df</span> <span class="o">=</span> <span class="nf">tibble</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">z</span> <span class="o">=</span> <span class="nf">coalesce</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</code></pre></div><pre><code>Error: Argument 2 must be a double vector, not a character vector
</code></pre><p>å•: <code>starwars</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§è©¦ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="æ¬ æå€¤ã¨ã¿ãªã™-dplyrna_if">æ¬ æå€¤ã¨ã¿ãªã™ <code>dplyr::na_if()</code></h2>
<p>ç‰¹å®šã®å€¤ã‚’ <code>NA</code> ã«ç½®ãæ›ãˆã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">na_if</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">na_if</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s">&#34;a&#34;</span><span class="p">))</span>
</code></pre></div><pre><code>      x     y
  &lt;dbl&gt; &lt;chr&gt;
1    NA  &lt;NA&gt;
2     2  &lt;NA&gt;
3    NA     b
</code></pre><p>å•: <code>starwars</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§è©¦ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="æ–‡å­—åˆ—">æ–‡å­—åˆ—</h2>
<p>ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€ã€‚ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚‚ä½¿ãˆã‚‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">x</span> <span class="o">=</span> <span class="s">&#34;This is a string&#34;</span>
<span class="n">y</span> <span class="o">=</span> <span class="s">&#39;If I want to include a &#34;quote&#34; inside a string, I use single quotes&#39;</span>
</code></pre></div><p>é–‰ã˜ãã³ã‚Œã‚‹ã¨å¤‰ãªçŠ¶æ…‹ã«ãªã‚‹ã®ã§ã€è½ã¡ç€ã„ã¦ <kbd>esc</kbd> or <kbd>ctrl</kbd><kbd>c</kbd></p>
<pre><code>&gt; &quot;This is a string without a closing quote
+
+
+ HELP I'M STUCK
</code></pre><div class="url">
<a href=https://r4ds.had.co.nz/strings.html>
https://r4ds.had.co.nz/strings.html
</a></div>
</section>
<section>
<h2 id="rå‚™ãˆä»˜ã‘ã®æ–‡å­—åˆ—æ©Ÿèƒ½ã¯ä½¿ã„ã«ãã„">Rå‚™ãˆä»˜ã‘ã®æ–‡å­—åˆ—æ©Ÿèƒ½ã¯ä½¿ã„ã«ãã„</h2>
<ul>
<li>ä½•ã‚’ã‚„ã‚‹é–¢æ•°ãªã®ã‹åå‰ã‹ã‚‰åˆ†ã‹ã‚Šã«ãã„<br>
<code>grep</code>, <code>grepl</code>, <code>regexpr</code>, <code>gregexpr</code>, <code>regexec</code><br>
<code>sub</code>, <code>gsub</code>, <code>substr</code>, <code>substring</code></li>
<li>ç¬¬ä¸€å¼•æ•°ã¯å¯¾è±¡æ–‡å­—åˆ—ï¼Ÿæ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼Ÿé–¢æ•°ã”ã¨ã«é•ã†ã€‚</li>
<li><code>NA</code> ã«å¯¾ã™ã‚‹æŒ™å‹•ãŒå¾®å¦™</li>
</ul>

</section>
<section>
<h2 id="stringr-----æ–‡å­—åˆ—å‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸">stringr &mdash; æ–‡å­—åˆ—å‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</h2>
<a href="https://stringr.tidyverse.org/">
<img src="/slides/figure/rstats/hex-stringr.png" width="120" align="right">
</a>
<ul>
<li>tidyverseã®ä¸€éƒ¨</li>
<li>ä½•ã‚’ã‚„ã‚‹é–¢æ•°ãªã®ã‹åå‰ã‹ã‚‰åˆ†ã‹ã‚Šã‚„ã™ã„</li>
<li>å¯¾è±¡æ–‡å­—åˆ—ãŒä¸€è²«ã—ã¦ç¬¬ä¸€å¼•æ•°ã§ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒäºŒç•ªç›®</li>
<li>å¼•æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å„è¦ç´ ã®åå‰ã‚„ä½ç½®ã‚’ä¿æŒã™ã‚‹
<ul>
<li>é•·ã•ã‚¼ãƒ­ã®å…¥åŠ›ã‹ã‚‰ã¯é•·ã•ã‚¼ãƒ­ã®å‡ºåŠ›</li>
<li>å…¥åŠ›ã« <code>NA</code> ãŒå«ã¾ã‚Œã‚‹å ´åˆã¯å¯¾å¿œã™ã‚‹å‡ºåŠ›ã‚‚ <code>NA</code></li>
</ul>
</li>
<li><a href="http://userguide.icu-project.org/strings/regexp">ICUæ­£è¦è¡¨ç¾</a> ã®ä»•æ§˜ãŒæ˜ç¢º</li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/strings.pdf">ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ</a></li>
</ul>

</section>
<section>
<h2 id="æ–‡å­—åˆ—åŸºæœ¬æ“ä½œ">æ–‡å­—åˆ—åŸºæœ¬æ“ä½œ</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">fruit4</span> <span class="o">=</span> <span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="m">4L</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>[1] &quot;apple&quot;   &quot;apricot&quot; &quot;avocado&quot; &quot;banana&quot; 
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">str_length</span><span class="p">(</span><span class="n">fruit4</span><span class="p">)</span>            <span class="c1"># é•·ã•</span>
</code></pre></div><pre><code>[1] 5 7 7 6
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">str_sub</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>         <span class="c1"># éƒ¨åˆ†åˆ—</span>
</code></pre></div><pre><code>[1] &quot;ppl&quot; &quot;pri&quot; &quot;voc&quot; &quot;ana&quot;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">str_c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="s">&#34; &#34;</span><span class="p">,</span> <span class="n">fruit4</span><span class="p">,</span> <span class="s">&#34;!&#34;</span><span class="p">)</span>  <span class="c1"># çµåˆ</span>
</code></pre></div><pre><code>[1] &quot;1 apple!&quot;   &quot;2 apricot!&quot; &quot;3 avocado!&quot; &quot;4 banana!&quot; 
</code></pre>
</section>
<section>
<h2 id="ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°æ­£è¦è¡¨ç¾">ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã€æ­£è¦è¡¨ç¾</h2>
<p>å˜ç´”ãªä¸€è‡´ã ã‘ã˜ã‚ƒãªãã€ã„ã‚ã‚“ãªæ¡ä»¶ã§ãƒãƒƒãƒãƒ³ã‚°ã§ãã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># aã§å§‹ã¾ã‚‹</span>
<span class="nf">str_subset</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="s">&#34;^a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;apple&quot;   &quot;apricot&quot; &quot;avocado&quot;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># rã§çµ‚ã‚ã‚‹</span>
<span class="nf">str_subset</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="s">&#34;r$&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;bell pepper&quot;  &quot;chili pepper&quot; &quot;cucumber&quot;     &quot;pear&quot;        
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># è‹±æ•°å­—3-4æ–‡å­—</span>
<span class="nf">str_subset</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="s">&#34;^\\w{3,4}$&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;date&quot; &quot;fig&quot;  &quot;lime&quot; &quot;nut&quot;  &quot;pear&quot; &quot;plum&quot;
</code></pre>
</section>
<section>
<h2 id="æ­£è¦è¡¨ç¾-ã‚ˆãä½¿ã†ç‰¹æ®Šæ–‡å­—">æ­£è¦è¡¨ç¾: ã‚ˆãä½¿ã†ç‰¹æ®Šæ–‡å­—</h2>
<table>
<thead>
<tr>
<th>ãƒ¡ã‚¿æ–‡å­—</th>
<th>æ„å‘³</th>
<th>â€ƒâ€ƒâ€ƒ</th>
<th>æ¼”ç®—å­</th>
<th>æ„å‘³</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\d</code></td>
<td>æ•°å­—</td>
<td></td>
<td><code>?</code></td>
<td>0å›ã‹1å›</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>ç©ºç™½</td>
<td></td>
<td><code>*</code></td>
<td>0å›ä»¥ä¸Šç¹°ã‚Šè¿”ã—</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>è‹±æ•°å­—</td>
<td></td>
<td><code>+</code></td>
<td>1å›ä»¥ä¸Šç¹°ã‚Šè¿”ã—</td>
</tr>
<tr>
<td><code>.</code></td>
<td>ä½•ã§ã‚‚</td>
<td></td>
<td><code>{n,m}</code></td>
<td>nå›ä»¥ä¸Šmå›ä»¥ä¸‹</td>
</tr>
<tr>
<td><code>^</code></td>
<td>è¡Œé ­</td>
<td></td>
<td><code>XXX(?=YYY)</code></td>
<td>YYYã«å…ˆç«‹ã¤XXX</td>
</tr>
<tr>
<td><code>$</code></td>
<td>è¡Œæœ«</td>
<td></td>
<td><code>(?&lt;=YYY)XXX</code></td>
<td>YYYã«ç¶šãXXX</td>
</tr>
</tbody>
</table>
<p>Ræ–‡å­—åˆ—ã§ã¯ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’é‡ã­ã‚‹å¿…è¦ãŒã‚ã‚‹, e.g., <code>&quot;\\d&quot;</code>.<br>
<code>\D</code>, <code>\S</code>, <code>W</code> ã®ã‚ˆã†ã«å¤§æ–‡å­—ã«ã™ã‚‹ã¨åè»¢ã€‚</p>
<div class="url"><a href="http://userguide.icu-project.org/strings/regexp">
http://userguide.icu-project.org/strings/regexp
</a></div>
<p>å•: <code>str_subset(fruit, &quot;PATTERN&quot;)</code> ã‚’ã„ã‚ã„ã‚è©¦ã—ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="æ¤œå‡º-str_detect">æ¤œå‡º <code>str_detect()</code></h2>
<p>ãƒãƒƒãƒã™ã‚‹ã‹ã©ã†ã‹ <code>TRUE</code>/<code>FALSE</code> ã‚’è¿”ã™ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">fruit4</span> <span class="o">=</span> <span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="m">4L</span><span class="p">)</span>
<span class="nf">str_detect</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="s">&#34;^a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1]  TRUE  TRUE  TRUE FALSE
</code></pre><p>å•: <code>starwars</code> ã® <code>name</code> åˆ—ã§ <code>filter()</code> ã—ã¦ã¿ã‚ˆã†</p>
<pre><code>             name height  mass hair_color  skin_color eye_color birth_year gender homeworld species
            &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;      &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;
 1 Luke Skywalker    172    77      blond        fair      blue       19.0   male  Tatooine   Human
 2          C-3PO    167    75       &lt;NA&gt;        gold    yellow      112.0   &lt;NA&gt;  Tatooine   Droid
 3          R2-D2     96    32       &lt;NA&gt; white, blue       red       33.0   &lt;NA&gt;     Naboo   Droid
 4    Darth Vader    202   136       none       white    yellow       41.9   male  Tatooine   Human
--                                                                                                 
84    Poe Dameron     NA    NA      brown       light     brown         NA   male      &lt;NA&gt;   Human
85            BB8     NA    NA       none        none     black         NA   none      &lt;NA&gt;   Droid
86 Captain Phasma     NA    NA    unknown     unknown   unknown         NA female      &lt;NA&gt;    &lt;NA&gt;
87  PadmÃ© Amidala    165    45      brown       light     brown       46.0 female     Naboo   Human
       films  vehicles starships
      &lt;list&gt;    &lt;list&gt;    &lt;list&gt;
 1 &lt;chr [5]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt;
 2 &lt;chr [6]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 3 &lt;chr [7]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 4 &lt;chr [4]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
--                              
84 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
85 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
86 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
87 &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [3]&gt;
</code></pre>
</section>
<section>
<h2 id="æŠ½å‡º-str_extract">æŠ½å‡º <code>str_extract()</code></h2>
<p>ãƒãƒƒãƒã—ãŸéƒ¨åˆ†æ–‡å­—åˆ—ã‚’å–ã‚Šå‡ºã™ã€‚ã—ãªã‹ã£ãŸè¦ç´ ã«ã¯ <code>NA</code>ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">fruit4</span> <span class="o">=</span> <span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="m">4L</span><span class="p">)</span>
<span class="nf">str_extract</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="s">&#34;^a..&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;app&quot; &quot;apr&quot; &quot;avo&quot; NA   
</code></pre><p>å•: <code>diamonds</code> ã® <code>clarity</code> åˆ—ã‹ã‚‰æ•°å­—ã‚’å–ã‚Šé™¤ã„ã¦ã¿ã‚ˆã†</p>
<pre><code>      carat       cut color clarity depth table price     x     y     z
      &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
    1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98  2.43
    2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84  2.31
    3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07  2.31
    4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23  2.63
   --                                                                  
53937  0.72      Good     D     SI1  63.1    55  2757  5.69  5.75  3.61
53938  0.70 Very Good     D     SI1  62.8    60  2757  5.66  5.68  3.56
53939  0.86   Premium     H     SI2  61.0    58  2757  6.15  6.12  3.74
53940  0.75     Ideal     D     SI2  62.2    55  2757  5.83  5.87  3.64
</code></pre>
</section>
<section>
<h2 id="ç½®æ›-str_replace">ç½®æ› <code>str_replace()</code></h2>
<p>ã‚«ãƒƒã‚³ <code>()</code> ã§å›²ã‚“ã ãƒãƒƒãƒãƒ³ã‚°ã¯å¾Œã§å‚ç…§ã§ãã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">fruit4</span> <span class="o">=</span> <span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="m">4L</span><span class="p">)</span>
<span class="nf">str_replace</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="s">&#34;..$&#34;</span><span class="p">,</span> <span class="s">&#34;!!&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;app!!&quot;   &quot;apric!!&quot; &quot;avoca!!&quot; &quot;bana!!&quot; 
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">str_replace</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="s">&#34;(..)$&#34;</span><span class="p">,</span> <span class="s">&#34;!!\\1&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;app!!le&quot;   &quot;apric!!ot&quot; &quot;avoca!!do&quot; &quot;bana!!na&quot; 
</code></pre><p>å•: <code>starwars</code> ã® <code>name</code> åˆ—ã®æ•°å­—ã‚’å…¨éƒ¨ã‚¼ãƒ­ã«ã—ã¦ã¿ã‚ˆã†</p>
<pre><code>             name height  mass hair_color  skin_color eye_color birth_year gender homeworld species
            &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;      &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;
 1 Luke Skywalker    172    77      blond        fair      blue       19.0   male  Tatooine   Human
 2          C-3PO    167    75       &lt;NA&gt;        gold    yellow      112.0   &lt;NA&gt;  Tatooine   Droid
 3          R2-D2     96    32       &lt;NA&gt; white, blue       red       33.0   &lt;NA&gt;     Naboo   Droid
 4    Darth Vader    202   136       none       white    yellow       41.9   male  Tatooine   Human
--                                                                                                 
84    Poe Dameron     NA    NA      brown       light     brown         NA   male      &lt;NA&gt;   Human
85            BB8     NA    NA       none        none     black         NA   none      &lt;NA&gt;   Droid
86 Captain Phasma     NA    NA    unknown     unknown   unknown         NA female      &lt;NA&gt;    &lt;NA&gt;
87  PadmÃ© Amidala    165    45      brown       light     brown       46.0 female     Naboo   Human
       films  vehicles starships
      &lt;list&gt;    &lt;list&gt;    &lt;list&gt;
 1 &lt;chr [5]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt;
 2 &lt;chr [6]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 3 &lt;chr [7]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
 4 &lt;chr [4]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
--                              
84 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
85 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
86 &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
87 &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [3]&gt;
</code></pre>
</section>
<section>
<h2 id="å½¢å¼ã‚’å¤‰ãˆã‚‹æ•´ãˆã‚‹">å½¢å¼ã‚’å¤‰ãˆã‚‹ãƒ»æ•´ãˆã‚‹</h2>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">fruit4</span> <span class="o">=</span> <span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span> <span class="m">4L</span><span class="p">)</span>
<span class="nf">str_to_upper</span><span class="p">(</span><span class="n">fruit4</span><span class="p">)</span>              <span class="c1"># å¤§æ–‡å­—ã«</span>
</code></pre></div><pre><code>[1] &quot;APPLE&quot;   &quot;APRICOT&quot; &quot;AVOCADO&quot; &quot;BANANA&quot; 
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">str_pad</span><span class="p">(</span><span class="n">fruit4</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="s">&#34;left&#34;</span><span class="p">,</span> <span class="s">&#34;_&#34;</span><span class="p">)</span>   <span class="c1"># å¹…ã‚’åŸ‹ã‚ã‚‹</span>
</code></pre></div><pre><code>[1] &quot;___apple&quot; &quot;_apricot&quot; &quot;_avocado&quot; &quot;__banana&quot;
</code></pre><p><a href="http://www.gagolewski.com/software/stringi/"><code>stringi</code></a> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã•ã‚‰ã«å¤šæ©Ÿèƒ½</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">stringi</span><span class="o">::</span><span class="nf">stri_trans_nfkc</span><span class="p">(</span><span class="s">&#34;ï½¶ï¾€ï½¶ï¾…&#34;</span><span class="p">)</span>  <span class="c1"># åŠè§’ã‚«ãƒŠã‚’å…¨è§’ã«</span>
</code></pre></div><pre><code>[1] &quot;ã‚«ã‚¿ã‚«ãƒŠ&quot;
</code></pre>
</section>
<section>
<h2 id="æ–‡å­—åˆ—ã‹ã‚‰åˆ¥ã®å‹ã«">æ–‡å­—åˆ—ã‹ã‚‰åˆ¥ã®å‹ã«</h2>
<a href="https://readr.tidyverse.org/">
<img src="/slides/figure/rstats/hex-readr.png" width="120" align="right">
</a>
<p>ã“ã‚Œã¯stringrã§ã¯ãªãreadrã®æ‹…å½“:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">parse_number</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;p = 0.02 *&#34;</span><span class="p">,</span> <span class="s">&#34;N_A = 6e23&#34;</span><span class="p">))</span>
</code></pre></div><pre><code>[1] 2e-02 6e+23
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">parse_double</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;0.02&#34;</span><span class="p">,</span> <span class="s">&#34;6e23&#34;</span><span class="p">))</span>   <span class="c1"># ç•°ç‰©ã«ã¯è­¦å‘Š</span>
</code></pre></div><pre><code>[1] 2e-02 6e+23
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">parse_logical</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;1&#34;</span><span class="p">,</span> <span class="s">&#34;true&#34;</span><span class="p">,</span> <span class="s">&#34;0&#34;</span><span class="p">,</span> <span class="s">&#34;false&#34;</span><span class="p">))</span>
</code></pre></div><pre><code>[1]  TRUE  TRUE FALSE FALSE
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">parse_date</span><span class="p">(</span><span class="s">&#34;2020-06-03&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;2020-06-03&quot;
</code></pre>
</section>
<section>
<h2 id="å› å­å‹-factor">å› å­å‹ <code>factor</code></h2>
<p>ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«å¤‰æ•°ã‚’æ‰±ã†ãŸã‚ã®å‹ã€‚æ–‡å­—åˆ—ã£ã½ã„ã‘ã©ä¸­èº«ã¯æ•°ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris</span> <span class="o">=</span> <span class="n">tibble</span><span class="o">::</span><span class="nf">as_tibble</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">print</span><span class="p">()</span>
</code></pre></div><pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;     &lt;fct&gt;
  1          5.1         3.5          1.4         0.2    setosa
  2          4.9         3.0          1.4         0.2    setosa
  3          4.7         3.2          1.3         0.2    setosa
  4          4.6         3.1          1.5         0.2    setosa
 --                                                            
147          6.3         2.5          5.0         1.9 virginica
148          6.5         3.0          5.2         2.0 virginica
149          6.2         3.4          5.4         2.3 virginica
150          5.9         3.0          5.1         1.8 virginica
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">levels</span><span class="p">(</span><span class="n">iris[[</span><span class="s">&#34;Species&#34;</span><span class="n">]]</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;setosa&quot;     &quot;versicolor&quot; &quot;virginica&quot; 
</code></pre><div class="url"><a href="https://r4ds.had.co.nz/factors.html">
https://r4ds.had.co.nz/factors.html
</a></div>

</section>
<section>
<h2 id="å› å­å‹-factor-æ–‡å­—åˆ—ã¨ã®é•ã„1">å› å­å‹ <code>factor</code>: æ–‡å­—åˆ—ã¨ã®é•ã„1</h2>
<p>å–ã‚Šã†ã‚‹å€¤ (levels) ãŒæ—¢çŸ¥ã€‚</p>
<p>typoãŒã‚ã‚‹ã¨ <code>NA</code> æ‰±ã„ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">month_levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span>
  <span class="s">&#34;Jan&#34;</span><span class="p">,</span> <span class="s">&#34;Feb&#34;</span><span class="p">,</span> <span class="s">&#34;Mar&#34;</span><span class="p">,</span> <span class="s">&#34;Apr&#34;</span><span class="p">,</span> <span class="s">&#34;May&#34;</span><span class="p">,</span> <span class="s">&#34;Jun&#34;</span><span class="p">,</span>
  <span class="s">&#34;Jul&#34;</span><span class="p">,</span> <span class="s">&#34;Aug&#34;</span><span class="p">,</span> <span class="s">&#34;Sep&#34;</span><span class="p">,</span> <span class="s">&#34;Oct&#34;</span><span class="p">,</span> <span class="s">&#34;Nov&#34;</span><span class="p">,</span> <span class="s">&#34;Dec&#34;</span>
<span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Dec&#34;</span><span class="p">,</span> <span class="s">&#34;Apr&#34;</span><span class="p">,</span> <span class="s">&#34;Jam&#34;</span><span class="p">,</span> <span class="s">&#34;Mar&#34;</span><span class="p">)</span>
<span class="nf">factor</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">month_levels</span><span class="p">)</span>
</code></pre></div><pre><code>[1] Dec  Apr  &lt;NA&gt; Mar 
Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
</code></pre>
</section>
<section>
<h2 id="å› å­å‹-factor-æ–‡å­—åˆ—ã¨ã®é•ã„2">å› å­å‹ <code>factor</code>: æ–‡å­—åˆ—ã¨ã®é•ã„2</h2>
<p>é †åºãŒã‚ã‚‹ã€‚</p>
<p>æ–‡å­—åˆ—ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã¨å½“ç„¶ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã‚‹ã‘ã©ã€<br>
å› å­å‹ã«ã¯ãã†ã˜ã‚ƒãªã„é †åºã‚’æŒãŸã›ã‚‰ã‚Œã‚‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">x1</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Dec&#34;</span><span class="p">,</span> <span class="s">&#34;Apr&#34;</span><span class="p">,</span> <span class="s">&#34;Jan&#34;</span><span class="p">,</span> <span class="s">&#34;Mar&#34;</span><span class="p">)</span>
<span class="nf">sort</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</code></pre></div><pre><code>[1] &quot;Apr&quot; &quot;Dec&quot; &quot;Jan&quot; &quot;Mar&quot;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">y1</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">month_levels</span><span class="p">)</span>
<span class="nf">as.integer</span><span class="p">(</span><span class="n">y1</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 12  4  1  3
</code></pre>
</section>
<section>
<h2 id="å› å­å‹-factor-é †åºã®æƒ…å ±ã¯ä½œå›³ã§ç”Ÿãã‚‹">å› å­å‹ <code>factor</code>: é †åºã®æƒ…å ±ã¯ä½œå›³ã§ç”Ÿãã‚‹</h2>
<p>æ–‡å­—åˆ—ãªã‚‰ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã€å› å­å‹ãªã‚‰ä»»æ„æŒ‡å®šå¯èƒ½ã€‚<br>
é »åº¦é †ã«ã™ã‚‹ä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">diamonds</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="nf">fct_infreq</span><span class="p">(</span><span class="n">color</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">color</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span> <span class="nf">coord_flip</span><span class="p">()</span>
</code></pre></div><p><img src="figure/fct_infreq-1.png" alt="plot of chunk fct_infreq"></p>

</section>
<section>
<h2 id="tidyverse-ã®å› å­å‹æ‹…å½“ã¯-forcats">tidyverse ã®å› å­å‹æ‹…å½“ã¯ forcats</h2>
<a href="https://forcats.tidyverse.org/">
<img src="/slides/figure/rstats/hex-forcats.png" width="120" align="right">
</a>
<ul>
<li><code>fct_reorder()</code>: åˆ¥ã®å¤‰æ•°ã«å¿œã˜ã¦é †åºã‚’ä¸¦ã¹æ›¿ãˆ</li>
<li><code>fct_infreq()</code>: é »åº¦ã«å¿œã˜ã¦é †åºã‚’ä¸¦ã¹æ›¿ãˆ</li>
<li><code>fct_relevel()</code>: ã™ã¹ã¦æ‰‹å‹•ã§å†è¨­å®š</li>
<li><code>fct_lump()</code>: å°‘ãªã™ãã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’&quot;ãã®ä»–&quot;ã¨ã—ã¦ã¾ã¨ã‚ã‚‹</li>
</ul>

</section>
<section>
<h2 id="ãƒ€ãƒŸãƒ¼å¤‰æ•°ã«å¤‰æ›">ãƒ€ãƒŸãƒ¼å¤‰æ•°ã«å¤‰æ›</h2>
<p>ã‚¤ãƒã‚¼ãƒ­ã®å€¤ã‚’æŒãŸã›ã¦æ¨ªåºƒã«å¤‰å½¢ã™ã‚‹ã®ã¨ç­‰ä¾¡ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">iris</span> <span class="o">%&gt;%</span>
  <span class="nf">rowid_to_column</span><span class="p">()</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#34;Sepal&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="m">1L</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span> <span class="o">=</span> <span class="n">Species</span><span class="p">,</span> <span class="n">values_from</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">values_fill</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="m">0L</span><span class="p">))</span>
</code></pre></div><pre><code>    rowid Petal.Length Petal.Width setosa versicolor virginica
    &lt;int&gt;        &lt;dbl&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;     &lt;int&gt;
  1     1          1.4         0.2      1          0         0
  2     2          1.4         0.2      1          0         0
  3     3          1.3         0.2      1          0         0
  4     4          1.5         0.2      1          0         0
 --                                                           
147   147          5.0         1.9      0          0         1
148   148          5.2         2.0      0          0         1
149   149          5.4         2.3      0          0         1
150   150          5.1         1.8      0          0         1
</code></pre><p>å•: ã“ã‚Œã®é€†å‘ãã‚’ã‚„ã£ã¦ã¿ã‚ˆã†</p>

</section>
<section>
<h2 id="æ—¥æ™‚å‹-posixct-posixlt">æ—¥æ™‚å‹: POSIXct, POSIXlt</h2>
<ul>
<li>POSIXct: ã‚¨ãƒãƒƒã‚¯ã‹ã‚‰ã®çµŒéç§’æ•°ã€‚æ¯”è¼ƒã‚„å·®åˆ†ãªã©ã‚’å–ã‚Šã‚„ã™ã„ã€‚</li>
<li>POSIXlt: list(å¹´, æœˆ, æ—¥, æ™‚, åˆ†, ç§’)ã€‚å˜ä½ã”ã¨ã«æŠœãå‡ºã—ã‚„ã™ã„ã€‚</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">now</span> <span class="o">=</span> <span class="s">&#34;2020-06-03 13:00:00&#34;</span>
<span class="n">ct</span> <span class="o">=</span> <span class="nf">as.POSIXct</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="nf">unclass</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 1591156800
attr(,&quot;tzone&quot;)
[1] &quot;&quot;
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">lt</span> <span class="o">=</span> <span class="nf">as.POSIXlt</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="nf">unclass</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">as_tibble</span><span class="p">()</span>
</code></pre></div><pre><code>    sec   min  hour  mday   mon  year  wday  yday isdst  zone gmtoff
  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
1     0     0    13     3     5   120     3   154     0   JST     NA
</code></pre><p>ç´ ã®Rã§ã‚‚æ‰±ãˆã‚‹ã‘ã© lubridate ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã¨ã‚‚ã£ã¨æ¥½ã«ã€‚</p>

</section>
<section>
<h2 id="lubridate-----æ—¥æ™‚å‹å‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸">lubridate &mdash; æ—¥æ™‚å‹å‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</h2>
<a href="https://lubridate.tidyverse.org/">
<img src="/slides/figure/rstats/hex-lubridate.png" width="120" align="right">
</a>
<p>æ—¥æ™‚å‹ã¸ã®å¤‰æ›:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">ymd</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;20200603&#34;</span><span class="p">,</span> <span class="s">&#34;2020-06-03&#34;</span><span class="p">,</span> <span class="s">&#34;20/6/3&#34;</span><span class="p">))</span>
</code></pre></div><pre><code>[1] &quot;2020-06-03&quot; &quot;2020-06-03&quot; &quot;2020-06-03&quot;
</code></pre><p>æ—¥æ™‚å‹ã‹ã‚‰å˜ä½ã”ã¨ã«å€¤ã‚’å–å¾—:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">today</span> <span class="o">=</span> <span class="nf">ymd</span><span class="p">(</span><span class="m">20200603</span><span class="p">)</span>
<span class="nf">month</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
</code></pre></div><pre><code>[1] 6
</code></pre><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">wday</span><span class="p">(</span><span class="n">today</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></div><pre><code>[1] Wed
Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat
</code></pre><p><a href="https://github.com/rstudio/cheatsheets/raw/master/lubridate.pdf">ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ</a></p>

</section>
<section>
<h2 id="æœ¬æ—¥å¾ŒåŠã®ã¾ã¨ã‚">æœ¬æ—¥å¾ŒåŠã®ã¾ã¨ã‚</h2>
<ul>
<li>vectorã«ã¯å‹ãŒã‚ã‚‹: æ–‡å­—åˆ—ã€æ•°å€¤ã€å› å­ã€æ—¥æ™‚ã€etc.</li>
<li>å¤§æ¦‚ã®æ“ä½œã¯vectorå…¨ä½“ã«ä¸€æ‹¬é©ç”¨</li>
<li>æ–‡å­—åˆ—ã‚’æ‰±ã†ã«ã¯ <a href="https://stringr.tidyverse.org/">stringr</a>
<ul>
<li>æ­£è¦è¡¨ç¾ã¯å¼·åŠ›ãƒ»æ±ç”¨çš„</li>
</ul>
</li>
<li>å› å­ã‚’æ‰±ã†ã«ã¯ <a href="https://forcats.tidyverse.org/">forcats</a>
<ul>
<li>çŸ¥ã£ã¦ãŠãã¨ä½œå›³ã§æœ‰åˆ©</li>
</ul>
</li>
<li>æ—¥æ™‚ã‚’æ‰±ã†ã«ã¯ <a href="https://lubridate.tidyverse.org/">lubridate</a></li>
</ul>
<p>å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ.pdfã‚’æ‰‹å…ƒã«æŒã£ã¦ãŠãã¨ä¾¿åˆ©ã€‚
</section>
<section>
<h2 id="reference">Reference</h2>
<dl>
<dt>R for Data Science &mdash; Hadley Wickham and Garrett Grolemund</dt>
<dd><a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a></dd>
<dd><a href="https://amzn.to/2tbRmVc">Book</a></dd>
<dd><a href="https://amzn.to/2yyFRKt">æ—¥æœ¬èªç‰ˆæ›¸ç±(Rã§ã¯ã˜ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹)</a></dd>
<dt>Older versions</dt>
<dd>ã€Œ<a href="https://heavywatal.github.io/slides/nagoya2018/">Rã«ã‚„ã‚‰ã›ã¦æ¥½ã—ã‚ˆã† â€” ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã¨ä¸‹ã”ã—ã‚‰ãˆ</a>ã€
å²©åµœèˆª 2018</dd>
<dd>ã€ŒRã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿è§£æã®åŸºç¤ã¨å¿œç”¨ã€çŸ³å·ç”±å¸Œ 2019 åå¤å±‹å¤§å­¦</dd>
<dd>ã€Œ<a href="https://heavywatal.github.io/slides/tmd2019/">Rã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†å®Ÿç¿’</a>ã€
å²©åµœèˆª 2019 æ±äº¬åŒ»ç§‘æ­¯ç§‘å¤§</dd>
<dt>Official documents:</dt>
<dd><a href="https://www.tidyverse.org/">tidyverse</a>,
<a href="https://dplyr.tidyverse.org/">dplyr</a>,
<a href="https://tidyr.tidyverse.org/">tidyr</a>,
<a href="https://purrr.tidyverse.org/">purrr</a>,
<a href="https://tibble.tidyverse.org/">tibble</a>,
<a href="https://readr.tidyverse.org/">readr</a>,
<a href="https://stringr.tidyverse.org/">stringr</a>,
<a href="https://forcats.tidyverse.org/">forcats</a>,
<a href="https://lubridate.tidyverse.org/">lubridate</a></dd>
<dt>æ•´ç„¶ãƒ‡ãƒ¼ã‚¿ã¨ã¯ä½•ã‹ &mdash; <a href="https://twitter.com/f_nisihara">@f_nisihara</a></dt>
<dd><a href="https://speakerdeck.com/fnshr/zheng-ran-detatutenani">https://speakerdeck.com/fnshr/zheng-ran-detatutenani</a></dd>
<dd><a href="https://id.fnshr.info/2017/01/09/tidy-data-intro/">https://id.fnshr.info/2017/01/09/tidy-data-intro/</a></dd>
</dl>
<a href="4-statistics.html" rel="next" class="readmore">
4. Statistical analysis with R
</a>

</section>
</div>
</div>
<script src="/slides/reveal.js/js/reveal.js"></script>
<script>
Reveal.initialize({
  width: 960,
  height: 720,
  margin: 0,
  controls: true,
  controlsTutorial: false,
  controlsBackArrows: 'faded',
  progress: false,
  slideNumber: 'c/t',
  history: false,
  keyboard: true,
  overview: true,
  center: false,
  touch: true,
  loop: false,
  rtl: false,
  shuffle: false,
  fragments: true,
  fragmentInURL: false,
  embedded: false,
  help: true,
  showNotes: false,
  mouseWheel: false,
  transition: 'none',
  transitionSpeed: 'fast',
  backgroundTransition: 'none',
  viewDistance: 1,
  dependencies: [
    { src: '\/slides\/reveal.js\/plugin\/notes\/notes.js', async: true }
  ]
});
</script>
<script>
{
const reload_all_img = function() {
  const imgs = document.getElementsByTagName("img");
  for (let i = 0; i < imgs.length; ++i) {
    const src = imgs[i].src;
    imgs[i].src += "?q";
    imgs[i].src = src;
  }
};
const reload_src_element = function(ev) {
  const original_src = ev.srcElement.src;
  ev.srcElement.src += "?q";
  ev.srcElement.src = original_src;
};
const reload_src = function(ev) {
  if (ev.shiftKey || ev.metaKey || ev.altKey) {
    reload_all_img();
  } else {
    reload_src_element(ev);
  }
};
const img_elements = document.getElementsByTagName("img");
for (let i = 0; i < img_elements.length; ++i) {
  img_elements[i].onclick = reload_src;
}
};
</script>
</body>
</html>
