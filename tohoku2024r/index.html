<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>進化学実習 2024 牧野研 東北大学</title>
<meta name="author" content="Watal M. Iwasaki">
<meta property="og:title" content="進化学実習 2024 牧野研 東北大学">
<meta property="og:type" content="article">
<meta property="og:url" content="https://heavywatal.github.io/slides/tohoku2024r/">
<meta property="og:image" content="https://avatars.githubusercontent.com/heavywatal">
<meta property="og:description" content="">
<meta property="og:site_name" content="Slide decks — Heavy Watal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@heavywatal">
<meta name="twitter:creator" content="@heavywatal">
<link rel="stylesheet" href="/lib/katex/katex.min.css">
<script defer src="/lib/katex/katex.min.js"></script>
<script defer src="/lib/katex/contrib/auto-render.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false}
    ]
  });
});
</script>
<style>
.katex {
  font-size: 1.12em;
}

.katex-display > .katex {
  text-align: left;
  padding-left: 2rem;
}
</style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V60H2JH0G6"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V60H2JH0G6', { 'anonymize_ip': false });
}
</script>
<script defer src="/slides/lib/reload-img-onclick.js"></script>
<link rel="stylesheet" href="/slides/css/style-plain.css">
</head>
<body>
<main>
<header>
<h1>進化学実習 2024 牧野研 東北大学</h1>
</header>
<h2 id="概要">概要</h2>
<ul>
<li>
<p>講師: 岩嵜航 (東北大学 生命科学研究科 進化ゲノミクス分野 牧野研)</p>
</li>
<li>
<p>科目: 東北大学 理学部生物学科 進化学実習</p>
</li>
<li>
<p>日程: 2024年4月8, 9, 10, 11, 15日</p>
</li>
<li>
<p>場所: 東北大学理学部合同A棟3階実習室 / zoom.us</p>
</li>
<li>
<p>概要:<br>
理学部生物学科における研究とは、大雑把に言うと
「生物に関するデータを集め、その背後にある理（ことわり）を読み解くこと」です。
そのため、データの解析と作図はどんな研究をするにもほぼ不可欠となります。
正しい結論を導くためには、データをいろいろな角度から可視化して全体の構造を見渡すことが特に重要です。
また、観察・実験・データベースなどから得られるデータは多種多様であり、
そのまますぐ使えることはめったにありません。
まずデータを整形するところから始める必要があります。
この前処理にせよ、作図にせよ、
「エクセルであれをあっちにコピペして、メニューからあれを選択して&hellip;」
といった手作業でやるのは大変ですし、再現性が無いため科学の手続きとしても問題です。
いつでもだれでも再検証したり使いまわしたりできるように、
規則性のある退屈な仕事は機械に任せるのが得策です。
本実習では、近年さらに易しくなったR言語を用いることで、
生データから効果的な作図まで簡単に辿り着けるということを体験してもらいます。</p>
</li>
<li>
<p>到達目標:
生物学研究におけるデータ解釈・解析の重要性を認識する。
Rを使用してデータの前処理・可視化ができるようになる。</p>
</li>
<li>
<p>授業計画</p>
<ol>
<li>導入: データ解析の全体像。Rの基本。</li>
<li>データの可視化。</li>
<li>データ構造の処理1: 抽出、集約など。</li>
<li>データ構造の処理2: 結合、変形など。</li>
<li>データ内容の処理: 数値、文字列など。</li>
<li>データ入力、レポート作成</li>
<li>統計モデリング1: 確率分布、尤度</li>
<li>統計モデリング2: 一般化線形モデル</li>
<li>発表会</li>
</ol>
<table>
<thead>
<tr>
<th>時間</th>
<th>4/8 Mon</th>
<th>4/9 Tue</th>
<th>4/10 Wed</th>
<th>4/11 Thu</th>
<th>4/15 Mon</th>
</tr>
</thead>
<tbody>
<tr>
<td>13:00</td>
<td><strong>導入</strong></td>
<td><strong>構造処理1</strong></td>
<td><strong>内容処理</strong></td>
<td><strong>統計モデル1</strong></td>
<td>発表会</td>
</tr>
<tr>
<td>14:40</td>
<td><strong>可視化</strong></td>
<td><strong>構造処理2</strong></td>
<td><strong>データ入力</strong></td>
<td><strong>統計モデル2</strong></td>
<td>発表会</td>
</tr>
<tr>
<td>16:20</td>
<td>練習問題</td>
<td>練習問題</td>
<td>練習問題</td>
<td>練習問題</td>
<td>予備</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>準備学習等</p>
<ul>
<li>ファイル、フォルダ、クリックなど一般的なパソコンの基礎知識と経験</li>
<li>下記のパソコン環境設定</li>
</ul>
</li>
<li>
<p>教科書</p>
<ul>
<li>なし</li>
</ul>
</li>
<li>
<p>参考書</p>
<ul>
<li><a href="https://www.amazon.co.jp/dp/B08Q7RN6XL?&amp;linkCode=ll1&amp;tag=heavywatal-22&amp;linkId=019f7f04e33c452ca54983b45baa71d1&amp;language=ja_JP&amp;ref_=as_li_ss_tl">江崎貴裕「分析者のためのデータ解釈学入門」</a> 2020</li>
<li><a href="https://r4ds.hadley.nz/">Hadley Wickham et al. &ldquo;R for Data Science&rdquo;</a></li>
<li><a href="https://www.amazon.co.jp/dp/4774196479?&amp;linkCode=ll1&amp;tag=heavywatal-22&amp;linkId=71fd11103334f289e47373a7205d8392&amp;language=ja_JP&amp;ref_=as_li_ss_tl">本橋智光「前処理大全」</a></li>
</ul>
</li>
<li>
<p>講義資料置き場: <a href="https://heavywatal.github.io/slides/tohoku2024r/">https://heavywatal.github.io/slides/tohoku2024r/</a></p>
</li>
</ul>
<h2 id="実習環境の設定">実習環境の設定</h2>
<p>途中まででもいいので、できるかぎり実習前に済ませてもらえると助かります。</p>
<ol>
<li>
<p>OSのソフトウェア・アップデートを基本的に全て適用して再起動。</p>
<ul>
<li>Windows 11 (≥23H2)</li>
<li>macOS Sonoma (≥14.4)</li>
</ul>
</li>
<li>
<p>ファイル名の末尾(<code>.pdf</code> とか <code>.png</code> とか)の<a href="https://duckduckgo.com/?q=%E6%8B%A1%E5%BC%B5%E5%AD%90+%E8%A1%A8%E7%A4%BA">拡張子を常時表示する</a>ようにOSを設定。</p>
</li>
<li>
<p><a href="https://cran.r-project.org/">https://cran.r-project.org/</a>
から最新版の <strong>R本体(≥ 4.3.3)</strong> をダウンロードしてインストール。
OK連打のデフォルト設定で。
古いものが既に入っている場合は念のため削除してから。</p>
<ul>
<li><a href="https://cran.r-project.org/bin/windows/base">Windows → base</a> → <code>R-4.*.*-win.exe</code></li>
<li><a href="https://cran.r-project.org/bin/macosx/">Mac</a>
→ <code>R-4.*.*-arm64.pkg</code> (Apple Silicon) or <code>R-4.*.*.pkg</code> (Intel)</li>
</ul>
</li>
<li>
<p><a href="https://posit.co/download/rstudio-desktop/">https://posit.co/download/rstudio-desktop/</a>
から最新版の <strong>RStudio (≥ 2023.12.1)</strong> をダウンロードしてインストール。
古いものが既に入っている場合は念のため削除してから。</p>
</li>
<li>
<p>開発者ツールをインストール。
ここでは必須ではないけどいずれ使うことになる。</p>
<ul>
<li>Windows: <a href="https://cran.r-project.org/bin/windows/Rtools/"><strong>Rtools</strong></a>
(R本体のバージョンに合わせる)</li>
<li>Mac: <a href="https://duckduckgo.com/?q=command+line+tools"><strong>Command Line Tools</strong></a>:
ターミナルで <code>xcode-select --install</code> を実行。
Xcode環境は不要。</li>
</ul>
</li>
<li>
<p>RStudioを起動し、左側のConsoleで次の1行を実行:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;tidyverse&#34;</span><span class="p">,</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;binary&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>何か訊かれたら <code>yes</code> と回答。
パッケージがたくさんインストールされる。
エラーや警告らしきものがあれば全文コピーしておく。</p>
</li>
<li>
<p>Consoleに次の2行を打ち込んでメッセージを確認:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">conflicted</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>── Attaching core tidyverse packages ─────────────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
</code></pre></li>
</ol>
<h3 id="エラーや警告が出たら">エラーや警告が出たら</h3>
<ol>
<li>
<p>実習当日に教員やTAに相談。全員の環境を確認してから進みます。</p>
</li>
<li>
<p><strong>バージョン確認</strong>。OS、R、RStudioなどのソフトウェアが古すぎるかも。
それらが十分に新しければ、次に挙げる日本語やOneDriveの問題は対処済みのはず。</p>
</li>
<li>
<p>手元のコンピューターの<strong>ホームフォルダ</strong>を確認。
新しくターミナルを開いて <code>pwd</code> コマンドを実行。
ここに半角アルファベットじゃない文字(日本語とか記号とか空白とか)が含まれている場合、不具合の原因になりがち。
ここだけ修正するのはかなり難しい
(ユーザー名のフルネーム表示は変更できるけどそれは無関係)。
新しいユーザーアカウントを作って引っ越すとか、
OSをクリーンインストールするとかしてやり直したほうが結局早そう。
<strong>半角アルファベット小文字のみ</strong>で短いものを推奨。</p>
<ul>
<li>✅ Good: <code>watal</code>, <code>tamakino</code></li>
<li>❌ Bad: <code>岩嵜航</code>, <code>Watal Iwasaki</code>, <code>heavy.watal</code></li>
</ul>
<p>Windowsのホームフォルダ(<code>%USERPROFILE%</code>)はログインの仕方で決まるっぽい:</p>
<ul>
<li>✅ <strong>Microsoftアカウント</strong>(<code>example@outlook.jp</code>)でログイン:
<code>C:/Users/examp/</code> (ユーザー名が漢字だろうがなんだろうが、<strong>メールアドレスの最初の5文字</strong>が使われるのでセーフ)</li>
<li>Microsoftアカウントを使わず、<strong>ローカルユーザー</strong>としてログイン
<ul>
<li>✅ 半角英字のみのユーザー名なら問題ない: <code>C:/Users/goodname/</code></li>
<li>❌ 漢字など全角文字を含むアカウント名: <code>C:/Users/朗軽 遊佐/</code><br>
RとRStudioは既に対応済みだけど、Quarto(あるいはPandoc?)は未対応らしくてエラー。
他のソフトウェアでも不具合が出る危険あり。
ローカルユーザーを作ったあとでMicrosoftアカウントと紐付けても直らなそう。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Windowsの場合OneDriveが悪さしているかも。
参考:</p>
<ul>
<li><a href="https://ryotamugiyama.com/blog/2020-08-03-Rinstall.html">https://ryotamugiyama.com/blog/2020-08-03-Rinstall.html</a></li>
<li><a href="https://okumuralab.org/~okumura/stat/R-win.html">https://okumuralab.org/~okumura/stat/R-win.html</a></li>
<li><a href="https://yukiyanai.github.io/jp/resources/">https://yukiyanai.github.io/jp/resources/</a></li>
</ul>
</li>
</ol>
<h2 id="講義資料">講義資料</h2>
<p><kbd>←</kbd><kbd>→</kbd>キーで戻る・進むスライド形式。</p>
<p>🚧 準備中。ここに各回の資料のリンクを貼っていきます。 🚧</p>

<ul>
<li>2024-04-08 13:00 | <a href="/slides/tohoku2024r/1-introduction.html">導入: データ解析の全体像。Rの基本。</a></li>
<li>2024-04-08 14:40 | <a href="/slides/tohoku2024r/2-visualization.html">データの可視化。</a></li>
<li>2024-04-09 13:00 | <a href="/slides/tohoku2024r/3-structure1.html">データ構造の処理1: 抽出、集約など。</a></li>
<li>2024-04-09 14:40 | <a href="/slides/tohoku2024r/4-structure2.html">データ構造の処理2: 結合、変形など。</a></li>
<li>2024-04-10 13:00 | <a href="/slides/tohoku2024r/5-content.html">データ内容の処理: 数値、文字列など。</a></li>
<li>2024-04-10 14:40 | <a href="/slides/tohoku2024r/6-input.html">データ入力、レポート作成</a></li>
<li>2024-04-11 13:00 | <a href="/slides/tohoku2024r/7-distribution.html">統計モデリング1: 確率分布、尤度</a></li>
<li>2024-04-11 14:40 | <a href="/slides/tohoku2024r/8-glm.html">統計モデリング2: 一般化線形モデル</a></li>
<li>2024-04-15 13:00 | <a href="/slides/tohoku2024r/9-report.html">発表会</a></li>
</ul>
</main>
</body>
</html>
