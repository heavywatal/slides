+++
url = "hokudai2021r/6-practice.html"
title = "6. å®Ÿè·µ â€” Rã«ã‚„ã‚‰ã›ã¦æ¥½ã—ã‚ˆã† 2021 åŒ—å¤§"
linktitle = "å®Ÿè·µ: ç¾å®Ÿã®å•é¡Œã«å¯¾å‡¦ã—ã¦ã¿ã‚‹"
date = 2021-09-15T13:30:00+09:00
type = "reveal"
draft = false
+++

<link rel="stylesheet" href="style.css">

# [Rã«ã‚„ã‚‰ã›ã¦æ¥½ã—ã‚ˆã† â€” ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã¨ä¸‹ã”ã—ã‚‰ãˆ](.)

<div class="author">
å²©åµœ èˆª (Watal M. Iwasaki, PhD)
</div>

<div class="affiliation">
æ±åŒ—å¤§å­¦ ç”Ÿå‘½ç§‘å­¦ç ”ç©¶ç§‘ é€²åŒ–ã‚²ãƒãƒŸã‚¯ã‚¹åˆ†é‡ ç‰¹ä»»åŠ©æ•™<br>
(Graduate School of Life Sciences, Tohoku University)
</div>

<ol>
<li><a href="1-introduction.html">å…¥é–€1: ãƒ‡ãƒ¼ã‚¿è§£æã®å…¨ä½“åƒã€‚Rã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆã€‚Rã®åŸºæœ¬ã€‚</a>
<li><a href="2-visualization.html">å…¥é–€2: ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã®é‡è¦æ€§ã¨æ–¹æ³•ã€‚</a>
<li><a href="3-structure1.html">ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†1: æŠ½å‡ºã€é›†ç´„ãªã©ã€‚</a>
<li><a href="4-structure2.html">ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å‡¦ç†2: çµåˆã€å¤‰å½¢ãªã©ã€‚</a>
<li><a href="5-content.html">ãƒ‡ãƒ¼ã‚¿å†…å®¹ã®å‡¦ç†: æ•°å€¤ã€æ–‡å­—åˆ—ã€æ—¥æ™‚ãªã©ã€‚</a>
<li class="current-deck"><a href="6-practice.html">å®Ÿè·µ: ç¾å®Ÿã®å•é¡Œã«å¯¾å‡¦ã—ã¦ã¿ã‚‹ã€‚</a>
</ol>

<div class="footnote">
2021-09-13 åŒ—æµ·é“å¤§å­¦ ç”Ÿå‘½ç§‘å­¦é™¢ ç‰¹åˆ¥è¬›ç¾©
<a href="https://heavywatal.github.io/slides/hokudai2021r/">https://heavywatal.github.io/slides/hokudai2021r/</a>
</div>

```{r setup-global, include=FALSE, code=readLines("setup.R")}
```

```{r setup-local, include=FALSE}
library(ggplot2)
library(tibble)
library(dplyr)
library(tidyr)
library(purrr)
library(stringr)
library(readr)
library(forcats)
library(lubridate)
knitr::opts_chunk$set(cache = FALSE)
anscombe = tibble::as_tibble(anscombe)
```

---
## æœ€çµ‚å›: å®Ÿè·µã—ã¦ã¿ã‚ˆã†

1. ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ç’°å¢ƒã®æ•´å‚™
1. ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€èª­ã¿è¾¼ã¿
1. æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿è§£æ
    - **å‰å‡¦ç†ã€åŠ å·¥** (åœ°å‘³ã€‚æ„å¤–ã¨é‡ã„) ğŸ‘ˆæœ¬å®Ÿç¿’ã®ä¸»é¡Œ
    - å¯è¦–åŒ–ã€ä»®èª¬ç”Ÿæˆ (æ´¾æ‰‹ï¼ã ã„ã˜ï¼)
    - çµ±è¨ˆè§£æã€ä»®èª¬æ¤œè¨¼ (ã¿ã‚“ãªå‹‰å¼·ã—ãŸãŒã‚‹)
1. å ±å‘Šã€ç™ºè¡¨

<figure>
<a href="https://r4ds.had.co.nz/introduction.html">
<img src="/slides/image/r4ds/data-science.png">
<figcaption class="url">https://r4ds.had.co.nz/introduction.html</figcaption>
</a>
</figure>


---
## å¥½ããªãƒ‡ãƒ¼ã‚¿ã‚’ã„ã˜ãã‚Šå€’ã—ã¦ã¿ã‚ˆã†

- è‡ªåˆ†ãŒã“ã‚Œã‹ã‚‰è§£æã—ãŸã„ãƒ‡ãƒ¼ã‚¿ (ã‚‚ã—æ‰‹å…ƒã«ã‚ã‚Œã°)
- Rã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä»˜å±ã®ãƒ‡ãƒ¼ã‚¿ (ã®ã†ã¡tidyã˜ã‚ƒãªã„ã‚‚ã®)
    - `VADeath`, `anscombe`, `economics`
- ä½•ã‹é©å½“ãªãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
    - [data.go.jp](https://www.data.go.jp/data/dataset?res_format=CSV): ãƒ‡ãƒ¼ã‚¿ã‚«ã‚¿ãƒ­ã‚°ã‚µã‚¤ãƒˆ
    - [IT DASHBOARD](https://www.itdashboard.go.jp/Statistics/opendata): å†…é–£å®˜æˆ¿
    - [e-Stat](https://www.e-stat.go.jp/): æ”¿åºœçµ±è¨ˆã®ç·åˆçª“å£
    - [DATA.GOV](https://www.data.gov/): U.S. Governmentâ€™s open data
    - [æ°—è±¡åº](https://www.data.jma.go.jp/gmd/risk/obsdl/index.php)
    - [ç›®é»’åŒºã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿](https://www.city.meguro.tokyo.jp/gyosei/hirakareta/opendata/opendata.html):
      ã€Œåœ°åŸŸãƒ»å¹´é½¢åˆ¥äººå£ã€ã¨ã‹ã„ã„æ„Ÿã˜
- ã€Œã“ã†ã—ãŸã„ã€ã€Œã†ã¾ãã„ã‹ãªã„ã€ã€Œã‚‚ã£ã¨ã„ã˜ã‚‹ã¨ã—ãŸã‚‰ã€
  ãªã©æ°—è»½ã«è³ªå•ã—ã¦ãã ã•ã„

---
## å®Ÿæ¼”: ç›®é»’åŒºã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿

ã€Œåœ°åŸŸãƒ»å¹´é½¢åˆ¥äººå£ã€CSVã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€èª­ã¿è¾¼ã‚€

```{r meguro_read}
# infile = http://www.city.meguro.tokyo.jp/opendata/131105_population_20170401.csv
infile = "131105_population_20170401.csv"
raw_df = readr::read_csv(infile)
print(raw_df)
```

---
## å®Ÿæ¼”: ç›®é»’åŒºã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿

ggplotã—ãŸããªã‚‹å½¢ã«å¤‰å½¢

```{r meguro_tidy}
tidy_df = raw_df %>%
  select("åœ°åŸŸå", matches("ã®.+æ€§$")) %>%
  rename(place = åœ°åŸŸå) %>%
  mutate(place = str_replace(place, "\\Sä¸ç›®", "")) %>%
  group_by(place) %>%
  summarize(across(everything(), sum)) %>%
  ungroup() %>%
  pivot_longer(-place, names_to = "category") %>%
  separate(category, c("age", "sex"), sep = "ã®") %>%
  filter(str_detect(age, "\\d")) %>%
  mutate(age = parse_number(age)) %>%
  print()
```

---
## å®Ÿæ¼”: ç›®é»’åŒºã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿

ä½œå›³ã—ã¦ã¿ã‚‹

```{r meguro_plot, fig.height = 4.5, fig.width = 10}
tidy_df %>%
  ggplot(aes(age, value)) +
  geom_col(aes(fill = sex)) +
  facet_wrap(~ place, nrow = 3L) +
  theme_bw(base_family = "HiraginoSans-W3")
```


---
## Reference

R for Data Science --- Hadley Wickham and Garrett Grolemund
: <https://r4ds.had.co.nz/>,
  [Paperback](https://amzn.to/2tbRmVc),
  [æ—¥æœ¬èªç‰ˆæ›¸ç±](https://amzn.to/2yyFRKt)

[å‰å‡¦ç†å¤§å…¨ --- æœ¬æ©‹æ™ºå…‰](https://www.amazon.co.jp/dp/4774196479/ref=as_li_ss_tl?ie=UTF8&linkCode=ll1&tag=heavywatal-22&linkId=8a3fd4e9a0c944b1b41242bbab8d147b)<br>
[Rãƒ¦ãƒ¼ã‚¶ã®ãŸã‚ã®RStudio[å®Ÿè·µ]å…¥é–€ (å®‡å®™æœ¬) --- æ¾æ‘ã‚‰](https://amzn.to/3eBprm5)

Official documents:
: [tidyverse](https://www.tidyverse.org/),
  [ggplot2](https://ggplot2.tidyverse.org/),
  [dplyr](https://dplyr.tidyverse.org/),
  [tidyr](https://tidyr.tidyverse.org/),
  [readr](https://readr.tidyverse.org/),
  [tibble](https://tibble.tidyverse.org/),
  [stringr](https://stringr.tidyverse.org/),

Older versions
: ã€Œ[Rã«ã‚„ã‚‰ã›ã¦æ¥½ã—ã‚ˆã† â€” ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã¨ä¸‹ã”ã—ã‚‰ãˆ](https://heavywatal.github.io/slides/nagoya2018/)ã€
   å²©åµœèˆª 2018
: ã€ŒRã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿è§£æã®åŸºç¤ã¨å¿œç”¨ã€çŸ³å·ç”±å¸Œ 2019 åå¤å±‹å¤§å­¦
: ã€Œ[Rã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†å®Ÿç¿’](https://heavywatal.github.io/slides/tmd2019/)ã€
   å²©åµœèˆª 2019 æ±äº¬åŒ»ç§‘æ­¯ç§‘å¤§

<a href="./" class="readmore">
ç›®æ¬¡ã«æˆ»ã‚‹
</a>
